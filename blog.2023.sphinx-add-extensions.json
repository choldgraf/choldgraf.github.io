{"version":2,"kind":"Article","sha256":"34de01c22d4c3abfefad98971a057bfd57ad2ed8b69c551cefcd3017f22a5c59","slug":"blog.2023.sphinx-add-extensions","location":"/blog/2023/sphinx-add-extensions.md","dependencies":[],"frontmatter":{"title":"Bundle extensions with your Sphinx theme","tags":["sphinx"],"date":"2023-01-19","content_includes_title":false,"authors":[{"id":"chris","nameParsed":{"literal":"Chris Holdgraf","given":"Chris","family":"Holdgraf"},"name":"Chris Holdgraf","orcid":"0000-0002-2391-0678","affiliations":["affiliations-myst-generated-uid-0","affiliations-myst-generated-uid-1"],"url":"https://chrisholdgraf.com","github":"choldgraf","twitter":"choldgraf"}],"github":"https://github.com/choldgraf/choldgraf.github.io","affiliations":[{"name":"2i2c","url":"https://2i2c.org","id":"affiliations-myst-generated-uid-0"},{"name":"Project Jupyter","url":"https://jupyter.org","id":"affiliations-myst-generated-uid-1"}],"abbreviations":{"LF":"The Linux Foundation","JF":"The Jupyter Foundation","JEC":"Jupyter Executive Council","JFB":"The Jupyter Foundation Board","SSC":"Software Steering Council","OSPO":"Open Source Program Office"},"numbering":{"title":{"offset":2}},"source_url":"https://github.com/choldgraf/choldgraf.github.io/blob/main/blog/2023/sphinx-add-extensions.md","edit_url":"https://github.com/choldgraf/choldgraf.github.io/edit/main/blog/2023/sphinx-add-extensions.md","exports":[{"format":"md","filename":"sphinx-add-extensions.md","url":"/build/sphinx-add-extension-2c456c4fba48da8a88fa356d4c1a5964.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Sphinx is great because it has a ton of useful extensions that let you grow its functionality.\nHowever, a downside of this is that users have to actually ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"BWYsOxr6zl"},{"type":"emphasis","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"learn about","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"gvEeGWLcd6"}],"key":"r9mcUrgZeW"},{"type":"text","value":" those extensions and activate them manually.\nIt’s not hard, but it’s a non-trivial amount of discovery work.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"T9nGnT2OjO"}],"key":"dNojkWNs1D"},{"type":"paragraph","position":{"start":{"line":14,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"One way to solve this is for ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"ydX4ikZUc1"},{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"themes to bundle extensions on their own","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"DyApnSvtpG"}],"key":"CvOiGdYUBA"},{"type":"text","value":".\nThis way they can include functionality via an extension rather than writing custom code on their own.","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"v29jYCExnd"}],"key":"INC5no6RRA"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"However, this doesn’t often happen, I think because it can be pretty confusing how to do so.\nI believe I’ve figured out the major gotchas to avoid and patterns to follow, so here’s a quick overview.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"Hs5lqxyr6H"}],"key":"i70ZocgYLV"},{"type":"heading","depth":2,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Use ","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"lj7WkBdziz"},{"type":"inlineCode","value":"app.setup_extension","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"fHmM0vEQH1"},{"type":"text","value":" to add the extension","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"X6RuHJyesD"}],"identifier":"use-app-setup-extension-to-add-the-extension","label":"Use app.setup_extension to add the extension","html_id":"use-app-setup-extension-to-add-the-extension","implicit":true,"key":"f7XMkZYunj"},{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"First off, the ","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"EPzTx8h8lh"},{"type":"link","url":"https://www.sphinx-doc.org/en/master/extdev/appapi.html#sphinx.application.Sphinx.setup_extension","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Sphinx docs mention ","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"dUBdjMdGfU"},{"type":"inlineCode","value":"app.setup_extension","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"mer8rBP8Lb"}],"urlSource":"https://www.sphinx-doc.org/en/master/extdev/appapi.html#sphinx.application.Sphinx.setup_extension","key":"jgyhrCN14d"},{"type":"text","value":" as “the” way to set up a Sphinx extension.","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"c7zsXTZUCp"}],"key":"bcshwDERrU"},{"type":"paragraph","position":{"start":{"line":24,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"This activates the extension as if you’d put it in the ","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"qm6Xsy91bG"},{"type":"inlineCode","value":"extensions","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"KUgVbvN4Wr"},{"type":"text","value":" variable.\nHowever, it leaves out a lot of nuance.","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"RPDGyiMhml"}],"key":"KDBEHKe8El"},{"type":"heading","depth":2,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Don’t forget the theme is activated ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"D3IKzv5AEx"},{"type":"emphasis","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"after","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"B45F3okc0N"}],"key":"ZTiU2bTX1L"},{"type":"text","value":" ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"hqrbBPNAx2"},{"type":"inlineCode","value":"config-inited","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"BFFHgk1DnA"}],"identifier":"dont-forget-the-theme-is-activated-after-config-inited","label":"Don’t forget the theme is activated after config-inited","html_id":"dont-forget-the-theme-is-activated-after-config-inited","implicit":true,"key":"XwxslezJ16"},{"type":"paragraph","position":{"start":{"line":29,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"Many extensions add functionality in ","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"FVhNNwl3Ol"},{"type":"link","url":"https://www.sphinx-doc.org/en/master/extdev/appapi.html#sphinx-core-events","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Sphinx events","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"OxLtzf4iFW"}],"urlSource":"https://www.sphinx-doc.org/en/master/extdev/appapi.html#sphinx-core-events","key":"TNVeXpSunW"},{"type":"text","value":".\nThese are emitted throughout the build process and you can hook into them with functions to modify the document etc.","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"dVi4esyTku"}],"key":"r5uI2T5bG1"},{"type":"paragraph","position":{"start":{"line":32,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"However, ","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"Wj7ENReWlt"},{"type":"strong","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"your theme is activated after the ","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"zkH5TFPzYy"},{"type":"inlineCode","value":"config-inited","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"cgRGWkpD95"},{"type":"text","value":" event","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"JOKYIycVJ1"}],"key":"fRs7dg9M1E"},{"type":"text","value":".\nThat means that if you manually activate an extension, but that extension registers a callback that waits for ","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"uKgtcOWdEI"},{"type":"inlineCode","value":"config-inited","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"By5S5bwJB8"},{"type":"text","value":", then ","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"E2DkjpRqkN"},{"type":"strong","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"nothing will happen","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"NSKrV1TeSF"}],"key":"uyJnchjSGm"},{"type":"text","value":".","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"c2durtwntN"}],"key":"z9gFsXFyVw"},{"type":"paragraph","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"So in general, if something doesn’t seem like it’s happening, then double check that your extension isn’t using a ","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"tC1tkYavAw"},{"type":"inlineCode","value":"config-inited","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"rdna1OLnOp"},{"type":"text","value":" event hook.","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"mpnHzUNp0r"}],"key":"PRsLXzolXD"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Sphinx extension authors: don’t use ","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"k8ic3fA9eG"},{"type":"inlineCode","value":"config-inited","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"eHZdMrYu1n"},{"type":"text","value":"!","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"V2ROCBsgqw"}],"key":"yrtugKyFWw"},{"type":"paragraph","position":{"start":{"line":38,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"text","value":"Because of this limitation, I’d recommend that Sphinx extension authors use ","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"mLtNvJtHk9"},{"type":"inlineCode","value":"builder-inited","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"ysfseAHizz"},{"type":"text","value":" rather than ","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"VoCn34hv3c"},{"type":"inlineCode","value":"config-inited","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"Q4FFXQuOhi"},{"type":"text","value":".\nIt is also early in the build process, but ","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"Yvdj7RUtsa"},{"type":"emphasis","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"text","value":"after","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"ZIQvM07bFc"}],"key":"JLbPp9LzO3"},{"type":"text","value":" the theme is activated.","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"qIE1ICvSJm"}],"key":"R5BbscuPKl"}],"key":"tbKHz6DHAh"},{"type":"heading","depth":2,"position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"text","value":"Workaround: You can try emitting your own ","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"I2PdsF0k87"},{"type":"inlineCode","value":"config-inited","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"qc8UIkd45G"}],"identifier":"workaround-you-can-try-emitting-your-own-config-inited","label":"Workaround: You can try emitting your own config-inited","html_id":"workaround-you-can-try-emitting-your-own-config-inited","implicit":true,"key":"ylXShyF7He"},{"type":"paragraph","position":{"start":{"line":44,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"text","value":"I think I figured out a workaround to the above limitation in case you can’t control which events your extensions hook into.\nIt’s based on the idea that Sphinx has a ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"EsKfth3yir"},{"type":"strong","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"text","value":"registry of event listeners","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"kk7HIYWryE"}],"key":"Nu1pzJSqx5"},{"type":"text","value":" at ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"JybBqrsIsQ"},{"type":"inlineCode","value":"app.events.listeners","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"cLm1ZjdFSI"},{"type":"text","value":".\nThis is a dictionary of ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"OrduqKJZEE"},{"type":"inlineCode","value":"event-name:[list-of-listener-objects]","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"EpY1rjUT98"},{"type":"text","value":" pairs.\nWhen ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"xNukZUt1tX"},{"type":"inlineCode","value":"app.emit(event)","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"pj3D23UPNY"},{"type":"text","value":" is triggered, it loops through the respective list and runs each listener object.","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"YxwKR4xOnb"}],"key":"EGv5NyEIlB"},{"type":"paragraph","position":{"start":{"line":49,"column":1},"end":{"line":50,"column":1}},"children":[{"type":"text","value":"So we should be able to just remove that list, then activate our extensions (which will add to the list), and then manually trigger the ","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"bI0kMBEfJA"},{"type":"inlineCode","value":"config-inited","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"tyiGYRrDp0"},{"type":"text","value":" event.\nTry the following steps:","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"UxcImXIQIA"}],"key":"h281wMlH8w"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":52,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":52,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":52,"column":1},"end":{"line":53,"column":1}},"children":[{"type":"strong","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"text","value":"Store a copy of the old event listeners","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"kFdKh1d2Bz"}],"key":"ToRwp4Nuks"},{"type":"text","value":".\nThey’ve already been run (since ","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"CwtFdbZyPh"},{"type":"inlineCode","value":"config-inited","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"xyS8Df6nnR"},{"type":"text","value":" has happened already), but we’ll keep them just in case.","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"X5Zw8ZHWeh"}],"key":"JLvhhkeV8l"},{"type":"code","lang":"python","value":"old_listeners = app.events.listeners[\"config-inited\"]","position":{"start":{"line":55,"column":1},"end":{"line":57,"column":1}},"key":"CKOFXKZdhZ"}],"key":"Kxp1GiubgH"},{"type":"listItem","spread":true,"position":{"start":{"line":58,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":58,"column":1},"end":{"line":59,"column":1}},"children":[{"type":"strong","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"text","value":"Replace the old listeners with an empty list","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"EjEVZXIxHq"}],"key":"yjtYcY5rlt"},{"type":"text","value":".\nThis means there are effectively no listeners for the event.","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"EhGRDoqRUu"}],"key":"qkjS14Mwtp"},{"type":"code","lang":"python","value":"app.events.listeners[\"config-inited\"] = []","position":{"start":{"line":61,"column":1},"end":{"line":63,"column":1}},"key":"sPidE4mWNo"}],"key":"hvRMGzLPaS"},{"type":"listItem","spread":true,"position":{"start":{"line":64,"column":1},"end":{"line":73,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":64,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"strong","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"children":[{"type":"text","value":"Activate your extra extensions","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"ugBRRDtvcv"}],"key":"oQy2EAkLCt"},{"type":"text","value":".\nYou can now loop through the list of extensions you want to bundle and activate each one.","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"S0tiYFlABM"}],"key":"mh5gV0o0qA"},{"type":"code","lang":"python","value":"for ext in your_extensions:\n   app.setup_extension(ext)","position":{"start":{"line":67,"column":1},"end":{"line":70,"column":1}},"key":"qzPRgygQ9h"},{"type":"paragraph","position":{"start":{"line":72,"column":1},"end":{"line":73,"column":1}},"children":[{"type":"text","value":"This will ","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"key":"pU6t9m9QKg"},{"type":"emphasis","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"children":[{"type":"text","value":"add event listeners to ","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"key":"pTvr8Z9KpQ"},{"type":"inlineCode","value":"config-inited","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"key":"Xhy6G5k5NB"}],"key":"FuJctozUXp"},{"type":"text","value":" for any extensions that require it.\nAny extension that has already been activated will be a no-op.","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"key":"IoUCHk9Fpx"}],"key":"X0V8EoDlrV"}],"key":"ekKAeXz4SU"},{"type":"listItem","spread":true,"position":{"start":{"line":74,"column":1},"end":{"line":80,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":74,"column":1},"end":{"line":76,"column":1}},"children":[{"type":"strong","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"children":[{"type":"text","value":"Emit your own ","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"ezZexy8VzE"},{"type":"inlineCode","value":"config-inited","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"VdeTETO2c4"},{"type":"text","value":" event","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"zLHDrlSqVd"}],"key":"tWXXPE0qH8"},{"type":"text","value":".\nNow that you’ve activated the extensions and added their event listeners, re-emit the ","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"tw2JF2thj3"},{"type":"inlineCode","value":"config-inited","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"xs6UqSTo9o"},{"type":"text","value":" event.\nThis will now ","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"p3MysTtcnr"},{"type":"emphasis","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"children":[{"type":"text","value":"only call the new listeners you’ve added","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"Hw5fLkD7Qy"}],"key":"FO1gdq6UpL"},{"type":"text","value":".","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"TRaUUaGOHF"}],"key":"Qe1fNAPxZA"},{"type":"code","lang":"python","value":"app.emit(\"config-inited\", app.config)","position":{"start":{"line":78,"column":1},"end":{"line":80,"column":1}},"key":"y3L63QaY23"}],"key":"WCHdxPzkcy"},{"type":"listItem","spread":true,"position":{"start":{"line":81,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":81,"column":1},"end":{"line":82,"column":1}},"children":[{"type":"strong","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"children":[{"type":"text","value":"Combine the two lists of listeners","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"xHX1dMgWNV"}],"key":"lf03nQq6eT"},{"type":"text","value":".\nFinally, combine the two lists of listeners just so that your Sphinx application’s state matches what has actually happened (I have no idea if this is actually needed).","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"JuQQFAvRIk"}],"key":"gGawRrvhDW"},{"type":"code","lang":"python","value":"# This prepends the list\n# ref: https://stackoverflow.com/questions/19736058/can-i-extend-list-in-python-with-prepend-elements-instead-of-append\napp.events.listeners[\"config-inited\"][:0] = old_listeners ","position":{"start":{"line":84,"column":1},"end":{"line":88,"column":1}},"key":"GHIheOjCQH"}],"key":"pCfIlIHipC"}],"key":"fbVThMIkfe"},{"type":"paragraph","position":{"start":{"line":90,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"text","value":"Now you can let the Sphinx build move forward as normal.\nYou will have manually emitted the ","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"OyT6PmiDMN"},{"type":"inlineCode","value":"config-inited","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"V44obxeF9A"},{"type":"text","value":" event for your new extensions, and they’ll be picked up for any future events that happen.","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"STOYisN50N"}],"key":"O2ez9KMEIH"},{"type":"heading","depth":2,"position":{"start":{"line":93,"column":1},"end":{"line":93,"column":1}},"children":[{"type":"text","value":"Addendum: you could also make your theme an extension","position":{"start":{"line":93,"column":1},"end":{"line":93,"column":1}},"key":"rMLcEBxqsZ"}],"identifier":"addendum-you-could-also-make-your-theme-an-extension","label":"Addendum: you could also make your theme an extension","html_id":"addendum-you-could-also-make-your-theme-an-extension","implicit":true,"key":"Pb1GugDPLo"},{"type":"paragraph","position":{"start":{"line":95,"column":1},"end":{"line":96,"column":1}},"children":[{"type":"text","value":"If you ","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"key":"IzYWXwS6GQ"},{"type":"emphasis","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"children":[{"type":"text","value":"really","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"key":"M0bt5D5dNh"}],"key":"ZZGGaMY7Ev"},{"type":"text","value":" don’t want to do the hacky steps above, another option is to ask users to add your theme as an ","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"key":"KCU0CRNrML"},{"type":"emphasis","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"children":[{"type":"text","value":"extension","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"key":"pV7ztwhOO0"}],"key":"WbevUHFI6N"},{"type":"text","value":" as well as a theme.\nFor example:","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"key":"tWO5qqOUnB"}],"key":"uM7y3L8GyU"},{"type":"code","lang":"python","value":"extensions = [\"my_theme\"]\nhtml_theme = \"my_theme\"","position":{"start":{"line":98,"column":1},"end":{"line":101,"column":1}},"key":"QzsPZ0MJkm"},{"type":"paragraph","position":{"start":{"line":103,"column":1},"end":{"line":104,"column":1}},"children":[{"type":"text","value":"However, I’ve found that this usually confuses people and is pretty clunky from a UX perspective.\nI’d much rather try to handle the complexity under the hood.","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"Sf1fZkvdfS"}],"key":"NiAifKTbhz"}],"key":"IT0Xa3Zvr8"}],"key":"gBbDgIw9Vm"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"A Sphinx directive for social media embeds","url":"/blog/2023/social-directive","group":"2023"},"next":{"title":"Ask Twitter: Why don’t academic researchers use cloud services?","url":"/blog/2022/cloud-services-academia","group":"2022"}}},"domain":"http://localhost:3000"}