{"version":2,"kind":"Article","sha256":"256bdd041356e9b8f0e1b3cb6f57dbf0a09875f4dcf8302937ad88d227549d3e","slug":"blog.2022.precommit-autoupdate","location":"/blog/2022/precommit-autoupdate.md","dependencies":[],"frontmatter":{"title":"Automatically update pre-commit hook versions","tags":["python","git"],"date":"2022-12-03","content_includes_title":false,"authors":[{"id":"chris","nameParsed":{"literal":"Chris Holdgraf","given":"Chris","family":"Holdgraf"},"name":"Chris Holdgraf","orcid":"0000-0002-2391-0678","affiliations":["affiliations-myst-generated-uid-0","affiliations-myst-generated-uid-1"],"url":"https://chrisholdgraf.com","github":"choldgraf","twitter":"choldgraf"}],"github":"https://github.com/choldgraf/choldgraf.github.io","affiliations":[{"name":"2i2c","url":"https://2i2c.org","id":"affiliations-myst-generated-uid-0"},{"name":"Project Jupyter","url":"https://jupyter.org","id":"affiliations-myst-generated-uid-1"}],"abbreviations":{"LF":"The Linux Foundation","JF":"The Jupyter Foundation","JEC":"Jupyter Executive Council","JFB":"The Jupyter Foundation Board","SSC":"Software Steering Council","OSPO":"Open Source Program Office"},"numbering":{"title":{"offset":2}},"source_url":"https://github.com/choldgraf/choldgraf.github.io/blob/main/blog/2022/precommit-autoupdate.md","edit_url":"https://github.com/choldgraf/choldgraf.github.io/edit/main/blog/2022/precommit-autoupdate.md","exports":[{"format":"md","filename":"precommit-autoupdate.md","url":"/build/precommit-autoupdate-89d05430e82f82d070fa9ea533483e1e.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"I figured out a way to automatically update all of the git ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"NLOcV68a3d"},{"type":"inlineCode","value":"pre-commit","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"akL6517a8B"},{"type":"text","value":" hook versions at once!","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"OyXRXxBlcb"}],"key":"mfTbHvpgUA"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"link","url":"https://pre-commit.com/","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"inlineCode","value":"pre-commit","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"THskZm5zyV"}],"urlSource":"https://pre-commit.com/","key":"JVZxqr0KUG"},{"type":"text","value":" is a useful command line tool for running simple commands before every ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"uNaQiVK3SF"},{"type":"inlineCode","value":"git","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"wQ3xGqXqcS"},{"type":"text","value":" commit.\nI use it to enforce things like ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"poBKJ8Cyam"},{"type":"link","url":"https://flake8.pycqa.org/","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"inlineCode","value":"flake8","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"bUI20gQtkX"}],"urlSource":"https://flake8.pycqa.org/","key":"ZHqbV2hKlU"},{"type":"text","value":" and ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"E5RXW9qMUv"},{"type":"link","url":"https://github.com/psf/black","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"inlineCode","value":"black","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"GeAf364SCt"}],"urlSource":"https://github.com/psf/black","error":true,"key":"UK0HjCPckA"},{"type":"text","value":" in many of my projects.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"LAayVfKIa8"}],"key":"WRbGZC5YZf"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"However, I find it really annoying to keep manually updating my ","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"F62JHuuAbF"},{"type":"inlineCode","value":"pre-commit","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"cozBdf98Sh"},{"type":"text","value":" hooks with new versions, particularly because ","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"fUkR583bUI"},{"type":"inlineCode","value":"pre-commit","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"o7j2CHUcSp"},{"type":"text","value":" doesn’t let you specify wild-cards.","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"BbL62oB4ux"}],"key":"oIAWxZ3Up5"},{"type":"paragraph","position":{"start":{"line":18,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Fortunately, I recently came across ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"VE0Qp4oxMm"},{"type":"link","url":"https://pre-commit.com/#updating-hooks-automatically","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"the ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"zxPSScN5xs"},{"type":"inlineCode","value":"pre-commit autoupdate","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"jawIsVCD24"},{"type":"text","value":" documentation","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"tDNccTctAs"}],"urlSource":"https://pre-commit.com/#updating-hooks-automatically","key":"bZdq7mqhC8"},{"type":"text","value":".\nThis lets you automatically update to the latest released versions of all-precommit hooks.\nSimply run:","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"PuyQbhvHRx"}],"key":"FsJcdqJ7mo"},{"type":"code","lang":"bash","value":"pre-commit autoupdate","position":{"start":{"line":22,"column":1},"end":{"line":24,"column":1}},"key":"CAKBU8WOtI"},{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"And it will update your ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"L8EBBb85B1"},{"type":"inlineCode","value":".pre-commit-config.yaml","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"CkG859LpH3"},{"type":"text","value":" file with the latest versions.\nThis feels like the easiest way to keep these configurations updated, at least until ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"whYe4AH9KQ"},{"type":"link","url":"https://github.com/dependabot/dependabot-core/issues/1524","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"GitHub adds ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"vbs6g4fOEo"},{"type":"inlineCode","value":"dependabot","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"DPHsFmw7MY"},{"type":"text","value":" support for ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"esRNoAssb3"},{"type":"inlineCode","value":"pre-commit","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"GlNOa4fm7P"}],"urlSource":"https://github.com/dependabot/dependabot-core/issues/1524","data":{"kind":"issue","org":"dependabot","repo":"dependabot-core","issue_number":"1524"},"internal":false,"protocol":"github","key":"bKlemrmsO9"},{"type":"text","value":".","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"tylhqX6ItD"}],"key":"W7Bb4fqt7E"},{"type":"heading","depth":2,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Automate the above with ","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"HkFjO9LW92"},{"type":"inlineCode","value":"pre-commit.ci","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"rGZYWRmWri"}],"identifier":"automate-the-above-with-pre-commit-ci","label":"Automate the above with pre-commit.ci","html_id":"automate-the-above-with-pre-commit-ci","implicit":true,"key":"OkA9zFqgev"},{"type":"paragraph","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"strong","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Update","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"a7wJ4u5tvt"}],"key":"OOaTcRo7Dr"},{"type":"text","value":": A few folks mentioned that you can actually ","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"ZC5BpCxLPp"},{"type":"strong","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"automate this whole process","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"MdfePeRuxM"}],"key":"ZwQvjYYSs6"},{"type":"text","value":" by using ","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"V1l5Q7wu2H"},{"type":"link","url":"https://pre-commit.ci/","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"pre-commit.ci","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"iLDhAd6XAj"}],"urlSource":"https://pre-commit.ci/","key":"bUKHEsrN3k"},{"type":"text","value":", a service for using ","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"OS748DfQcj"},{"type":"inlineCode","value":"pre-commit","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"WD9xC7z6Vm"},{"type":"text","value":"’s functionality with automated jobs.","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"bZsZr4004Z"}],"key":"X6FmdFuxKl"},{"type":"paragraph","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"That service will both automatically run ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"JOAuBusymx"},{"type":"inlineCode","value":"pre-commit","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"GUj4x2jeZm"},{"type":"text","value":" on your Pull Requests, and will also update your ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"OPIid7nk5P"},{"type":"inlineCode","value":"pre-commit","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"H7wFfnerV6"},{"type":"text","value":" dependencies on the fly.","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"mkmBrQO4qv"}],"key":"ZKLAYbGiNu"}],"key":"TX9jMIGD8J"}],"key":"tLqxe4kEe5"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Fix phantom GitHub workflows in your ci-cd with protected branch rules","url":"/blog/2022/phantom-workflows-pull-requests","group":"2022"},"next":{"title":"subprocess.run can execute shell commands directly","url":"/blog/2022/shell-split","group":"2022"}}},"domain":"http://localhost:3000"}