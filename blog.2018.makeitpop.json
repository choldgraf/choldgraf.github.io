{"version":2,"kind":"Notebook","sha256":"049f322601b7779d8a8ca9fcecba33bd166587f4c74aed3e0aea143801d3c78c","slug":"blog.2018.makeitpop","location":"/blog/2018/makeitpop.ipynb","dependencies":[],"frontmatter":{"title":"Introducing makeitpop, a tool to perceptually warp your data!\"","content_includes_title":true,"tags":["python colormaps"],"date":"2018-06-04","kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"authors":[{"id":"chris","nameParsed":{"literal":"Chris Holdgraf","given":"Chris","family":"Holdgraf"},"name":"Chris Holdgraf","orcid":"0000-0002-2391-0678","affiliations":["affiliations-myst-generated-uid-0","affiliations-myst-generated-uid-1"],"url":"https://chrisholdgraf.com","github":"choldgraf","twitter":"choldgraf"}],"github":"https://github.com/choldgraf/choldgraf.github.io","affiliations":[{"name":"2i2c","url":"https://2i2c.org","id":"affiliations-myst-generated-uid-0"},{"name":"Project Jupyter","url":"https://jupyter.org","id":"affiliations-myst-generated-uid-1"}],"abbreviations":{"LF":"The Linux Foundation","JF":"The Jupyter Foundation","JEC":"Jupyter Executive Council","JFB":"The Jupyter Foundation Board","SSC":"Software Steering Council","OSPO":"Open Source Program Office"},"numbering":{"title":{"offset":2}},"edit_url":"https://github.com/choldgraf/choldgraf.github.io/blob/main/blog/2018/makeitpop.ipynb","exports":[{"format":"ipynb","filename":"makeitpop.ipynb","url":"/build/makeitpop-7c7ffb3936a54d535a8a31018f4057f3.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-code","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nfrom makeitpop import makeitpop, update_derivatives, cmaps\nimport seaborn as sns\nsns.set(font_scale=2, style='white')\n\n# Get the perceptual derivatives we use for popping so we can visualize\nderivatives, derivatives_scaled = update_derivatives(cmaps)","visibility":"show","key":"CT9Li3E1uU"},{"type":"output","id":"wVY3XLU4WT7D6ekwAtJrL","data":[],"visibility":"show","key":"tSpEB5tUqF"}],"visibility":"remove","key":"hEcm9Dubsh"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uA9wWoqDqO"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"category: til\ndate: ‘2018-06-04’\nfeatured_image: 3\nkernelspec:\ndisplay_name: Python 3 (ipykernel)\nlanguage: python\nname: python3\nlanguage_info:\ncodemirror_mode:\nname: ipython\nversion: 3\nfile_extension: .py\nmimetype: text/x-python\nname: python\nnbconvert_exporter: python\npygments_lexer: ipython3\nversion: 3.9.7\nredirect: makeitpop-intro\ntags:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"uvI6ObbyHN"}],"key":"pho4Tyz69x"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":21,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"python colormaps\ntitle: Introducing ","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"qgF0YFD5yy"},{"type":"emphasis","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"makeitpop","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"Qcx7LHfmUM"}],"key":"XrHhgC3nkZ"},{"type":"text","value":", a tool to perceptually warp your data!","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"ZRYdoiuEmG"}],"key":"fLAviboiwz"}],"key":"Bpzio1g72J"},{"type":"thematicBreak","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"ab6d6OkaeY"},{"type":"heading","depth":1,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"Introducing ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"AdA9IU7Kwf"},{"type":"emphasis","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"makeitpop","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"WlIry3E2qB"}],"key":"mEz1WkNGQs"},{"type":"text","value":", a tool to perceptually warp your data!\"","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"uvkMkgUjDH"}],"identifier":"introducing-makeitpop-a-tool-to-perceptually-warp-your-data","label":"Introducing makeitpop, a tool to perceptually warp your data!\"","html_id":"introducing-makeitpop-a-tool-to-perceptually-warp-your-data","implicit":true,"key":"EM4f9EvyEI"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"yPWQ0Rqbjy"}],"key":"Ak6D3o3iUZ"},{"type":"paragraph","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"It should go without saying, but ","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"ldEdRkUkOE"},{"type":"strong","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"you should never do the stuff that you’re about to read about here","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"yb2hDl60Md"}],"key":"ExCtNofRTf"},{"type":"text","value":". Data is meant to speak for itself, and our visualizations should accurately reflect the data above all else.*","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"FkAJuyp4OA"}],"key":"AV7DA4qUNR"}],"key":"ZvmisYH7G5"},{"type":"paragraph","position":{"start":{"line":31,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"When I was in graduate school, I tended to get on my soapbox and tell everybody\nwhy they should ","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"S4p07I5DnE"},{"type":"link","url":"http://jakevdp.github.io/blog/2014/10/16/how-bad-is-your-colormap/","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"stop using Jet","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"WJDYiTdNac"}],"urlSource":"http://jakevdp.github.io/blog/2014/10/16/how-bad-is-your-colormap/","key":"lc3Bo5ngaf"},{"type":"text","value":"\nand adopt a “perceptually-flat” colormap like ","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"sRAw0g5k0j"},{"type":"link","url":"https://bids.github.io/colormap/","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"viridis, magma, or inferno","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"sEe1DWsD7y"}],"urlSource":"https://bids.github.io/colormap/","key":"IH5vJeaxAP"},{"type":"text","value":".","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"h4UsLZrmds"}],"key":"DlVinmCXKH"},{"type":"paragraph","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"Surprisingly (ok, maybe not so surprisingly) I got a lot of pushback from people. Folks would say ","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"dK3R0mEuek"},{"type":"emphasis","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"“But I like ","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"uXsCIppfMq"},{"type":"strong","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"jet","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"XMvZvshofH"}],"key":"hbHvpaBNW7"},{"type":"text","value":", it really highlights my data, it makes the images ‘pop’ more effectively than viridis!”","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"zabnNctMZa"}],"key":"JYhRTgy8UM"},{"type":"text","value":".","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"eZp24vqHMy"}],"key":"zrAUeVKlWb"},{"type":"paragraph","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"Unfortunately it turns out that when a colormap “makes your data pop”, it really just means “","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"uYibtKMoIt"},{"type":"link","url":"https://bids.github.io/colormap/","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"warps your perception of the visualized data so that you see non-linearities when there are none","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"MxtkvwNNSp"}],"urlSource":"https://bids.github.io/colormap/","key":"F7LGD2iJST"},{"type":"text","value":"”. AKA, a colormap like Jet actually ","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"LnyCwwX7ds"},{"type":"emphasis","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"mis-represents","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"jEDOUWl1gZ"}],"key":"bs5dcL17WX"},{"type":"text","value":" the data.","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"qI7NLKlRSE"}],"key":"yIXH63Yd9D"},{"type":"paragraph","position":{"start":{"line":39,"column":1},"end":{"line":40,"column":1}},"children":[{"type":"text","value":"But what does this really mean? It’s difficult to talk and think about coor - especially when it comes to relating color with objective relationships\nbetween data. Rather than talking about colormaps in the abstract, what if we could ","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"SY5WtPJsn3"},{"type":"emphasis","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"text","value":"visualize","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"s55b4aNc25"}],"key":"SuoKifYH7P"},{"type":"text","value":" the warping that is performed by colormaps like Jet?","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"wOwPJzGC1a"}],"key":"taFa60WSmZ"},{"type":"paragraph","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"text","value":"In this post I’ll show that this is possible! Introducing ","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"eEsxJddUt8"},{"type":"strong","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"inlineCode","value":"makeitpop","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"jSQt2loICf"}],"key":"xC9Ps4TxXZ"},{"type":"text","value":".","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"uzLNOammAP"}],"key":"wC9nFwj6TO"},{"type":"heading","depth":2,"position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"text","value":"What does ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"snWSGY57U2"},{"type":"emphasis","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"text","value":"makeitpop","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"Ihu8BhsWDr"}],"key":"nRRK7uzoPG"},{"type":"text","value":" do?","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"OjHo0GNZAV"}],"identifier":"what-does-makeitpop-do","label":"What does makeitpop do?","html_id":"what-does-makeitpop-do","implicit":true,"key":"RsyHdpsD5h"},{"type":"paragraph","position":{"start":{"line":47,"column":1},"end":{"line":49,"column":1}},"children":[{"type":"text","value":"Makeitpop lets you apply the same perceptual warping that would ","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"ZXRUCajgUB"},{"type":"emphasis","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"text","value":"normally","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"FpHvkLX4Zz"}],"key":"hzkR0cuxAN"},{"type":"text","value":" be accomplished\nwith a colormap like Jet, but applies this warping to ","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"S84oUkbGLa"},{"type":"emphasis","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"text","value":"the data itself","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"wRbCeJI3dZ"}],"key":"Z04XMHs4i0"},{"type":"text","value":"! This lets us\nget the same effect with a nice linear colormap like ","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"ffk82ph1SF"},{"type":"inlineCode","value":"viridis","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"jvaTX3r9O9"},{"type":"text","value":"!","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"UBQPXEKbN5"}],"key":"ogDQrfyUPQ"},{"type":"paragraph","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"children":[{"type":"text","value":"For example, let’s take a look at the ","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"kSGeXaZl8R"},{"type":"link","url":"https://matplotlib.org/gallery/images_contours_and_fields/image_demo.html#sphx-glr-gallery-images-contours-and-fields-image-demo-py","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"children":[{"type":"text","value":"image demo in matplotlib","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"D8ohKIV4yI"}],"urlSource":"https://matplotlib.org/gallery/images_contours_and_fields/image_demo.html#sphx-glr-gallery-images-contours-and-fields-image-demo-py","key":"WuQKCdjfaL"},{"type":"text","value":". In it, we create two blobs that are meant to be visualized as an image. We’ll visualize this with our old friend viridis.","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"xb7o54XPt5"}],"key":"iGWfQ9IGCY"}],"visibility":"show","key":"OLXkE3JrTp"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Create a mesh grid with two gaussian blobs\ndelta = 0.025\nx = y = np.arange(-3.0, 3.0, delta)\nX, Y = np.meshgrid(x, y)\nZ1 = np.exp(-X**2 - Y**2)\nZ2 = np.exp(-(X - 1)**2 - (Y - 1)**2)\nZ = (Z1 - Z2) * 2\n\n# Visualize it\nfig, ax = plt.subplots(figsize=(5, 5))\nax.imshow(Z, cmap=plt.cm.viridis,\n          origin='lower', extent=[-3, 3, -3, 3],\n          vmax=abs(Z).max(), vmin=-abs(Z).max())\nax.set(title=\"Original data\\nlinear colormap\")\nplt.tight_layout()","key":"G1BQQxq2Ok"},{"type":"output","id":"TyQ6qwuRst5CPh1bdfYhK","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"d73bb4a4e3d34ff442b6221bcbab289a","path":"/build/d73bb4a4e3d34ff442b6221bcbab289a.png"},"text/plain":{"content":"<Figure size 360x360 with 1 Axes>","content_type":"text/plain"}}}],"key":"b80hlts0hM"}],"key":"fND27Wp8Uh"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Hmmm, not too bad...but it’s a bit ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SMKUb4DtY0"},{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"boring","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"a1TJeGbiTC"}],"key":"huBqAQdCNK"},{"type":"text","value":", no? Why can’t we make it snazzier? I know, let’s use Jet!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"G8R9pT1A5c"}],"key":"dkUyOUGBdj"}],"key":"aVLZ4W7ZjI"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Visualize our data\nfig, ax = plt.subplots(figsize=(5, 5))\nax.imshow(Z, cmap=plt.cm.jet,\n          origin='lower', extent=[-3, 3, -3, 3],\n          vmax=abs(Z).max(), vmin=-abs(Z).max())\nax.set(title=\"Original data\\nnon-linear colormap\")\nplt.tight_layout()","visibility":"hide","key":"SHZFotUgUt"},{"type":"output","id":"WCl7ZpQqMEbj6oI0hT-DO","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"1a8f3e638a5b938f6fa8524abd74732e","path":"/build/1a8f3e638a5b938f6fa8524abd74732e.png"},"text/plain":{"content":"<Figure size 360x360 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"cXeaemhwIY"}],"visibility":"show","key":"hmD2DciK1f"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Oooh now that’s what I’m talking about. You can clearly see two peaks of significant results\nat the center of each circle. Truly this is fit for publishing in ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YnWL7uZa6y"},{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Nature","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RVqw9OQXOr"}],"key":"hy5kIpVWjy"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CJdf6GjkTy"}],"key":"XF5WCKlNAN"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"But...as you all know, this data only ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"grJe1FTjOd"},{"type":"emphasis","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"looks","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"fqPQUK0Aeb"}],"key":"hLDZ3GRD0y"},{"type":"text","value":" better because we’ve used a colormap that distorts\nour perception of the underlying data.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"txiODMYnFw"}],"key":"yfQlggZ9MK"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Let’s illustrate this by ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"xe1SnEhnhU"},{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"making it pop","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"gtufNppA6T"}],"key":"ESQwnU4DQQ"},{"type":"text","value":"!","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"LWPs3C7Kik"}],"key":"pl1ZCSzP0L"}],"key":"InpqnJbnz5"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Pop the data!\nZ_popped = makeitpop(Z, 'jet', scaling_factor=20)\n\n# Visualize the warped data\nfig, ax = plt.subplots(figsize=(5, 5))\nax.imshow(Z_popped, cmap=plt.cm.viridis,\n          origin='lower', extent=[-3, 3, -3, 3],\n          vmax=abs(Z).max(), vmin=-abs(Z).max())\nax.set(title=\"Warped data\\nlinear colormap\")\nplt.tight_layout()","visibility":"hide","key":"iHCVVH1DLM"},{"type":"output","id":"g43b28YifT6iLk5mV40Up","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"eac18d15b86dcd0d197fe1c4e0236370","path":"/build/eac18d15b86dcd0d197fe1c4e0236370.png"},"text/plain":{"content":"<Figure size 360x360 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"ef5VRKmBgv"}],"visibility":"show","key":"RtRKWBQ1yJ"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Excellent! We’re using a nice, perceptually-flat colormap like viridis, but we’ve attained\nan effect similar to the one that ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OQIUYB65oo"},{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Jet","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dCs8Gv1gTP"}],"key":"XvkAxHxhjy"},{"type":"text","value":" would have created!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"i8e3QCFXfc"}],"key":"idPgkUWnqe"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Now let’s visualize all three next to each other so that we can see the total effect:","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"ZScDC6nXP3"}],"key":"Kp27QJItbl"}],"key":"h70wBw6XXH"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig, axs = plt.subplots(1, 3, figsize=(15, 5), sharey=True)\n\nkws_img = dict(extent=[-3, 3, -3, 3], origin='lower',\n               vmax=abs(Z).max(), vmin=-abs(Z).max())\n\n# Raw data with a perceptually-flat colormap\naxs[0].imshow(Z, cmap=plt.cm.viridis, **kws_img)\naxs[0].set(title=\"Original data\\nlinear colormap\")\n\n# Raw data with a perceptually-distorted colormap\naxs[1].imshow(Z, cmap=plt.cm.jet, **kws_img)\naxs[1].set(title=\"Original data\\nnon-linear colormap\")\n\n# Distorted data with a perceptually-flat colormap\naxs[2].imshow(Z_popped, cmap=plt.cm.viridis, **kws_img)\naxs[2].set(title=\"Warped data\\nlinear colormap\")\n\nplt.tight_layout()","visibility":"hide","key":"FbtnJDYCOy"},{"type":"output","id":"zaWATd6Gx-bSTcVNkUykh","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"ca23076a3b132a79ae4781726189e7a8","path":"/build/ca23076a3b132a79ae4781726189e7a8.png"},"text/plain":{"content":"<Figure size 1080x360 with 3 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"cF4vcB66ly"}],"visibility":"show","key":"eE7ufnr7H6"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s see it in the real world","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dF0HGGDbe8"}],"identifier":"lets-see-it-in-the-real-world","label":"Let’s see it in the real world","html_id":"lets-see-it-in-the-real-world","implicit":true,"key":"yV2iTamdos"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Thus far I’ve been using toy examples to illustrate how makeitpop works. Let’s see how\nthings look on an actual dataset collected in the wild.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Biz0O2VgWC"}],"key":"MudPG8ix1v"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"For this, we’ll use the excellent ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"UKtRssmQ0p"},{"type":"link","url":"https://nilearn.github.io/","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"nilearn","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"K3QqNYpnkx"}],"urlSource":"https://nilearn.github.io/","key":"qZeomO0uYM"},{"type":"text","value":" package. This has a\nfew datasets we can download to demonstrate our point. First we’ll load the data and prep it:","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"kwP8FVXlFq"}],"key":"iRCLifypS0"}],"key":"W0QtHvoXw6"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from nilearn import datasets\nfrom nilearn import plotting\nimport nibabel as nb\n\n# Load a sample dataset\ntmap_filenames = datasets.fetch_localizer_button_task()['tmaps']\ntmap_filename = tmap_filenames[0]\n\n# Threshold our data for viz\nbrain = nb.load(tmap_filename)\nbrain_data = brain.get_fdata()\nmask = np.logical_or(brain_data < -.01, brain_data > .01)","key":"p0vz3w2Ja8"},{"type":"output","id":"QLimR8QRNZp6ZX4_LZ0EN","data":[{"name":"stderr","output_type":"stream","text":"/home/choldgraf/anaconda/envs/dev/lib/python3.6/site-packages/h5py/__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\n  from ._conv import register_converters as _register_converters\n/home/choldgraf/anaconda/envs/dev/lib/python3.6/site-packages/numpy/lib/npyio.py:2266: VisibleDeprecationWarning: Reading unicode strings without specifying the encoding argument is deprecated. Set the encoding, use None for the system default.\n  output = genfromtxt(fname, **kwargs)\n"}],"key":"bmXDDYZFLE"}],"key":"C1d20b20mx"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Next, we’ll create a “popped” version of the data, where we apply the non-linear warping\nproperties of ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"I17vqaM6ra"},{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Jet","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CWKBjvh3L3"}],"key":"jG5NdZX5lO"},{"type":"text","value":" to our data, so that we can visualize the same effect in linear space.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rg3H40rmf0"}],"key":"lg2hFv516r"}],"key":"ieHu1vLCct"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Create a copy of the data, then pop it\n# We'll use a scaling factor to highlight the effect\nbrain_popped = brain_data.copy()\nbrain_popped[mask] = makeitpop(brain_popped[mask], colormap='jet', scaling_factor=75)\nbrain_popped = nb.Nifti1Image(brain_popped, brain.affine)","key":"RsOFOkS3ft"},{"type":"output","id":"4Pa618ZDt3xtufKM4Mn_b","data":[],"key":"heUEvjEaSM"}],"key":"NABrQq6L3p"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now, I’ll plot the results for each.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gJgDdR41Jw"}],"key":"IgocifzyBT"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"First, we’ll see the raw data on a linear colormap. This is the way we’d display the data to show the true underlying relationships between datapoints.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"z6CgR8FAHI"}],"key":"CvaGbhp2F0"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Next, we’ll show the same data plotted with ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"vk2weVoaiN"},{"type":"emphasis","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Jet","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"IUqXMo5bvU"}],"key":"udn2uBRacd"},{"type":"text","value":". See how many more significant voxels there are! (/s)","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"oMeDSTMu7x"}],"key":"gzrPYQjomu"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Finally, we’ll plot the “popped” data using a linear colormap (viridis). This accurately represents the underlying data, but the data ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"SG0CFx4z7l"},{"type":"emphasis","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"itself","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ijT3WcvLfo"}],"key":"HOnGMXSqEV"},{"type":"text","value":" has been distorted!","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"mM8NTKoI6w"}],"key":"xZhYJlLBHE"}],"key":"fdGIvaCiBY"}],"key":"yErCBcJ2wJ"},{"type":"block","kind":"notebook-code","data":{"scrolled":true,"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"for i_brain, name in [(brain, 'original'), (brain, 'original (jet)'), (brain_popped, 'popped brain')]:\n    cmap = 'jet' if name == 'original (jet)' else 'viridis'\n    plotting.plot_stat_map(i_brain, cmap=cmap, vmax=7, display_mode='x',\n                           title=name, cut_coords=np.linspace(20, 50, 5, dtype=int))","visibility":"hide","key":"ev4ESIRo2d"},{"type":"output","id":"dPxQ3rsxVg-vsEAATlv_S","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"f2561b8922b3ccbb76804960ce5b33fc","path":"/build/f2561b8922b3ccbb76804960ce5b33fc.png"},"text/plain":{"content":"<Figure size 986.4x165.6 with 7 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"746efad652ea060fa2450b08c8251b6b","path":"/build/746efad652ea060fa2450b08c8251b6b.png"},"text/plain":{"content":"<Figure size 986.4x165.6 with 7 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"d24c4c5144bc23cb3127b045acffae31","path":"/build/d24c4c5144bc23cb3127b045acffae31.png"},"text/plain":{"content":"<Figure size 986.4x165.6 with 7 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"Bo3Aui2FzL"}],"visibility":"show","key":"uwjKyHegeP"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"As you can see, different kinds of results show up when your perception of the data is affected by the colormap.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XYBfnROk68"}],"key":"IQ0CRkP5Qy"}],"key":"R6cvZWO4SF"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"How does this work?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"K6shJm8rg4"}],"identifier":"how-does-this-work","label":"How does this work?","html_id":"how-does-this-work","implicit":true,"key":"JTCpfFCVwO"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"OK, so what is the black voodoo magic that makes it possible to “make your data pop”?","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YmM1tWRkhG"}],"key":"Z5nR4dxFfh"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"It all comes down to your visual system. I won’t go into a ton of detail\nbecause Nathaniel Smith and Stefan van der Walt ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"jixsu26OeW"},{"type":"link","url":"https://www.youtube.com/watch?v=xAoljeRJ3lU","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"already gave a great talk about this","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"kL6gwjPODm"}],"urlSource":"https://www.youtube.com/watch?v=xAoljeRJ3lU","key":"Ab5foYrlFT"},{"type":"text","value":", however here is a lay-person’s take:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"GWPHvvC9Lo"}],"key":"bgiTW30dL2"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"When we use color to represent data, we are mapping a range of data values onto\na range of color values. Usually this means defining a min / max for our data, then mapping data\nvalues linearly from 0 to 1, and finally mapping those values onto RGB values in a colormap.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"jD1HUlCdqB"}],"key":"FN9se87BCc"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Implicit in this process is the idea that stepping across our space in the ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"uSCb7IpwJ9"},{"type":"emphasis","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"data","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"Ynf5xgJ9Oa"}],"key":"oUTp3YKIcH"},{"type":"text","value":" equates to\nan equal step in our ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"wdW1DyzpnX"},{"type":"emphasis","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"perception","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"IYsCamWc72"}],"key":"kg1iq9CoIA"},{"type":"text","value":" of the color that is then chosen. We want a one-to-one mapping between the two.","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"NRkNNQiAMQ"}],"key":"STqShDWKXF"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Unfortunately, this isn’t how our visual system works.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"eFuQOf7CM5"}],"key":"ErEElD5LmA"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"In reality, our brains do all kinds of strange things when interpreting color. They are biased to detect changes between particular kinds of colors, and biased to miss the transition between others.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"CCcyxqvp5s"}],"key":"mi7j7T9ld5"},{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Jet","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"Wk6GKvDaBZ"}],"key":"pmJUs6GarC"},{"type":"text","value":" uses a range of colors that highlight this fact. It transitions through colors such that ","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"OAq0nEHo2c"},{"type":"emphasis","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"linear","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"gNDfDhApAx"}],"key":"LJZuq0oguu"},{"type":"text","value":" changes in our data are perceived as ","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"lwjSkf9Ue0"},{"type":"emphasis","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"nonlinear","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"q2CImG9xCu"}],"key":"ALNNhYfLen"},{"type":"text","value":" changes when we look at the visualization. That’s what makes the data “pop”.","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"lhkbfF4eBk"}],"key":"kUiUriw1bC"},{"type":"heading","depth":2,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Perceptual “delta” curves","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"iuhgSwAjZW"}],"identifier":"perceptual-delta-curves","label":"Perceptual “delta” curves","html_id":"perceptual-delta-curves","implicit":true,"key":"Ptgsk74xld"},{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"You can determine the extent to which a colormap “warps” your perception of the data by calculating the “perceptual deltas” as you move across the values of a colormap (e.g. as you move from 0 to 1, and their corresponding colors).","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"ikgNsfEM0D"}],"key":"yapXNvx5gQ"},{"type":"paragraph","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"These deltas essentially mean “how much is the ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"JSd9ewMQpg"},{"type":"emphasis","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"next","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"uFJQQ26vzh"}],"key":"cpZmI0X1Kl"},{"type":"text","value":" color in the colormap perceived as different from the ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"AvAa0OhINh"},{"type":"emphasis","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"current","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"ohGfG7aQ0y"}],"key":"asG2Z5vzga"},{"type":"text","value":" color?” If your colormap is perceptually flat, the delta will be the ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"lnqR4LNUSB"},{"type":"emphasis","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"same","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"nIF0p8hMrh"}],"key":"RMIQedtqOT"},{"type":"text","value":" no matter where you are on the range from 0 to 1.","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"Be0FHAL5th"}],"key":"BoJAgAip43"},{"type":"paragraph","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Let’s see what the deltas look like for ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"bB4AwVT0dv"},{"type":"emphasis","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Jet","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"QBRwJBpcZq"}],"key":"WLAQwAHcto"},{"type":"text","value":":","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"uNnKbczOWA"}],"key":"uXQVk5QXtR"}],"key":"dOhCKwW4Wu"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"def plot_colormap_deltas(deltas, cmap, ax=None):\n    if ax is None:\n        fig, ax = plt.subplots(figsize=(10, 5))\n    xrange = np.arange(len(derivatives))\n    sc = ax.scatter(xrange, deltas, c=xrange, vmin=xrange.min(), vmax=xrange.max(),\n                    cmap=plt.cm.get_cmap(cmap), s=20)\n    ax.plot(xrange, deltas, c='k', alpha=.1)\n    return ax\n\nax = plot_colormap_deltas(derivatives['jet'].values, 'jet')\nylim = ax.get_ylim()  # So we can compare with other colormaps\nax.set(title=\"Perceptual deltas with Jet\")","visibility":"hide","key":"kDK5kuVvA3"},{"type":"output","id":"qQzAFEhBiSoO-C-bYEhNh","data":[{"output_type":"execute_result","execution_count":9,"metadata":{},"data":{"text/plain":{"content":"[Text(0.5,1,'Perceptual deltas with Jet')]","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"44abc6d34cc21a06d04b6bd2b44ff8e4","path":"/build/44abc6d34cc21a06d04b6bd2b44ff8e4.png"},"text/plain":{"content":"<Figure size 720x360 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"Abc1nM5HAg"}],"visibility":"show","key":"QqydGCJe6Y"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Oops.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eVFs5nD3p2"}],"key":"N7VpAtOTfG"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"As you can see, Jet does ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"tVMvsKJ3g3"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"not","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"t6BvMfVZQa"}],"key":"rWgofPVG5e"},{"type":"text","value":" have a flat line for perceptual deltas. Each “jump” you see above is a moment where Jet is actually ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"dCwjJ79cSC"},{"type":"emphasis","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"mis-representing","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CXjjYXGn1W"}],"key":"ZGlIClgqJZ"},{"type":"text","value":" differences in the data. For shame, Jet.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vNx8xBLut2"}],"key":"J4N0l1pkYd"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Now let’s see what this looks like for viridis:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"awQczL5fEe"}],"key":"UGEOfdStKs"}],"key":"JiKt4uvIeh"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"ax = plot_colormap_deltas(derivatives['viridis'].values, 'viridis')\nax.set(ylim=ylim, title=\"Perceptual deltas with viridis\");","visibility":"hide","key":"aJrJoBUw4P"},{"type":"output","id":"-9vivxSrzmPHUF-dthD3N","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"5c7e41cb19cef6a2b5bd065dc62e9804","path":"/build/5c7e41cb19cef6a2b5bd065dc62e9804.png"},"text/plain":{"content":"<Figure size 720x360 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"CrUqvwpS6v"}],"visibility":"show","key":"x9kWSUTtW7"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Ahhh, sweet, sweet linear representation of data.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZvDSpR2qx8"}],"key":"LWR3cRqRuA"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"In case you’re curious, here are the “perceptual deltas” for several colormaps.\nIn this case, I’ve centered them and scaled each by the variance of the largest colormap,\nso that they are easier to compare.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"BE8Y6LGQlb"}],"key":"Q44ChCgjpr"}],"key":"vGuZtQnGtr"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig, ax = plt.subplots(figsize=(10, 5))\nfor cmap, deltas in derivatives_scaled.items():\n    if cmap == 'linear':\n        continue\n    ax = plot_colormap_deltas(deltas.values, cmap, ax=ax)\nax.set(title=\"Scaled perceptual deltas for a bunch of colormaps\");","visibility":"hide","key":"tr43oxiEc6"},{"type":"output","id":"pSrRWz_MYEyBCA8IQnqCO","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"9651655c35f231da7365f0d9e9495241","path":"/build/9651655c35f231da7365f0d9e9495241.png"},"text/plain":{"content":"<Figure size 720x360 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"sJxpShwdGp"}],"visibility":"show","key":"FnyGVZco4R"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can even warp 1-dimensional data!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rjOSDW43lO"}],"identifier":"we-can-even-warp-1-dimensional-data","label":"We can even warp 1-dimensional data!","html_id":"we-can-even-warp-1-dimensional-data","implicit":true,"key":"lQjEdEYm7k"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Let’s see how this principle affects our perception with a different kind of visual\nencoding. Now that we know these perceptual warping functions, we can get all the\ndata-warping properties of jet, but in one dimension!","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"XaeujbpJcz"}],"key":"nVTJwISqBv"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Here’s a line.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"n1by9hFZlk"}],"key":"Jeg8rjp2EN"}],"key":"sP1DsDQ4Yl"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig, ax = plt.subplots(figsize=(5, 5))\nx = np.linspace(0, 1, 100)\nax.plot(x, x, 'k-', lw=8, alpha=.4, label='True Data')\nax.set_title('Totally boring line.\\nNothing to see here.');","visibility":"hide","key":"thG2ac6tLF"},{"type":"output","id":"lobV2a8uZy-HVIuf9-GFm","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"1380332b4dc057cbb3dd647597b153d5","path":"/build/1380332b4dc057cbb3dd647597b153d5.png"},"text/plain":{"content":"<Figure size 360x360 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"IzEznyNu8q"}],"visibility":"show","key":"jJf0vwZwyC"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Ew. Boring.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FIJMa50Wrm"}],"key":"VkJwnHIU8r"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Now, let’s make it pop! We’ll loop through a few colormaps, applying its color\nwarping function to the y-axis of our line as we step through it.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"O4jeQnTuLr"}],"key":"YExjdEgQy7"}],"key":"GRAO3bRk2E"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"names = ['jet', 'viridis', 'rainbow', 'spring', 'hsv']\nfig, ax = plt.subplots(figsize=(10, 10))\n\nx = np.linspace(0, 1, 1000)\nax.plot(x, x, 'k-', lw=12, alpha=.4, label='True Data')\nfor nm in names:\n    ax.plot(x, makeitpop(x, colormap=nm, scaling_factor=40), label=nm, lw=4)\n    ax.legend(loc=(1.05, .6))\nax.set_title('Making data \"pop\" is fun!')","visibility":"hide","key":"FCe4dPT7Yz"},{"type":"output","id":"sZZ6153wnW3fBQJ0Nh5XY","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"2e7f7748b3803d63971d8eff9acaa07a","path":"/build/2e7f7748b3803d63971d8eff9acaa07a.png"},"text/plain":{"content":"<Figure size 720x720 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"azSn7qe82o"}],"visibility":"show","key":"ggkOs6H4oq"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"As you can see, data looks much more interesting when it’s been non-linearly warped!\nIt looks particularly striking when you see it on a 1-D plot. This is effectively\nwhat colormaps such as Jet are doing in 2 dimensions! We’re simply bringing the fun\nback to 1-D space.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zNyYL4Tgff"}],"key":"AvluipkUgM"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Let’s see how it looks on some scatterplots. We’ll plot the raw data in the background in grey,\nand the “popped” data in front in color. Notice how some colormaps distort the y-values more\nthan others.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"zmSUv8KvI5"}],"key":"XCkffgfrgn"}],"key":"slo2lfSt18"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"names = ['viridis', 'jet', 'rainbow', 'spring', 'hsv']\nfig, axs = plt.subplots(1, len(names), figsize=(20, 4), sharex=True, sharey=True)\nx = np.linspace(0, 1, 100)\ny = x + np.random.randn(len(x)) * .2\nfor name, ax in zip(names, axs):    \n    ax.scatter(x, y, c='k', s=80, alpha=.2)\n    ax.scatter(x, makeitpop(y, name, 40), c=y, s=40, alpha=.8, cmap=plt.get_cmap(name))\n    ax.set(title=name)\n","visibility":"hide","key":"AGaw594u8n"},{"type":"output","id":"eE1f8Hl7kMKSrncOCVfvj","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"1ef548abad8d00a0fd471a39dad0054e","path":"/build/1ef548abad8d00a0fd471a39dad0054e.png"},"text/plain":{"content":"<Figure size 1440x288 with 5 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"H1878x486U"}],"visibility":"show","key":"pSlMxL0G4Y"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"So what should we do?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"U9BsMYGnDG"}],"identifier":"so-what-should-we-do","label":"So what should we do?","html_id":"so-what-should-we-do","implicit":true,"key":"I4l25Rc5AX"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"The reason that I wrote this blog post (and made this silly package) is to illustrate what we’re really\ndoing when we use a colormap like ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"fFMsatJYZ1"},{"type":"emphasis","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Jet","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zNTuVhmiJS"}],"key":"LU96YvMaVw"},{"type":"text","value":", and to highlight the importance of using a perceptually-flat colormap.  Sure, we want to choose the visualization that best-makes our point,\nbut a colormap like Jet is ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QGBJdLdyfL"},{"type":"emphasis","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"actively mis-representing your data","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"g5fz12enbq"}],"key":"RJdbDnC9Hw"},{"type":"text","value":". You’d ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"i9dkPoguIb"},{"type":"emphasis","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"never","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qSNkj8S7Du"}],"key":"HP9e22GxCg"},{"type":"text","value":" consider changing the raw\ndata values so that an effect popped out, and you’d ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Afa4uHUtAa"},{"type":"emphasis","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"never","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"A3tfJvzjuK"}],"key":"oxvpCOIFtg"},{"type":"text","value":" alter the y-values of a scatterplot so that something shows up. Well, this is perceptually what you’re doing when you visualize 2-D data with Jet.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vMp1ux9Fja"}],"key":"D5qaRQVXb9"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Here are a few things to keep in mind moving forward:","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"yHm4GBmVpB"}],"key":"t6303pnWA1"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Don’t use Jet","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"jmiEI4NuOE"}],"key":"UyQ5kAiRXU"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"If you review a paper or are an editor for a journal, consider asking authors to use a perceptually flat colormap (this is usually just a matter of changing ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"hkObD4293H"},{"type":"inlineCode","value":"cmap='viridis'","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"QiD7rOF30f"},{"type":"text","value":"!)","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"KIOGwlg35o"}],"key":"XH2kNCM4s6"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Be aware of the effects that color has on the point you’re trying to make. Perceptual warping is\njust one of many potential issues with choosing the right color.","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"ribFNMgK86"}],"key":"dIvk1fM9Vu"}],"key":"a2KplD0Enc"},{"type":"heading","depth":2,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Wrapping up","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"NzZLcwzAyy"}],"identifier":"wrapping-up","label":"Wrapping up","html_id":"wrapping-up","implicit":true,"key":"yDthbdyrDv"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"I hope that this post has been a fun and slightly informative take on the nuances of colormaps, and the unintended effects that they might have.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"MMSlUahidp"}],"key":"ws9EuE6fFB"},{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"So, ","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"OnSgEB0Q04"},{"type":"inlineCode","value":"tl;dr","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"vW22ymNO1i"},{"type":"text","value":":","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"CbcmrGubAe"}],"key":"nJu46P6Bhk"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":21,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Jet (and many other colormaps) mis-represent your perception of the data","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"f0R3eYFiRH"}],"key":"xhQFYOj5hP"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Perceptually flat colormaps like Viridis, Magma, Inferno, or Parula minimize this effect","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"cmKUu3EOeS"}],"key":"tCSzy8y8op"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"You can calculate the ","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"KGbeGndez8"},{"type":"emphasis","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"extent","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"QDzRd1DaEv"}],"key":"VbvZOsZ70D"},{"type":"text","value":" to which this mis-representation happens as you move along the colormap","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"vZRNXgU8mD"}],"key":"pV9tPr6Wm1"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"We can then use this function to ","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"hOzCDejOJV"},{"type":"emphasis","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"distort","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"dCuepwMNG9"}],"key":"HxazMEcGaG"},{"type":"text","value":" data so that the data itself contains this mis-representation","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"QmqZWO6qRF"}],"key":"GOexfFzJKR"},{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"But doing so would be super unethical, so in the end ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"JVDpBvr8sL"},{"type":"strong","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"you should stop using jet and use a perceptually-flat colormap like viridis.","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"EtM0fgsYqo"}],"key":"ng7ou7dhIh"}],"key":"gOkY92OTcH"}],"key":"qh6dOrYHZO"},{"type":"paragraph","position":{"start":{"line":29,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"If you’d like to check out the ","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"OWMBlmlAzY"},{"type":"inlineCode","value":"makeitpop","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"vHGC2bVION"},{"type":"text","value":" package, see the ","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"hjYMDtavQY"},{"type":"link","url":"https://github.com/choldgraf/makeitpop","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"GitHub repo here","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"x0e9plp9bp"}],"urlSource":"https://github.com/choldgraf/makeitpop","error":true,"key":"jrJKqKfNks"},{"type":"text","value":". In addition, all of the examples in this post are runnable\non Binder! You can launch an interactive session with this code by clicking on the Binder button\nat the top of this page!","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"U5T3LVy9NH"}],"key":"smixwqWLg4"}],"key":"VF0c3an3DY"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Addendum: Ok but how does ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"M12XtXp9Kx"},{"type":"inlineCode","value":"makeitpop","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NogR6k00eM"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YD1oipzDnZ"},{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"actually","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hxZtGTgBts"}],"key":"TZnjanD9oN"},{"type":"text","value":" work?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gRASCskQ0O"}],"identifier":"addendum-ok-but-how-does-makeitpop-actually-work","label":"Addendum: Ok but how does makeitpop actually work?","html_id":"addendum-ok-but-how-does-makeitpop-actually-work","implicit":true,"key":"u6HaXKlVxr"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"In this section I’ll describe the (admittedly hacky) way that I’ve written ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wUcTBBEF2F"},{"type":"inlineCode","value":"makeitpop","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"KBc3GNtGDg"},{"type":"text","value":".\nAs I mentioned before, ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"cNxAqOJH00"},{"type":"link","url":"https://github.com/choldgraf/makeitpop","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"all the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ZebNJrtQbx"},{"type":"inlineCode","value":"makeitpop","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"g7Xdx6gsrO"},{"type":"text","value":" code is on GitHub","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"plWLco6zgb"}],"urlSource":"https://github.com/choldgraf/makeitpop","error":true,"key":"Fq0gc3SQC9"},{"type":"text","value":" and\nPull Requests are more than welcome to improve the process (I’m looking at you, “histogram matching” people!)","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"I9VP0Eywm9"}],"key":"fTCAzUGPKl"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Here’s what ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"DNqA853cWB"},{"type":"inlineCode","value":"makeitpop","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"FZQbMdG5Np"},{"type":"text","value":" does:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"H3LzcF2wYD"}],"key":"aoHMkdVc3V"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Collects a list of the “perceptual deltas”. These are calculated from the equations given in ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"HZinYuXadh"},{"type":"link","url":"https://github.com/matplotlib/viscm","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"inlineCode","value":"viscm","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"hlP6Xgekjx"}],"urlSource":"https://github.com/matplotlib/viscm","error":true,"key":"cikWKZCvjd"},{"type":"text","value":", which was released as a part of the original work that created ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"BtnuHBPK9E"},{"type":"inlineCode","value":"viridis","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"HOYHBCpSBY"},{"type":"text","value":".","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"n2qyvAs4E2"}],"key":"F3hIxUqIwJ"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Centers each colormap’s deltas at 0.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"sutYoLZH2f"}],"key":"KEjhYaTPJj"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Scales each colormap’s deltas by the ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"BmUySNFP2A"},{"type":"emphasis","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"largest variance","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"qZieDIw1bc"}],"key":"t2rsaFrl5c"},{"type":"text","value":" across all colormaps. This is to make sure that warping the data is done with the relative differences of each colormap in mind.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"M6Ah0UJUYb"}],"key":"bQhAtWtdA5"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"When ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"NVYMSYXj3m"},{"type":"inlineCode","value":"makeitpop","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"rJqVaO5SoY"},{"type":"text","value":" is called, the function then:","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"Ofk5job1cS"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":13,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Scales the input data linearly between 0 and 1","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"Z9OsA2VJms"}],"key":"vggwi8mVjM"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Calculates the point-by-point derivative for linearly spaced points between 0 and 1 (the derivative is the same for all points here).","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"eLeLje2Czz"}],"key":"B0K0yykniC"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Multiplies each derivative by the scaled perceptual deltas function, plus an extra scaling factor that accentuates the effect.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"BzjDxwF0eS"}],"key":"rfj3gAmabN"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Adds each value to the scaled input data.","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"bY8aSBUfBL"}],"key":"mzG0VQuCO7"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Un-scales the altered input data so that it has the same min/max as before.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"Ke2XBuIqjX"}],"key":"ZwypKviF3k"}],"key":"ao9gTAS6o4"}],"key":"JUjz4cljOQ"}],"key":"jDcjw6Rcym"},{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"There are plenty of ways you could do this more effectively (for example, by matching empirical CDFs and\nusing linear interpolation to map the delta function of one colormap onto the delta function for another\ncolormap). If you’d like to contribute or suggest something, feel free to do so! However, I’m just creating\nthis package to highlight an idea, and think this approach gets close enough with relatively little complexity.","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"UhR11NMnpU"}],"key":"K4Iga1T94m"}],"key":"JSFZtch7UI"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Some extras","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MaE44EpK5m"}],"identifier":"some-extras","label":"Some extras","html_id":"some-extras","implicit":true,"key":"iDtEHU8Hn2"}],"key":"h40n7GjTSh"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Here’s a viz that will let you visualize how different colormaps distort data. We’ll show a\ngradient of linearly-spaced values, both using a warping colormap such as “jet” and a linear\ncolormap like “vidiris”. Then, we’ll “pop” the data and re-visualize with viridis.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"m5fi8R0Kdz"}],"key":"cQCLOHsd2V"}],"key":"VvKriTwqYV"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Create a gradient of datapoints\ndata = np.linspace(0, 1, 256)\ndata = np.tile(data, [100, 1])\n\n# Pop the data\ncmap_warping = 'jet'\nscaling_factor = 50\ndata_popped = makeitpop(data, cmap_warping, scaling_factor)\n\n# Visualize\nfig, axs = plt.subplots(6, 1, figsize=(10, 15), sharex=True)\naxs[0].pcolormesh(derivatives_scaled.index, range(len(data)), data, vmin=0, vmax=1, cmap=cmap_warping)\naxs[0].set(title=\"Raw data with colormap {}\".format(cmap_warping))\naxs[1].plot(derivatives_scaled.index, derivatives_scaled[cmap_warping].values)\naxs[1].set(xlim=[0, 1], ylim=[-1.1, 1.1], title=\"First row of image\")\n\naxs[2].pcolormesh(derivatives_scaled.index, range(len(data)), data, vmin=0, vmax=1, cmap='viridis')\naxs[2].set(title=\"Raw data with colormap {}\".format('viridis'))\naxs[3].plot(derivatives_scaled.index, data[0])\naxs[3].set_xlim([0, 1])\n\naxs[4].pcolormesh(derivatives_scaled.index, range(len(data)), data_popped, vmin=0, vmax=1, cmap='viridis')\naxs[4].set(title=\"Data warped with colormap {}\".format(cmap_warping))\naxs[5].plot(derivatives_scaled.index, data_popped[0])\naxs[5].set_xlim([0, 1])\nplt.tight_layout()","visibility":"hide","key":"dU7uv89mCD"},{"type":"output","id":"RkpaI4Rd0KBQsF9posiKb","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"1388a63879db566cf4a4897fe9e7e09a","path":"/build/1388a63879db566cf4a4897fe9e7e09a.png"},"text/plain":{"content":"<Figure size 720x1080 with 6 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"uOUPot2Ah4"}],"visibility":"show","key":"KSCNxAF2Or"}],"key":"ZcIdpLUiDX"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"How do projects signal how “open” they are?","url":"/blog/2018/kinds-of-openness","group":"2018"},"next":{"title":"My weekly workflow","url":"/blog/2018/my-workflow","group":"2018"}}},"domain":"http://localhost:3000"}