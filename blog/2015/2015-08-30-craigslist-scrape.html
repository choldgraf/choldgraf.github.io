<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Scraping craigslist - Welcome</title><meta property="og:title" content="Scraping craigslist - Welcome"/><meta name="generator" content="mystmd"/><meta name="keywords" content=""/><meta name="image" content="/build/profile-color-circle-92b04648016e37babc767565e5f4bc53.png"/><meta property="og:image" content="/build/profile-color-circle-92b04648016e37babc767565e5f4bc53.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:creator" content="@choldgraf"/><meta name="twitter:title" content="Scraping craigslist - Welcome"/><meta name="twitter:image" content="/build/profile-color-circle-92b04648016e37babc767565e5f4bc53.png"/><meta name="twitter:alt" content="Scraping craigslist - Welcome"/><link rel="icon" href="/favicon.ico"/><link rel="stylesheet" href="/build/_assets/app-H3NBUYVS.css"/><link rel="stylesheet" href="/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="/myst-theme.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="block px-2 py-1 text-black underline">Skip to article content</a></div><div class="bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-screen top-0 z-30 h-[60px]"><nav class="flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><div class="block xl:hidden"><button class="flex items-center border-stone-400 text-stone-800 hover:text-stone-900 dark:text-stone-200 hover:dark:text-stone-100"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="m-1"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg><span class="sr-only">Open Menu</span></button></div><a class="flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="/"><span class="text-md sm:text-xl tracking-tight sm:mr-5">Chris Holdgraf</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"><div class="relative inline-block mx-2 grow-0"><a class="inline-flex items-center justify-center w-full mx-2 py-1 text-md font-medium dark:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75" href="/about">About</a></div><div class="relative inline-block mx-2 grow-0"><a class="inline-flex items-center justify-center w-full mx-2 py-1 text-md font-medium dark:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75" href="/projects">Projects</a></div><div class="relative inline-block mx-2 grow-0"><a class="inline-flex items-center justify-center w-full mx-2 py-1 text-md font-medium dark:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75" href="/publications">Publications</a></div><div class="relative inline-block mx-2 grow-0"><a class="inline-flex items-center justify-center w-full mx-2 py-1 text-md font-medium dark:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75" href="/talks">Talks</a></div><div class="relative inline-block mx-2 grow-0"><a aria-current="page" class="inline-flex items-center justify-center w-full mx-2 py-1 text-md font-medium dark:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 border-b border-stone-200" href="/blog">Blog</a></div></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R3iop:" data-state="closed" class="flex items-center h-10 aspect-square sm:w-64 text-left text-gray-400 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="hidden sm:block grow">Search</span><div aria-hidden="true" class="items-center hidden mx-1 font-mono text-sm text-gray-400 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">⌘</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-8 h-8 mx-3" title="Toggle theme between light and dark mode." aria-label="Toggle theme between light and dark mode."><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"><div class="relative" data-headlessui-state=""><div><button class="flex text-sm bg-transparent rounded-full focus:outline-none" id="headlessui-menu-button-:Rdiop:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Open Menu</span><div class="flex items-center text-stone-200 hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="p-1"><path fill-rule="evenodd" d="M10.5 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm0 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm0 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z" clip-rule="evenodd"></path></svg></div></button></div></div></div><div class="hidden sm:block"><a href="https://chrisholdgraf.com/rss.xml" target="_blank" rel="noopener noreferrer" class="inline-block px-4 py-2 mx-1 mt-0 leading-none border rounded text-md border-stone-700 dark:border-white text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 hover:bg-neutral-100">RSS</a></div></div></nav></div><div class="fixed xl:article-grid grid-gap xl:w-screen xl:pointer-events-none overflow-auto max-xl:min-w-[300px] hidden z-10" style="top:60px"><div class="pointer-events-auto xl:col-margin-left flex-col overflow-hidden hidden xl:flex"><div class="flex-grow py-6 overflow-y-auto"><nav aria-label="Navigation" class="overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px] lg:hidden"><div class="w-full px-1 dark:text-white"><a class="p-2 my-1 rounded-lg hover:bg-slate-300/30 block break-words focus:outline outline-blue-200 outline-2 rounded" href="/about">About</a><a class="p-2 my-1 rounded-lg hover:bg-slate-300/30 block break-words focus:outline outline-blue-200 outline-2 rounded" href="/projects">Projects</a><a class="p-2 my-1 rounded-lg hover:bg-slate-300/30 block break-words focus:outline outline-blue-200 outline-2 rounded" href="/publications">Publications</a><a class="p-2 my-1 rounded-lg hover:bg-slate-300/30 block break-words focus:outline outline-blue-200 outline-2 rounded" href="/talks">Talks</a><a aria-current="page" class="p-2 my-1 rounded-lg hover:bg-slate-300/30 block break-words focus:outline outline-blue-200 outline-2 rounded active" href="/blog">Blog</a></div></nav><div class="my-3 border-b-2 lg:hidden"></div><nav aria-label="Table of Contents" class="flex-grow overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px]"><div class="w-full px-1 dark:text-white"><a title="Welcome" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30 font-bold" href="/">Welcome</a><a title="About me" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/about">About me</a><a title="Projects" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/projects">Projects</a><a title="Publications" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/publications">Publications</a><a title="Talks" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/talks">Talks</a><div data-state="open" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><a title="Blog" aria-current="page" class="block break-words focus:outline outline-blue-200 outline-2 rounded py-2 grow font-semibold text-blue-800 dark:text-blue-200 active" href="/blog">Blog</a><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rrd8p:" aria-expanded="true" data-state="open"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="open" id="radix-:Rrd8p:" class="pl-3 pr-[2px] collapsible-content"><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="2024" class="block break-words rounded py-2 grow cursor-pointer">2024</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rdrd8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Rdrd8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="2023" class="block break-words rounded py-2 grow cursor-pointer">2023</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rlrd8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Rlrd8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="2022" class="block break-words rounded py-2 grow cursor-pointer">2022</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rtrd8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Rtrd8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="2021" class="block break-words rounded py-2 grow cursor-pointer">2021</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R15rd8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R15rd8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="2020" class="block break-words rounded py-2 grow cursor-pointer">2020</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R1drd8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R1drd8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="2019" class="block break-words rounded py-2 grow cursor-pointer">2019</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R1lrd8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R1lrd8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="2018" class="block break-words rounded py-2 grow cursor-pointer">2018</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R1trd8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R1trd8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="2017" class="block break-words rounded py-2 grow cursor-pointer">2017</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R25rd8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R25rd8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="2016" class="block break-words rounded py-2 grow cursor-pointer">2016</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R2drd8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R2drd8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="open" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="2015" class="block break-words rounded py-2 grow font-semibold text-blue-800 dark:text-blue-200 cursor-pointer">2015</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R2lrd8p:" aria-expanded="true" data-state="open"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="open" id="radix-:R2lrd8p:" class="pl-3 pr-[2px] collapsible-content"><a title="Coherence vs. Correlation - a simple simulation" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/blog/2015/2015-05-27-coherence-correlation">Coherence vs. Correlation - a simple simulation</a><a title="Scraping craigslist" aria-current="page" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg bg-blue-300/30 active" href="/blog/2015/2015-08-30-craigslist-scrape">Scraping craigslist</a><a title="Craigslist data analysis" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/blog/2015/2015-09-27-craigslist-data-analysis">Craigslist data analysis</a><a title="NIH grant analysis" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/blog/2015/2015-10-29-nih-grant-analysis">NIH grant analysis</a></div></div></div></div></div></nav></div><div class="flex-none py-6 transition-all duration-700 translate-y-6 opacity-0"><a class="flex mx-auto text-gray-700 w-fit hover:text-blue-700 dark:text-gray-200 dark:hover:text-blue-400" href="https://mystmd.org/made-with-myst" target="_blank" rel="noreferrer"><svg style="width:24px;height:24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" stroke="none"><g id="icon"><path fill="currentColor" d="M23.8,54.8v-3.6l4.7-0.8V17.5l-4.7-0.8V13H36l13.4,31.7h0.2l13-31.7h12.6v3.6l-4.7,0.8v32.9l4.7,0.8v3.6h-15
          v-3.6l4.9-0.8V20.8H65L51.4,53.3h-3.8l-14-32.5h-0.1l0.2,17.4v12.1l5,0.8v3.6H23.8z"></path><path fill="#F37726" d="M47,86.9c0-5.9-3.4-8.8-10.1-8.8h-8.4c-5.2,0-9.4-1.3-12.5-3.8c-3.1-2.5-5.4-6.2-6.8-11l4.8-1.6
          c1.8,5.6,6.4,8.6,13.8,8.8h9.2c6.4,0,10.8,2.5,13.1,7.5c2.3-5,6.7-7.5,13.1-7.5h8.4c7.8,0,12.7-2.9,14.6-8.7l4.8,1.6
          c-1.4,4.9-3.6,8.6-6.8,11.1c-3.1,2.5-7.3,3.7-12.4,3.8H63c-6.7,0-10,2.9-10,8.8"></path></g></svg><span class="self-center ml-2 text-sm">Made with MyST</span></a></div></div></div><article class="article content article-grid grid-gap"><main class="article-grid subgrid-gap col-screen"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="mb-8 pt-9"><div class="flex items-center h-6 mb-5 text-sm font-light"><div class="flex-grow"></div><a href="https://github.com/choldgraf/choldgraf.github.io" title="GitHub Repository: choldgraf/choldgraf.github.io" target="_blank" rel="noopener noreferrer" class="text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block mr-1 opacity-60 hover:opacity-100"><path d="M12 2.5c-5.4 0-9.8 4.4-9.8 9.7 0 4.3 2.8 8 6.7 9.2.5.1.7-.2.7-.5v-1.8c-2.4.5-3.1-.6-3.3-1.1-.1-.3-.6-1.1-1-1.4-.3-.2-.8-.6 0-.6s1.3.7 1.5 1c.9 1.5 2.3 1.1 2.8.8.1-.6.3-1.1.6-1.3-2.2-.2-4.4-1.1-4.4-4.8 0-1.1.4-1.9 1-2.6-.1-.2-.4-1.2.1-2.6 0 0 .8-.3 2.7 1 .8-.2 1.6-.3 2.4-.3.8 0 1.7.1 2.4.3 1.9-1.3 2.7-1 2.7-1 .5 1.3.2 2.3.1 2.6.6.7 1 1.5 1 2.6 0 3.7-2.3 4.6-4.4 4.8.4.3.7.9.7 1.8V21c0 .3.2.6.7.5 3.9-1.3 6.6-4.9 6.6-9.2 0-5.4-4.4-9.8-9.8-9.8z"></path></svg></a><div class="inline-block mr-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block"><title>Jupyter Notebook</title><path d="M20.2 1.7c0 .8-.5 1.4-1.3 1.5-.8 0-1.4-.5-1.5-1.3 0-.8.5-1.4 1.3-1.5.8-.1 1.5.5 1.5 1.3zM12 17.9c-3.7 0-7-1.3-8.7-3.3 1.8 4.8 7.1 7.3 11.9 5.5 2.5-.9 4.5-2.9 5.5-5.5-1.7 2-4.9 3.3-8.7 3.3zM12 5.1c3.7 0 7 1.3 8.7 3.3-1.8-4.8-7.1-7.3-11.9-5.5-2.5.9-4.5 2.9-5.5 5.5 1.7-2 5-3.3 8.7-3.3zM6.9 21.8c.1 1-.7 1.8-1.7 1.9-1 .1-1.8-.7-1.9-1.7 0-1 .7-1.8 1.7-1.9 1-.1 1.8.7 1.9 1.7zM3.7 4.6c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1c0 .5-.4 1-1 1z"></path></svg></div><div class="relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="relative ml-2 -mr-1" id="headlessui-menu-button-:Rd4fop:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div></div><h1 class="mb-0">Scraping craigslist</h1><div class="flex mt-2 text-sm font-light"><time dateTime="2015-08-30" class="">August 30, 2015</time></div></div><div class="block my-10 lg:sticky lg:z-10 lg:h-0 lg:pt-0 lg:my-0 lg:ml-10 lg:col-margin-right" style="top:60px"><nav></nav></div><div id="skip-to-article"></div><div id="xBqaKEBqOl" class="relative group/block article-grid subgrid-gap col-screen"><h2 id="overview" class="relative group"><span class="heading-text">Overview</span><a class="no-underline text-inherit hover:text-inherit px-2 font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#overview" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>In this notebook, I’ll show you how to make a simple query on Craigslist using some nifty python modules. You can take advantage of all the structure data that exists on webpages to collect interesting datasets.</p></div><div id="UsKkvfXlGU" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import pandas as pd
from bs4 import BeautifulSoup as bs4
%pylab inline</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="jQeWEppsU-7DvZ2HShNAG" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="LvkQUWwPcT" class="relative group/block article-grid subgrid-gap col-screen"><p>First we need to figure out how to submit a query to Craigslist. As with many websites, one way you can do this is simply by constructing the proper URL and sending it to Craigslist. Here’s a sample URL that is returned after manually typing in a search to Craigslist:</p><blockquote><p><code>http://sfbay.craigslist.org/search/eby/apa?bedrooms=1&amp;pets_cat=1&amp;pets_dog=1&amp;is_furnished=1</code></p></blockquote><p>This is actually two separate things. The first tells craigslist what kind of thing we’re searching for:</p><blockquote><p><code>http://sfbay.craigslist.org/search/eby/apa</code> says we’re searching in the sfbay area (<code>sfbay</code>) for apartments (<code>apa</code>) in the east bay (<code>eby</code>).</p></blockquote><p>The second part contains the parameters that we pass to the search:</p><blockquote><p><code>?bedrooms=1&amp;pets_cat=1&amp;pets_dog=1&amp;is_furnished=1</code> says we want 1+ bedrooms, cats allowed, dogs allowed, and furnished apartments. You can manually change these fields in order to create new queries.</p></blockquote><h2 id="getting-a-single-posting" class="relative group"><span class="heading-text">Getting a single posting</span><a class="no-underline text-inherit hover:text-inherit px-2 font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#getting-a-single-posting" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>So, we’ll use this knowledge to send some custom URLs to Craigslist. We’ll do this using the <code>requests</code> python module, which is really useful for querying websites.</p></div><div id="tkERDNQJOg" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import requests</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="DIpBhTkYtTQQEAMHk06yU" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="wuekdqizon" class="relative group/block article-grid subgrid-gap col-screen"><p>In internet lingo, we’re posting a <code>get</code> requests to the website, which simply says that we’d like to get some information from the Craigslist website.  With requests, we can easily create a dictionary that specifies parameters in the URL:</p></div><div id="sVzc45fGr9" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">url_base = &#x27;http://sfbay.craigslist.org/search/eby/apa&#x27;
params = dict(bedrooms=1, is_furnished=1)
rsp = requests.get(url_base, params=params)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="fdE2bJEUogS5j1T96u_DY" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="OZhnXsslAz" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Note that requests automatically created the right URL:
print(rsp.url)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="bdOKxo4HFv4CRK6Tdo9bE" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="vFCGMKd3IX" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># We can access the content of the response that Craigslist sent back here:
print(rsp.text[:500])</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="h3uaVktqFMDHyMt-Gf8Ac" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="EhzpBNTTE2" class="relative group/block article-grid subgrid-gap col-screen"><p>Wow, that’s a lot of code. Remember, websites serve HTML documents, and usually your browser will automatically render this into a nice webpage for you. Since we’re doing this with python, we get back the raw text. This is really useful, but how can we possibly parse it all?</p><p>For this, we’ll turn to another great package, BeautifulSoup:</p></div><div id="WlZT6JIUMV" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># BS4 can quickly parse our text, make sure to tell it that you&#x27;re giving html
html = bs4(rsp.text, &#x27;html.parser&#x27;)

# BS makes it easy to look through a document
print(html.prettify()[:1000])</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="FVTvk6EJ-4Z2KadFjMo5X" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="UOesBGTWST" class="relative group/block article-grid subgrid-gap col-screen"><p>Beautiful soup lets us quickly search through an HTML document. We can pull out whatever information we want.</p><p>Scanning through this text, we see a common structure repeated <code>&lt;p class=&quot;row&quot;&gt;</code>. This seems to be the container that has information for a single apartment.</p><p>In BeautifulSoup, we can quickly get all instances of this container:</p></div><div id="G01ZhgyxG9" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># find_all will pull entries that fit your search criteria.
# Note that we have to use brackets to define the `attrs` dictionary
# Because &quot;class&quot; is a special word in python, so we need to give a string.
apts = html.find_all(&#x27;p&#x27;, attrs={&#x27;class&#x27;: &#x27;row&#x27;})
print(len(apts))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="OJDbWNrEAw8dtonJF565z" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="ZSQcaq8eTJ" class="relative group/block article-grid subgrid-gap col-screen"><p>Now let’s look inside the values of a single apartment listing:</p></div><div id="dytQ2Cyc9K" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># We can see that there&#x27;s a consistent structure to a listing.
# There is a &#x27;time&#x27;, a &#x27;name&#x27;, a &#x27;housing&#x27; field with size/n_brs, etc.
this_appt = apts[15]
print(this_appt.prettify())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="GqWwrFAREEazVOjXJCeX8" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system jupyter-error"><code><span style="color:rgb(187, 0, 0)">---------------------------------------------------------------------------</span><span>
</span><span style="color:rgb(187, 0, 0)">IndexError</span><span>                                Traceback (most recent call last)
</span><span style="color:rgb(0, 187, 0)">&lt;ipython-input-8-b82880a42248&gt;</span><span> in </span><span style="color:rgb(0, 187, 187)">&lt;module&gt;</span><span style="color:rgb(0, 0, 187)">()</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">      1</span><span> </span><span style="color:rgb(187, 0, 0)"># We can see that there&#x27;s a consistent structure to a listing.</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">      2</span><span> </span><span style="color:rgb(187, 0, 0)"># There is a &#x27;time&#x27;, a &#x27;name&#x27;, a &#x27;housing&#x27; field with size/n_brs, etc.</span><span>
</span><span style="color:rgb(0, 187, 0)">----&gt; 3</span><span style="color:rgb(187, 0, 0)"> </span><span>this_appt</span><span> </span><span style="color:rgb(0, 0, 187)">=</span><span> </span><span>apts</span><span style="color:rgb(0, 0, 187)">[</span><span style="color:rgb(0, 187, 187)">15</span><span style="color:rgb(0, 0, 187)">]</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">      4</span><span> </span><span style="color:rgb(0, 187, 0)">print</span><span style="color:rgb(0, 0, 187)">(</span><span>this_appt</span><span style="color:rgb(0, 0, 187)">.</span><span>prettify</span><span style="color:rgb(0, 0, 187)">(</span><span style="color:rgb(0, 0, 187)">)</span><span style="color:rgb(0, 0, 187)">)</span><span>

</span><span style="color:rgb(187, 0, 0)">IndexError</span><span>: list index out of range</span></code></pre></div></div></div><div id="q5NcI0fUUs" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># So now we&#x27;ll pull out a couple of things we might be interested in:
# It looks like &quot;housing&quot; contains size information. We&#x27;ll pull that.
# Note that `findAll` returns a list, since there&#x27;s only one entry in
# this HTML, we&#x27;ll just pull the first item.
size = this_appt.findAll(attrs={&#x27;class&#x27;: &#x27;housing&#x27;})[0].text
print(size)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="Nj3brNHsF_Lr0lRns9kHW" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system jupyter-error"><code><span style="color:rgb(187, 0, 0)">---------------------------------------------------------------------------</span><span>
</span><span style="color:rgb(187, 0, 0)">NameError</span><span>                                 Traceback (most recent call last)
</span><span style="color:rgb(0, 187, 0)">&lt;ipython-input-9-4fb8a04b88f7&gt;</span><span> in </span><span style="color:rgb(0, 187, 187)">&lt;module&gt;</span><span style="color:rgb(0, 0, 187)">()</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">      3</span><span> </span><span style="color:rgb(187, 0, 0)"># Note that `findAll` returns a list, since there&#x27;s only one entry in</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">      4</span><span> </span><span style="color:rgb(187, 0, 0)"># this HTML, we&#x27;ll just pull the first item.</span><span>
</span><span style="color:rgb(0, 187, 0)">----&gt; 5</span><span style="color:rgb(187, 0, 0)"> </span><span>size</span><span> </span><span style="color:rgb(0, 0, 187)">=</span><span> </span><span>this_appt</span><span style="color:rgb(0, 0, 187)">.</span><span>findAll</span><span style="color:rgb(0, 0, 187)">(</span><span>attrs</span><span style="color:rgb(0, 0, 187)">=</span><span style="color:rgb(0, 0, 187)">{</span><span style="color:rgb(0, 0, 187)">&#x27;class&#x27;</span><span style="color:rgb(0, 0, 187)">:</span><span> </span><span style="color:rgb(0, 0, 187)">&#x27;housing&#x27;</span><span style="color:rgb(0, 0, 187)">}</span><span style="color:rgb(0, 0, 187)">)</span><span style="color:rgb(0, 0, 187)">[</span><span style="color:rgb(0, 187, 187)">0</span><span style="color:rgb(0, 0, 187)">]</span><span style="color:rgb(0, 0, 187)">.</span><span>text</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">      6</span><span> </span><span style="color:rgb(0, 187, 0)">print</span><span style="color:rgb(0, 0, 187)">(</span><span>size</span><span style="color:rgb(0, 0, 187)">)</span><span>

</span><span style="color:rgb(187, 0, 0)">NameError</span><span>: name &#x27;this_appt&#x27; is not defined</span></code></pre></div></div></div><div id="EFdhYqbQF8" class="relative group/block article-grid subgrid-gap col-screen"><p>We can query split this into n_bedrooms and the size. However, note that sometimes one of these features might be missing. So we’ll use an <code>if</code> statement to try and capture this variability:</p></div><div id="XWlbgSrRnp" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">def find_size_and_brs(size):
    split = size.strip(&#x27;/- &#x27;).split(&#x27; - &#x27;)
    if len(split) == 2:
        n_brs = split[0].replace(&#x27;br&#x27;, &#x27;&#x27;)
        this_size = split[1].replace(&#x27;ft2&#x27;, &#x27;&#x27;)
    elif &#x27;br&#x27; in split[0]:
        # It&#x27;s the n_bedrooms
        n_brs = split[0].replace(&#x27;br&#x27;, &#x27;&#x27;)
        this_size = np.nan
    elif &#x27;ft2&#x27; in split[0]:
        # It&#x27;s the size
        this_size = split[0].replace(&#x27;ft2&#x27;, &#x27;&#x27;)
        n_brs = np.nan
    return float(this_size), float(n_brs)
this_size, n_brs = find_size_and_brs(size)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="4dF2KvT9VExVC8Wog5sMq" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system jupyter-error"><code><span style="color:rgb(187, 0, 0)">---------------------------------------------------------------------------</span><span>
</span><span style="color:rgb(187, 0, 0)">AttributeError</span><span>                            Traceback (most recent call last)
</span><span style="color:rgb(0, 187, 0)">&lt;ipython-input-10-56ab1d345ab4&gt;</span><span> in </span><span style="color:rgb(0, 187, 187)">&lt;module&gt;</span><span style="color:rgb(0, 0, 187)">()</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">     13</span><span>         </span><span>n_brs</span><span> </span><span style="color:rgb(0, 0, 187)">=</span><span> </span><span>np</span><span style="color:rgb(0, 0, 187)">.</span><span>nan</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">     14</span><span>     </span><span style="color:rgb(0, 187, 0)">return</span><span> </span><span>float</span><span style="color:rgb(0, 0, 187)">(</span><span>this_size</span><span style="color:rgb(0, 0, 187)">)</span><span style="color:rgb(0, 0, 187)">,</span><span> </span><span>float</span><span style="color:rgb(0, 0, 187)">(</span><span>n_brs</span><span style="color:rgb(0, 0, 187)">)</span><span>
</span><span style="color:rgb(0, 187, 0)">---&gt; 15</span><span style="color:rgb(187, 0, 0)"> </span><span>this_size</span><span style="color:rgb(0, 0, 187)">,</span><span> </span><span>n_brs</span><span> </span><span style="color:rgb(0, 0, 187)">=</span><span> </span><span>find_size_and_brs</span><span style="color:rgb(0, 0, 187)">(</span><span>size</span><span style="color:rgb(0, 0, 187)">)</span><span>
</span><span>
</span><span style="color:rgb(0, 187, 0)">&lt;ipython-input-10-56ab1d345ab4&gt;</span><span> in </span><span style="color:rgb(0, 187, 187)">find_size_and_brs</span><span style="color:rgb(0, 0, 187)">(size)</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">      1</span><span> </span><span style="color:rgb(0, 187, 0)">def</span><span> </span><span>find_size_and_brs</span><span style="color:rgb(0, 0, 187)">(</span><span>size</span><span style="color:rgb(0, 0, 187)">)</span><span style="color:rgb(0, 0, 187)">:</span><span>
</span><span style="color:rgb(0, 187, 0)">----&gt; 2</span><span style="color:rgb(187, 0, 0)">     </span><span>split</span><span> </span><span style="color:rgb(0, 0, 187)">=</span><span> </span><span>size</span><span style="color:rgb(0, 0, 187)">.</span><span>strip</span><span style="color:rgb(0, 0, 187)">(</span><span style="color:rgb(0, 0, 187)">&#x27;/- &#x27;</span><span style="color:rgb(0, 0, 187)">)</span><span style="color:rgb(0, 0, 187)">.</span><span>split</span><span style="color:rgb(0, 0, 187)">(</span><span style="color:rgb(0, 0, 187)">&#x27; - &#x27;</span><span style="color:rgb(0, 0, 187)">)</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">      3</span><span>     </span><span style="color:rgb(0, 187, 0)">if</span><span> </span><span>len</span><span style="color:rgb(0, 0, 187)">(</span><span>split</span><span style="color:rgb(0, 0, 187)">)</span><span> </span><span style="color:rgb(0, 0, 187)">==</span><span> </span><span style="color:rgb(0, 187, 187)">2</span><span style="color:rgb(0, 0, 187)">:</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">      4</span><span>         </span><span>n_brs</span><span> </span><span style="color:rgb(0, 0, 187)">=</span><span> </span><span>split</span><span style="color:rgb(0, 0, 187)">[</span><span style="color:rgb(0, 187, 187)">0</span><span style="color:rgb(0, 0, 187)">]</span><span style="color:rgb(0, 0, 187)">.</span><span>replace</span><span style="color:rgb(0, 0, 187)">(</span><span style="color:rgb(0, 0, 187)">&#x27;br&#x27;</span><span style="color:rgb(0, 0, 187)">,</span><span> </span><span style="color:rgb(0, 0, 187)">&#x27;&#x27;</span><span style="color:rgb(0, 0, 187)">)</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">      5</span><span>         </span><span>this_size</span><span> </span><span style="color:rgb(0, 0, 187)">=</span><span> </span><span>split</span><span style="color:rgb(0, 0, 187)">[</span><span style="color:rgb(0, 187, 187)">1</span><span style="color:rgb(0, 0, 187)">]</span><span style="color:rgb(0, 0, 187)">.</span><span>replace</span><span style="color:rgb(0, 0, 187)">(</span><span style="color:rgb(0, 0, 187)">&#x27;ft2&#x27;</span><span style="color:rgb(0, 0, 187)">,</span><span> </span><span style="color:rgb(0, 0, 187)">&#x27;&#x27;</span><span style="color:rgb(0, 0, 187)">)</span><span>

</span><span style="color:rgb(187, 0, 0)">AttributeError</span><span>: &#x27;function&#x27; object has no attribute &#x27;strip&#x27;</span></code></pre></div></div></div><div id="nCDU2zDsVH" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Now we&#x27;ll also pull a few other things:
this_time = this_appt.find(&#x27;time&#x27;)[&#x27;datetime&#x27;]
this_time = pd.to_datetime(this_time)
this_price = float(this_appt.find(&#x27;span&#x27;, {&#x27;class&#x27;: &#x27;price&#x27;}).text.strip(&#x27;$&#x27;))
this_title = this_appt.find(&#x27;a&#x27;, attrs={&#x27;class&#x27;: &#x27;hdrlnk&#x27;}).text</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="Xr0sg44_yXArGdzm2A0wF" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system jupyter-error"><code><span style="color:rgb(187, 0, 0)">---------------------------------------------------------------------------</span><span>
</span><span style="color:rgb(187, 0, 0)">NameError</span><span>                                 Traceback (most recent call last)
</span><span style="color:rgb(0, 187, 0)">&lt;ipython-input-11-bc17374a1087&gt;</span><span> in </span><span style="color:rgb(0, 187, 187)">&lt;module&gt;</span><span style="color:rgb(0, 0, 187)">()</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">      1</span><span> </span><span style="color:rgb(187, 0, 0)"># Now we&#x27;ll also pull a few other things:</span><span>
</span><span style="color:rgb(0, 187, 0)">----&gt; 2</span><span style="color:rgb(187, 0, 0)"> </span><span>this_time</span><span> </span><span style="color:rgb(0, 0, 187)">=</span><span> </span><span>this_appt</span><span style="color:rgb(0, 0, 187)">.</span><span>find</span><span style="color:rgb(0, 0, 187)">(</span><span style="color:rgb(0, 0, 187)">&#x27;time&#x27;</span><span style="color:rgb(0, 0, 187)">)</span><span style="color:rgb(0, 0, 187)">[</span><span style="color:rgb(0, 0, 187)">&#x27;datetime&#x27;</span><span style="color:rgb(0, 0, 187)">]</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">      3</span><span> </span><span>this_time</span><span> </span><span style="color:rgb(0, 0, 187)">=</span><span> </span><span>pd</span><span style="color:rgb(0, 0, 187)">.</span><span>to_datetime</span><span style="color:rgb(0, 0, 187)">(</span><span>this_time</span><span style="color:rgb(0, 0, 187)">)</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">      4</span><span> </span><span>this_price</span><span> </span><span style="color:rgb(0, 0, 187)">=</span><span> </span><span>float</span><span style="color:rgb(0, 0, 187)">(</span><span>this_appt</span><span style="color:rgb(0, 0, 187)">.</span><span>find</span><span style="color:rgb(0, 0, 187)">(</span><span style="color:rgb(0, 0, 187)">&#x27;span&#x27;</span><span style="color:rgb(0, 0, 187)">,</span><span> </span><span style="color:rgb(0, 0, 187)">{</span><span style="color:rgb(0, 0, 187)">&#x27;class&#x27;</span><span style="color:rgb(0, 0, 187)">:</span><span> </span><span style="color:rgb(0, 0, 187)">&#x27;price&#x27;</span><span style="color:rgb(0, 0, 187)">}</span><span style="color:rgb(0, 0, 187)">)</span><span style="color:rgb(0, 0, 187)">.</span><span>text</span><span style="color:rgb(0, 0, 187)">.</span><span>strip</span><span style="color:rgb(0, 0, 187)">(</span><span style="color:rgb(0, 0, 187)">&#x27;$&#x27;</span><span style="color:rgb(0, 0, 187)">)</span><span style="color:rgb(0, 0, 187)">)</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">      5</span><span> </span><span>this_title</span><span> </span><span style="color:rgb(0, 0, 187)">=</span><span> </span><span>this_appt</span><span style="color:rgb(0, 0, 187)">.</span><span>find</span><span style="color:rgb(0, 0, 187)">(</span><span style="color:rgb(0, 0, 187)">&#x27;a&#x27;</span><span style="color:rgb(0, 0, 187)">,</span><span> </span><span>attrs</span><span style="color:rgb(0, 0, 187)">=</span><span style="color:rgb(0, 0, 187)">{</span><span style="color:rgb(0, 0, 187)">&#x27;class&#x27;</span><span style="color:rgb(0, 0, 187)">:</span><span> </span><span style="color:rgb(0, 0, 187)">&#x27;hdrlnk&#x27;</span><span style="color:rgb(0, 0, 187)">}</span><span style="color:rgb(0, 0, 187)">)</span><span style="color:rgb(0, 0, 187)">.</span><span>text</span><span>

</span><span style="color:rgb(187, 0, 0)">NameError</span><span>: name &#x27;this_appt&#x27; is not defined</span></code></pre></div></div></div><div id="YuCouOI554" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Now we&#x27;ve got the n_bedrooms, size, price, and time of listing
print(&#x27;\n&#x27;.join([str(i) for i in [this_size, n_brs, this_time, this_price, this_title]]))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="WfmjNd4yGkjKCfI_V_2QS" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system jupyter-error"><code><span style="color:rgb(187, 0, 0)">---------------------------------------------------------------------------</span><span>
</span><span style="color:rgb(187, 0, 0)">NameError</span><span>                                 Traceback (most recent call last)
</span><span style="color:rgb(0, 187, 0)">&lt;ipython-input-12-6b0491d04915&gt;</span><span> in </span><span style="color:rgb(0, 187, 187)">&lt;module&gt;</span><span style="color:rgb(0, 0, 187)">()</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">      1</span><span> </span><span style="color:rgb(187, 0, 0)"># Now we&#x27;ve got the n_bedrooms, size, price, and time of listing</span><span>
</span><span style="color:rgb(0, 187, 0)">----&gt; 2</span><span style="color:rgb(187, 0, 0)"> </span><span style="color:rgb(0, 187, 0)">print</span><span style="color:rgb(0, 0, 187)">(</span><span style="color:rgb(0, 0, 187)">&#x27;\n&#x27;</span><span style="color:rgb(0, 0, 187)">.</span><span>join</span><span style="color:rgb(0, 0, 187)">(</span><span style="color:rgb(0, 0, 187)">[</span><span>str</span><span style="color:rgb(0, 0, 187)">(</span><span>i</span><span style="color:rgb(0, 0, 187)">)</span><span> </span><span style="color:rgb(0, 187, 0)">for</span><span> </span><span>i</span><span> </span><span style="color:rgb(0, 187, 0)">in</span><span> </span><span style="color:rgb(0, 0, 187)">[</span><span>this_size</span><span style="color:rgb(0, 0, 187)">,</span><span> </span><span>n_brs</span><span style="color:rgb(0, 0, 187)">,</span><span> </span><span>this_time</span><span style="color:rgb(0, 0, 187)">,</span><span> </span><span>this_price</span><span style="color:rgb(0, 0, 187)">,</span><span> </span><span>this_title</span><span style="color:rgb(0, 0, 187)">]</span><span style="color:rgb(0, 0, 187)">]</span><span style="color:rgb(0, 0, 187)">)</span><span style="color:rgb(0, 0, 187)">)</span><span>
</span><span>
</span><span style="color:rgb(187, 0, 0)">NameError</span><span>: name &#x27;this_size&#x27; is not defined</span></code></pre></div></div></div><div id="b6vN78TQ4l" class="relative group/block article-grid subgrid-gap col-screen"><h2 id="querying-lots-of-postings" class="relative group"><span class="heading-text">Querying lots of postings</span><a class="no-underline text-inherit hover:text-inherit px-2 font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#querying-lots-of-postings" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Cool - so now we’ve got some useful information about one listing. Now let’s loop through many listings across several locations.</p><p>It looks like there is a “city code” that distinguishes where you’re searching. Here is a <strong>not</strong> up to date list: <a target="_blank" href="https://sites.google.com/site/clsiteinfo/city-site-code-sort" rel="noreferrer">link</a></p><p>Within the Bay Area, there are also a lot of sub-regional locations, which we’ll define here, then loop through them all.</p><p>Note that the <code>s</code> parameter tells Craiglist where to start in terms of the number of results given back. E.g., if s==100, then it starts at the 100th entry.</p></div><div id="dAZMLSMz9h" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">loc_prefixes = [&#x27;eby&#x27;, &#x27;nby&#x27;, &#x27;sfc&#x27;, &#x27;sby&#x27;, &#x27;scz&#x27;]</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="jESkB5OXrUyGrIvBy8gwY" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="o2SbFkJU6U" class="relative group/block article-grid subgrid-gap col-screen"><p>We’ll define a few helper functions to handle edge cases and make sure that we don’t get any errors.</p></div><div id="zedQ8JPZOU" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">def find_prices(results):
    prices = []
    for rw in results:
        price = rw.find(&#x27;span&#x27;, attrs={&#x27;class&#x27;: &#x27;result-price&#x27;})
        if price is not None:
            price = float(price.text.strip(&#x27;$&#x27;))
        else:
            price = np.nan
        prices.append(price)
    return prices

def find_times(results):
    times = []
    for rw in apts:
        if time is not None:
            time = time[&#x27;datetime&#x27;]
            time = pd.to_datetime(time)
        else:
            time = np.nan
        times.append(time)
    return times</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="L5LxBlCcebi-RUCvHGM2b" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="vRcuDlxX6T" class="relative group/block article-grid subgrid-gap col-screen"><p>Now we’re ready to go. We’ll loop through all of our locations, and pull a number of entries for each one. We’ll use a pandas dataframe to store everything, because this will be useful for future analysis.</p><p><strong>Note</strong> - Craigslist won’t take kindly to you querying their server a bunch of times at once. Make sure not to pull too much data too quickly. Another option is to add a delay to each loop iteration. Otherwise your IP might get banned.</p></div><div id="JpvQDn1hTF" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">print(txt.prettify())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="k59Ehzqcs-ZUZ-oNblid3" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system jupyter-error"><code><span style="color:rgb(187, 0, 0)">---------------------------------------------------------------------------</span><span>
</span><span style="color:rgb(187, 0, 0)">NameError</span><span>                                 Traceback (most recent call last)
</span><span style="color:rgb(0, 187, 0)">&lt;ipython-input-9-97e76ea257b9&gt;</span><span> in </span><span style="color:rgb(0, 187, 187)">&lt;module&gt;</span><span style="color:rgb(0, 0, 187)">()</span><span>
</span><span style="color:rgb(0, 187, 0)">----&gt; 1</span><span style="color:rgb(187, 0, 0)"> </span><span style="color:rgb(0, 187, 0)">print</span><span style="color:rgb(0, 0, 187)">(</span><span>txt</span><span style="color:rgb(0, 0, 187)">.</span><span>prettify</span><span style="color:rgb(0, 0, 187)">(</span><span style="color:rgb(0, 0, 187)">)</span><span style="color:rgb(0, 0, 187)">)</span><span>
</span><span>
</span><span style="color:rgb(187, 0, 0)">NameError</span><span>: name &#x27;txt&#x27; is not defined</span></code></pre></div></div></div><div id="gYsfTXfyvg" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">def find_size_and_brs(size):
    split = size.strip().split(&#x27;\n&#x27;)
    split = [ii.strip().strip(&#x27; -&#x27;) for ii in split]
    if len(split) == 2:
        n_brs = split[0].replace(&#x27;br&#x27;, &#x27;&#x27;)
        this_size = split[1].replace(&#x27;ft2&#x27;, &#x27;&#x27;)
    elif &#x27;br&#x27; in split[0]:
        # It&#x27;s the n_bedrooms
        n_brs = split[0].replace(&#x27;br&#x27;, &#x27;&#x27;)
        this_size = np.nan
    elif &#x27;ft2&#x27; in split[0]:
        # It&#x27;s the size
        this_size = split[0].replace(&#x27;ft2&#x27;, &#x27;&#x27;)
        n_brs = np.nan
    return float(this_size), float(n_brs)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="VbVQd1RxKo6kUxEOc8yZi" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="znVLEGRjYN" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Now loop through all of this and store the results
results = []  # We&#x27;ll store the data here
# Careful with this...too many queries == your IP gets banned temporarily
search_indices = np.arange(0, 500, 100)
loc_prefixes = [&#x27;eby&#x27;]
for loc in loc_prefixes:
    print loc
    for i in search_indices:
        url = &#x27;http://sfbay.craigslist.org/search/{0}/apa&#x27;.format(loc)
        resp = requests.get(url, params={&#x27;bedrooms&#x27;: 1, &#x27;s&#x27;: i})
        txt = bs4(resp.text, &#x27;html.parser&#x27;)
        apts = txt.findAll(attrs={&#x27;class&#x27;: &quot;result-info&quot;})

        # Find the size of all entries
        size_text = [rw.findAll(attrs={&#x27;class&#x27;: &#x27;housing&#x27;})[0].text
                     for rw in apts]
        sizes_brs = [find_size_and_brs(stxt) for stxt in size_text]
        sizes, n_brs = zip(*sizes_brs)  # This unzips into 2 vectors

        # Find the title and link
        title = [rw.find(&#x27;a&#x27;, attrs={&#x27;class&#x27;: &#x27;hdrlnk&#x27;}).text
                      for rw in apts]
        links = [rw.find(&#x27;a&#x27;, attrs={&#x27;class&#x27;: &#x27;hdrlnk&#x27;})[&#x27;href&#x27;]
                 for rw in apts]

        # Find the time
        time = [pd.to_datetime(rw.find(&#x27;time&#x27;)[&#x27;datetime&#x27;]) for rw in apts]
        price = find_prices(apts)

        # We&#x27;ll create a dataframe to store all the data
        data = np.array([time, price, sizes, n_brs, title, links])
        col_names = [&#x27;time&#x27;, &#x27;price&#x27;, &#x27;size&#x27;, &#x27;brs&#x27;, &#x27;title&#x27;, &#x27;link&#x27;]
        df = pd.DataFrame(data.T, columns=col_names)
        df = df.set_index(&#x27;time&#x27;)

        # Add the location variable to all entries
        df[&#x27;loc&#x27;] = loc
        results.append(df)
        
# Finally, concatenate all the results
results = pd.concat(results, axis=0)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="BID28EG9-m1w6BAL_cbS9" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="so8tx4UTZT" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">def seconds_to_days(seconds):
    return seconds / 60. / 60. / 24.

# We&#x27;ll make sure that the right columns are represented numerically:
results[[&#x27;price&#x27;, &#x27;size&#x27;, &#x27;brs&#x27;]] = results[[&#x27;price&#x27;, &#x27;size&#x27;, &#x27;brs&#x27;]].convert_objects(convert_numeric=True)
results.index.name = &#x27;time&#x27;

# Add the age of each result
now = pd.datetime.utcnow()
results[&#x27;age&#x27;] = [1. / seconds_to_days((now - ii).total_seconds())
                  for ii in results.index]</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="_pzASTIdWbrgy7rx_nZKP" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="JiNYAFWRkp" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># And there you have it:
results.head()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="5lwvLlaNnPjo8PU5B-AKZ" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="DUIoTaOWmt" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">ax = results.hist(&#x27;price&#x27;, bins=np.arange(0, 10000, 100))[0, 0]
ax.set_title(&#x27;Mother of god.&#x27;, fontsize=20)
ax.set_xlabel(&#x27;Price&#x27;, fontsize=18)
ax.set_ylabel(&#x27;Count&#x27;, fontsize=18)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="rMHGmi0Epsd7672O88XNi" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><img src="/build/0d3cf0bc7c15d7a116cf313e8401420b.png" alt="Image produced in Jupyter"/></div></div><div id="Aptmz99G4e" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">target_price = 2200.
target_size = 1400.
highlight = pd.DataFrame([[target_price, target_size, 2, &#x27;eby&#x27;, &#x27;Mine&#x27;, &#x27;None&#x27;, 1, results[&#x27;age&#x27;].max()]],
                         columns=[&#x27;price&#x27;, &#x27;size&#x27;, &#x27;brs&#x27;, &#x27;loc&#x27;, &#x27;title&#x27;, &#x27;link&#x27;, &#x27;mine&#x27;, &#x27;age&#x27;])
results[&#x27;mine&#x27;] = 0
results = results.append(highlight)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="FZUKwNxgdLjxvNFKlyXML" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="yCIso3W382" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import altair
graph = altair.Chart(results)
graph.mark_circle(size=200).encode(x=&#x27;size&#x27;, y=&#x27;price&#x27;,
                                   color=&#x27;mine:N&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="sITVzU-3PaQaDlfQ23MkL" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="LQ6KpZ13R2" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">smin, smax = (1300, 1500)
n_br = 2
# subset = results.query(&#x27;size &gt; @smin and size &lt; @smax&#x27;)
fig, ax = plt.subplots()
results.query(&#x27;brs &lt; 4&#x27;).groupby(&#x27;brs&#x27;).hist(&#x27;price&#x27;, bins=np.arange(0, 5000, 200), ax=ax)
ax.axvline(target_price, c=&#x27;r&#x27;, ls=&#x27;--&#x27;)
</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="XRFYdF0aKY0bZ5y6qJi0l" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><img src="/build/1b46d45beec910ba560e8c82a965ac0c.png" alt="Image produced in Jupyter"/></div></div><div id="mUi178piM9" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Finally, we can save this data to a CSV to play around with it later.
# We&#x27;ll have to remove some annoying characters first:
import string
use_chars = string.ascii_letters +\
    &#x27;&#x27;.join([str(i) for i in range(10)]) +\
    &#x27; /\.&#x27;
results[&#x27;title&#x27;] = results[&#x27;title&#x27;].apply(
    lambda a: &#x27;&#x27;.join([i for i in a if i in use_chars]))

results.to_csv(&#x27;../data/craigslist_results.csv&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="O-BYQNv6WC6r-WKkaGqxj" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="EijOBEK7DD" class="relative group/block article-grid subgrid-gap col-screen"><h2 id="recap" class="relative group"><span class="heading-text">RECAP</span><a class="no-underline text-inherit hover:text-inherit px-2 font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#recap" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>To sum up what we just did:</p><ul><li>We defined the ability to query a website using a custom URL. This is usually the same in structure for website, but the parameter names will be different.</li><li>We sent a <code>get</code> request to Craigslist using the <code>requests</code> module of python.</li><li>We parsed the response using <code>BeautifulSoup4</code>.</li><li>We then looped through a bunch of apartment listings, pulled some relevant data, and combined it all into a cleaned and usable dataframe with <code>pandas</code>.</li></ul><p>Next up I’ll take a look at the data, and see if there’s anything interesting to make of it.</p></div><div id="fBg1I9KePG" class="relative group/block article-grid subgrid-gap col-screen"><h2 id="bonus-auto-emailing-yourself-w-notifications" class="relative group"><span class="heading-text">Bonus - auto-emailing yourself w/ notifications</span><a class="no-underline text-inherit hover:text-inherit px-2 font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#bonus-auto-emailing-yourself-w-notifications" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>A few people have asked me about using this kind of process to make a bot that scrapes craigslist periodically. This is actually quite simple, as it basically involves pulling the top listings from craigslist, checking this against an “old” list, and detecting if there’s anything new that has popped up since the last time you checked.</p><p>Here’s a simple script that will get the job done. Once again, don’t pull too much data at once, and don’t query Craigslist too frequently, or you’re gonna get banned.</p></div><div id="WYDlzLlJQ9" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># We&#x27;ll use the gmail module (there really is a module for everything in python)
import gmail
import time</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="2PJZU-BLxunLV_zJGpFoa" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="IqyfHmQnjT" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">gm = gmail.GMail(&#x27;my_username&#x27;, &#x27;my_password&#x27;)
gm.connect()

# Define our URL and a query we want to post
base_url = &#x27;http://sfbay.craigslist.org/&#x27;
url = base_url + &#x27;search/eby/apa?nh=48&amp;anh=49&amp;nh=112&amp;nh=58&amp;nh=61&amp;nh=62&amp;nh=66&amp;max_price=2200&amp;bedrooms=1&#x27;

# This will remove weird characters that people put in titles like ****!***!!!
use_chars = string.ascii_letters + &#x27;&#x27;.join([str(i) for i in range(10)]) + &#x27; &#x27;</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="At2Qorzq4QMT5bEaC7OWy" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system jupyter-error"><code><span style="color:rgb(187, 0, 0)">---------------------------------------------------------------------------</span><span>
</span><span style="color:rgb(187, 0, 0)">SMTPAuthenticationError</span><span>                   Traceback (most recent call last)
</span><span style="color:rgb(0, 187, 0)">&lt;ipython-input-2-49f6a18c0f58&gt;</span><span> in </span><span style="color:rgb(0, 187, 187)">&lt;module&gt;</span><span style="color:rgb(0, 0, 187)">()</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">      1</span><span> </span><span>gm</span><span> </span><span style="color:rgb(0, 0, 187)">=</span><span> </span><span>gmail</span><span style="color:rgb(0, 0, 187)">.</span><span>GMail</span><span style="color:rgb(0, 0, 187)">(</span><span style="color:rgb(0, 0, 187)">&#x27;my_username&#x27;</span><span style="color:rgb(0, 0, 187)">,</span><span> </span><span style="color:rgb(0, 0, 187)">&#x27;my_password&#x27;</span><span style="color:rgb(0, 0, 187)">)</span><span>
</span><span style="color:rgb(0, 187, 0)">----&gt; 2</span><span style="color:rgb(187, 0, 0)"> </span><span>gm</span><span style="color:rgb(0, 0, 187)">.</span><span>connect</span><span style="color:rgb(0, 0, 187)">(</span><span style="color:rgb(0, 0, 187)">)</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">      3</span><span> </span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">      4</span><span> </span><span style="color:rgb(187, 0, 0)"># Define our URL and a query we want to post</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">      5</span><span> </span><span>base_url</span><span> </span><span style="color:rgb(0, 0, 187)">=</span><span> </span><span style="color:rgb(0, 0, 187)">&#x27;http://sfbay.craigslist.org/&#x27;</span><span>

</span><span style="color:rgb(0, 187, 0)">/Users/choldgraf/anaconda/lib/python3.7/site-packages/gmail/gmail.pyc</span><span> in </span><span style="color:rgb(0, 187, 187)">connect</span><span style="color:rgb(0, 0, 187)">(self)</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">     65</span><span>         </span><span>self</span><span style="color:rgb(0, 0, 187)">.</span><span>session</span><span style="color:rgb(0, 0, 187)">.</span><span>ehlo</span><span style="color:rgb(0, 0, 187)">(</span><span style="color:rgb(0, 0, 187)">)</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">     66</span><span>         </span><span style="color:rgb(0, 187, 0)">try</span><span style="color:rgb(0, 0, 187)">:</span><span>
</span><span style="color:rgb(0, 187, 0)">---&gt; 67</span><span style="color:rgb(187, 0, 0)">             </span><span>self</span><span style="color:rgb(0, 0, 187)">.</span><span>session</span><span style="color:rgb(0, 0, 187)">.</span><span>login</span><span style="color:rgb(0, 0, 187)">(</span><span>self</span><span style="color:rgb(0, 0, 187)">.</span><span>username</span><span style="color:rgb(0, 0, 187)">,</span><span>self</span><span style="color:rgb(0, 0, 187)">.</span><span>password</span><span style="color:rgb(0, 0, 187)">)</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">     68</span><span>         </span><span style="color:rgb(0, 187, 0)">except</span><span> </span><span>SMTPAuthenticationError</span><span style="color:rgb(0, 0, 187)">,</span><span>e</span><span style="color:rgb(0, 0, 187)">:</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">     69</span><span>             </span><span style="color:rgb(187, 0, 0)"># Catch redirect to account unlock &amp; reformat</span><span>

</span><span style="color:rgb(0, 187, 0)">/Users/choldgraf/anaconda/lib/python3.7/smtplib.pyc</span><span> in </span><span style="color:rgb(0, 187, 187)">login</span><span style="color:rgb(0, 0, 187)">(self, user, password)</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">    620</span><span>             </span><span style="color:rgb(187, 0, 0)"># 235 == &#x27;Authentication successful&#x27;</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">    621</span><span>             </span><span style="color:rgb(187, 0, 0)"># 503 == &#x27;Error: already authenticated&#x27;</span><span>
</span><span style="color:rgb(0, 187, 0)">--&gt; 622</span><span style="color:rgb(187, 0, 0)">             </span><span style="color:rgb(0, 187, 0)">raise</span><span> </span><span>SMTPAuthenticationError</span><span style="color:rgb(0, 0, 187)">(</span><span>code</span><span style="color:rgb(0, 0, 187)">,</span><span> </span><span>resp</span><span style="color:rgb(0, 0, 187)">)</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">    623</span><span>         </span><span style="color:rgb(0, 187, 0)">return</span><span> </span><span style="color:rgb(0, 0, 187)">(</span><span>code</span><span style="color:rgb(0, 0, 187)">,</span><span> </span><span>resp</span><span style="color:rgb(0, 0, 187)">)</span><span>
</span><span style="color:rgb(0, 187, 0);font-weight:bold">    624</span><span> </span><span>

</span><span style="color:rgb(187, 0, 0)">SMTPAuthenticationError</span><span>: (535, &#x27;5.7.8 Username and Password not accepted. Learn more at\n5.7.8  https://support.google.com/mail/answer/14257 of1sm4627014pbc.11 - gsmtp&#x27;)</span></code></pre></div></div></div><div id="sLsoy1V6dc" class="relative group/block article-grid subgrid-gap col-screen"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">link_list = []  # We&#x27;ll store the data here
link_list_send = []  # This is a list of links to be sent
send_list = []  # This is what will actually be sent in the email

# Careful with this...too many queries == your IP gets banned temporarily
while True:
    resp = requests.get(url)
    txt = bs4(resp.text, &#x27;html.parser&#x27;)
    apts = txt.findAll(attrs={&#x27;class&#x27;: &quot;row&quot;})
    
    # We&#x27;re just going to pull the title and link
    for apt in apts:
        title = apt.find_all(&#x27;a&#x27;, attrs={&#x27;class&#x27;: &#x27;hdrlnk&#x27;})[0]
        name = &#x27;&#x27;.join([i for i in title.text if i in use_chars])
        link = title.attrs[&#x27;href&#x27;]
        if link not in link_list and link not in link_list_send:
            print(&#x27;Found new listing&#x27;)
            link_list_send.append(link)
            send_list.append(name + &#x27;  -  &#x27; + base_url+link)
            
    # Flush the cache if we&#x27;ve found new entries
    if len(link_list_send) &gt; 0:
        print(&#x27;Sending mail!&#x27;)
        msg = &#x27;\n&#x27;.join(send_list)
        m = email.message.Message()
        m.set_payload(msg)
        gm.send(m, [&#x27;recipient_email@mydomain.com&#x27;])
        link_list += link_list_send
        link_list_send = []
        send_list = []
    
    # Sleep a bit so CL doesn&#x27;t ban us
    sleep_amt = np.random.randint(60, 120)
    time.sleep(sleep_amt)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="lqZZcYCtc5rEd-OgsyejD" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="SdCv1E99qQ" class="relative group/block article-grid subgrid-gap col-screen"><p>And there you have it - your own little bot to keep you on the top of the rental market.</p></div><div></div><div class="flex pt-10 mb-10 space-x-4"><a class="flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700" href="/blog/2015/2015-05-27-coherence-correlation"><div class="flex h-full align-middle"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="self-center transition-transform group-hover:-translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"></path></svg><div class="flex-grow text-right"><div class="text-xs text-gray-500 dark:text-gray-400">2015</div>Coherence vs. Correlation - a simple simulation</div></div></a><a class="flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700" href="/blog/2015/2015-09-27-craigslist-data-analysis"><div class="flex h-full align-middle"><div class="flex-grow"><div class="text-xs text-gray-500 dark:text-gray-400">2015</div>Craigslist data analysis</div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="self-center transition-transform group-hover:translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"></path></svg></div></a></div></main></article><script>((a,d)=>{if(!window.history.state||!window.history.state.key){let h=Math.random().toString(32).slice(2);window.history.replaceState({key:h},"")}try{let f=JSON.parse(sessionStorage.getItem(a)||"{}")[d||window.history.state.key];typeof f=="number"&&window.scrollTo(0,f)}catch(h){console.error(h),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/build/entry.client-UNPC4GT3.js"/><link rel="modulepreload" href="/build/_shared/chunk-OCTKKCIL.js"/><link rel="modulepreload" href="/build/_shared/chunk-UAI5KRM7.js"/><link rel="modulepreload" href="/build/_shared/chunk-2NH4LW52.js"/><link rel="modulepreload" href="/build/_shared/chunk-JLDGA2DL.js"/><link rel="modulepreload" href="/build/_shared/chunk-YAIQ7LUU.js"/><link rel="modulepreload" href="/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/build/_shared/chunk-ZQWAZXET.js"/><link rel="modulepreload" href="/build/_shared/chunk-HYMQ7M2K.js"/><link rel="modulepreload" href="/build/_shared/chunk-3CVK3PYF.js"/><link rel="modulepreload" href="/build/_shared/chunk-J6FHCSRC.js"/><link rel="modulepreload" href="/build/_shared/chunk-IQBJE7PC.js"/><link rel="modulepreload" href="/build/_shared/chunk-5CFTM6YW.js"/><link rel="modulepreload" href="/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/build/root-HROFNPGU.js"/><link rel="modulepreload" href="/build/_shared/chunk-N544LW6X.js"/><link rel="modulepreload" href="/build/routes/$-WNZNXUO2.js"/><script>window.__remixContext = {"url":"/blog/2015/2015-08-30-craigslist-scrape","state":{"loaderData":{"root":{"config":{"options":{"twitter":"choldgraf","logo_text":"Chris Holdgraf","folders":true},"myst":"1.3.18","nav":[{"title":"About","url":"/about"},{"title":"Projects","url":"/projects"},{"title":"Publications","url":"/publications"},{"title":"Talks","url":"/talks"},{"title":"Blog","url":"/blog"}],"actions":[{"title":"RSS","url":"https://chrisholdgraf.com/rss.xml","internal":false,"static":false}],"projects":[{"title":"Welcome","github":"https://github.com/choldgraf/choldgraf.github.io","id":"f84d70c6-7ee5-4bb9-9056-aa84134a33dd","toc":[{"file":"index.md"},{"file":"about.md"},{"file":"projects.md"},{"file":"publications.md"},{"file":"talks.md"},{"children":[{"children":[{"pattern":"blog/2024/**{.ipynb,.md}"}],"title":"2024"},{"children":[{"pattern":"blog/2023/**{.ipynb,.md}"}],"title":"2023"},{"children":[{"pattern":"blog/2022/**{.ipynb,.md}"}],"title":"2022"},{"children":[{"pattern":"blog/2021/**{.ipynb,.md}"}],"title":"2021"},{"children":[{"pattern":"blog/2020/**{.ipynb,.md}"}],"title":"2020"},{"children":[{"pattern":"blog/2019/**{.ipynb,.md}"}],"title":"2019"},{"children":[{"pattern":"blog/2018/**{.ipynb,.md}"}],"title":"2018"},{"children":[{"pattern":"blog/2017/**{.ipynb,.md}"}],"title":"2017"},{"children":[{"pattern":"blog/2016/**{.ipynb,.md}"}],"title":"2016"},{"children":[{"pattern":"blog/2015/**{.ipynb,.md}"}],"title":"2015"}],"file":"blog.md"}],"thumbnail":"/build/profile-color-circle-92b04648016e37babc767565e5f4bc53.png","exports":[],"bibliography":[],"index":"index","pages":[{"slug":"about","title":"About me","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"projects","title":"Projects","description":"","date":"","thumbnail":"/build/7d9a7172f87d448f4ed0d90adb92d4db.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"publications","title":"Publications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"talks","title":"Talks","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"blog","title":"Blog","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"level":2,"title":"2024"},{"slug":"blog.2024.blog-list","title":"Better blog lists with the MyST AST","description":"","date":"2024-11-09","thumbnail":"/build/sandbox-demo-a1db388249cd91fa956492c8c4bcc1dd.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["myst","jupyter"],"level":3},{"slug":"blog.2024.bluesky","title":"How I’m trying to use BlueSky without getting burned again","description":"Some quick thoughts on moving from Twitter/X to BlueSky and how I'll try to use social media after being burned once by Twitter.\n","date":"2024-11-22","thumbnail":"/build/bluesky-castles-508ecb1af745e4ffba9a8b3699112e66.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["open source","social media"],"level":3},{"slug":"blog.2024.mystmd-with-the-blog","title":"Re-building my blog with MySTMD","description":"","date":"2024-11-01","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"blog.2024.programmatic-myst-with-jupyter","title":"Generate MyST with Jupyter and insert it into content programmatically","description":"","date":"2024-11-04","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["myst","jupyter"],"level":3},{"level":2,"title":"2023"},{"slug":"blog.2023.ai-for-good","title":"A few random opportunities in AI for Social Good","description":"","date":"2023-10-02","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["cloud"],"level":3},{"slug":"blog.2023.fosdem","title":"Report from FOSDEM23: beautiful chaos in a conference","description":"","date":"2023-02-06","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["cloud"],"level":3},{"slug":"blog.2023.social-directive","title":"A Sphinx directive for social media embeds","description":"","date":"2023-02-15","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["sphinx"],"level":3},{"slug":"blog.2023.sphinx-add-extensions","title":"Bundle extensions with your Sphinx theme","description":"","date":"2023-01-19","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["sphinx"],"level":3},{"level":2,"title":"2022"},{"slug":"blog.2022.cloud-services-academia","title":"Ask Twitter: Why don’t academic researchers use cloud services?","description":"","date":"2022-09-05","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["cloud"],"level":3},{"slug":"blog.2022.github-2022","title":"GitHub year in review","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"blog.2022.install-github-from-pyproject","title":"Install dependencies from GitHub with pyproject.toml or requirements.txt","description":"","date":"2022-12-31","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["software development"],"level":3},{"slug":"blog.2022.jupyterlite-workshop","title":"Report from the JupyterLite workshop: WebAssembly is pretty cool","description":"","date":"2022-12-10","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["jupyter","webassembly"],"level":3},{"slug":"blog.2022.matplotlib-remote-font","title":"Load and plot a remote font with Matplotlib","description":"","date":"2022-12-06","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["matplotlib"],"level":3},{"slug":"blog.2022.orcid-auto-update","title":"Automatically updating my publications page with ORCID and doi.org","description":"","date":"2022-11-19","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["scholarship","doi","orcid"],"level":3},{"slug":"blog.2022.phantom-workflows-pull-requests","title":"Fix phantom GitHub workflows in your ci-cd with protected branch rules","description":"","date":"2022-11-27","thumbnail":"/build/abdd690fd5af613c25b40bb16d6ca824.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["cicd","github actions"],"level":3},{"slug":"blog.2022.precommit-autoupdate","title":"Automatically update pre-commit hook versions","description":"","date":"2022-12-03","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","git"],"level":3},{"slug":"blog.2022.shell-split","title":"subprocess.run can execute shell commands directly","description":"","date":"2022-11-29","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["shell","python"],"level":3},{"slug":"blog.2022.sphinx-custom-crossrefs","title":"Custom roles and domains in Sphinx with one line","description":"","date":"2022-11-21","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["sphinx","scholarship","myst"],"level":3},{"slug":"blog.2022.sphinx-redirects-folder","title":"Automatically redirect folders in Sphinx websites","description":"","date":"2022-11-19","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"blog.2022.sphinx-update-config","title":"How to update Sphinx options during the build","description":"","date":"2022-12-05","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["sphinx"],"level":3},{"level":2,"title":"2021"},{"slug":"blog.2021.2021-12-18-hybrid-tutorial-prerecord","title":"Serving in two roles at once via pre-recorded tutorials","description":"","date":"2021-12-17","thumbnail":"/build/9c5f30a4a04a0ddea887b8cfbfca92ce.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["teaching"],"level":3},{"level":2,"title":"2020"},{"slug":"blog.2020.2020-01-22-rst-thoughts","title":"What do people think about rST?","description":"","date":"2020-01-22","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["markup","documentation"],"level":3},{"slug":"blog.2020.organizations-help-oss-guide","title":"Contributing to open source: A short guide for organizations","description":"","date":"2020-11-08","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["open source","sustainability"],"level":3},{"slug":"blog.2020.sphinx-blogging","title":"A new blog with Sphinx","description":"","date":"2020-10-10","thumbnail":"/build/sphinx-logo-2b5bcb5b54634e13eca85ca1f2b9161f.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["sphinx","blogging","jupyter"],"level":3},{"slug":"blog.2020.sphinx-design-timeline","title":"Build a simple timeline with sphinx-design","description":"","date":"2020-01-22","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["markup","documentation"],"level":3},{"level":2,"title":"2019"},{"slug":"blog.2019.2019-01-29-three-things-circleci","title":"Three things I love about CircleCI","description":"","date":"2019-01-29","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["CICD","dev ops","software development"],"level":3},{"slug":"blog.2019.2019-03-16-jupyter-dev","title":"Thoughts from the Jupyter team meeting 2019","description":"","date":"2019-03-30","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["jupyter","community"],"level":3},{"slug":"blog.2019.2019-06-25-a-few-talks","title":"A few recent talks","description":"","date":"2019-06-25","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["talks"],"level":3},{"slug":"blog.2019.2019-10-11-automating-jb","title":"Automating Jupyter Book deployments with CI/CD","description":"","date":"2019-10-11","thumbnail":"/build/jb-auto-build-f1ec774816f882c57d96551bfd8877ef.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["infrastructure"],"level":3},{"slug":"blog.2019.2019-10-13-rust-jupyter-governance","title":"What would Rust-style governance look like in Jupyter?","description":"","date":"2019-10-13","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["governance"],"level":3},{"slug":"blog.2019.2019-10-22-xarray-neuro","title":"Analyzing intracranial electrophysiology data with xarray","description":"","date":"2019-10-22","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["analysis","neuroscience","xarray","open source"],"level":3},{"slug":"blog.2019.2019-10-27-jupyter-governance-python","title":"What would Python-style governance look like in Jupyter?","description":"","date":"2019-10-27","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["governance","open source"],"level":3},{"slug":"blog.2019.2019-11-11-ipynb-pandoc","title":"Testing Pandoc and Jupyter Notebooks","description":"","date":"2019-11-11","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["documentation","pandoc","nbconvert"],"level":3},{"level":2,"title":"2018"},{"slug":"blog.2018.circlci-github","title":"Automatically mirror a github repository with CircleCI","description":"","date":"2018-12-18","thumbnail":"/build/circleci-mirror-depl-ee52ef7f26c637a9601412a93782a171.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["productivity","CICD"],"level":3},{"slug":"blog.2018.circle-docs","title":"Using CircleCI to preview documentation in Pull Requests","description":"","date":"2018-10-16","thumbnail":"/build/sphinx-circle-logos-9aa643e4fb9f7e8d575c222f395c521e.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["documentation","sphinx"],"level":3},{"slug":"blog.2018.conferences-summer-2018","title":"Summer conference report back","description":"","date":"2018-08-01","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","conferences","communities","jupyter"],"level":3},{"slug":"blog.2018.devopsdays-sv-2018","title":"An academic scientist goes to DevOps Days","description":"","date":"2018-05-18","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","open science","devops","jupyterhub","teams"],"level":3},{"slug":"blog.2018.free-labor-partners","title":"Open communities need to be partners, not sources of free labor","description":"","date":"2018-12-05","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["open communities","open culture","sustainability"],"level":3},{"slug":"blog.2018.jekyllmarkdown","title":"Blogging with Jupyter Notebooks and Jekyll using nbconvert templates","description":"","date":"2018-05-23","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","blogging","jekyll"],"level":3},{"slug":"blog.2018.kinds-of-openness","title":"How do projects signal how “open” they are?","description":"","date":"2018-10-26","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["open source","governance","community"],"level":3},{"slug":"blog.2018.makeitpop","title":"Introducing makeitpop, a tool to perceptually warp your data!\"","description":"","date":"2018-06-04","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python colormaps"],"level":3},{"slug":"blog.2018.my-workflow","title":"My weekly workflow","description":"","date":"2018-10-26","thumbnail":"/build/trello-board-project-cf81a3068dcdb61684d38cc29576dbe5.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["productivity"],"level":3},{"slug":"blog.2018.rust-governance","title":"I like Rust’s governance structure","description":"","date":"2018-10-18","thumbnail":"/build/2018-10-19-rust_logo-34ff6bf2c55a4c53f786162049fb6973.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","governance","community"],"level":3},{"slug":"blog.2018.sphinx-copy-buttons","title":"Adding copy buttons to code blocks in Sphinx","description":"","date":"2018-07-05","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","blogging","sphinx","documentation"],"level":3},{"level":2,"title":"2017"},{"slug":"blog.2017.2017-01-04-matplotlib-cycles","title":"Matplotlib Cyclers are Great","description":"","date":"2017-01-04","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","open science","visualizations"],"level":3},{"slug":"blog.2017.2017-03-16-dates-in-python","title":"Dates in python","description":"","date":"2017-03-16","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","open science"],"level":3},{"slug":"blog.2017.2017-11-02-dates-multiple-plots","title":"Combining dates with analysis visualization in python","description":"","date":"2017-11-02","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","open science"],"level":3},{"level":2,"title":"2016"},{"slug":"blog.2016.2016-07-02-fft-time","title":"The beauty of computational efficiency","description":"","date":"2016-07-02","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","programming","computation","efficiency","fft"],"level":3},{"slug":"blog.2016.2016-07-08-voting-randomness","title":"Could Brexit have happened by chance?","description":"","date":"2016-07-08","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","voting","statistics","computation","fft"],"level":3},{"slug":"blog.2016.2016-11-01-5-things-scipy-2016","title":"5 things I learned at SciPy","description":"","date":"2016-11-01","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","open science","programming","conferences"],"level":3},{"slug":"blog.2016.2016-11-01-5-things-scipy-2016-1","title":"1. Scientific conferences can be fun","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"blog.2016.2016-11-30-funnel-plots","title":"Visualizing publication bias","description":"","date":"2016-11-30","thumbnail":"/build/funnel_plot_no_dists-5dbdbb70d49646cebf59865297a14e17.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","funnel plots","open science","visualizations","simulations"],"level":3},{"slug":"blog.2016.2016-12-19-biorxiv-neuro","title":"The bleeding edge of publishing, Scraping publication amounts at biorxiv","description":"","date":"2016-12-19","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","open science","visualizations","web scraping","preprints"],"level":3},{"slug":"blog.2016.2016-12-23-christmas-ecog-plot","title":"Brainy Jingle Bells","description":"","date":"2016-12-23","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","open science","visualizations","brains","holidays"],"level":3},{"level":2,"title":"2015"},{"slug":"blog.2015.2015-05-27-coherence-correlation","title":"Coherence vs. Correlation - a simple simulation","description":"","date":"2015-05-27","thumbnail":"/build/eeg_coh-a49d07ff40c05a204e38e8306ac0a351.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","programming","timeseries","correlation"],"level":3},{"slug":"blog.2015.2015-08-30-craigslist-scrape","title":"Scraping craigslist","description":"","date":"2015-08-30","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","programming"],"level":3},{"slug":"blog.2015.2015-09-27-craigslist-data-analysis","title":"Craigslist data analysis","description":"","date":"2015-09-27","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","scraping","data analysis","visualization"],"level":3},{"slug":"blog.2015.2015-10-29-nih-grant-analysis","title":"NIH grant analysis","description":"","date":"2015-10-29","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","statistics","visualization","grants"],"level":3}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static"},"routes/$":{"config":{"options":{"twitter":"choldgraf","logo_text":"Chris Holdgraf","folders":true},"myst":"1.3.18","nav":[{"title":"About","url":"/about"},{"title":"Projects","url":"/projects"},{"title":"Publications","url":"/publications"},{"title":"Talks","url":"/talks"},{"title":"Blog","url":"/blog"}],"actions":[{"title":"RSS","url":"https://chrisholdgraf.com/rss.xml","internal":false,"static":false}],"projects":[{"title":"Welcome","github":"https://github.com/choldgraf/choldgraf.github.io","id":"f84d70c6-7ee5-4bb9-9056-aa84134a33dd","toc":[{"file":"index.md"},{"file":"about.md"},{"file":"projects.md"},{"file":"publications.md"},{"file":"talks.md"},{"children":[{"children":[{"pattern":"blog/2024/**{.ipynb,.md}"}],"title":"2024"},{"children":[{"pattern":"blog/2023/**{.ipynb,.md}"}],"title":"2023"},{"children":[{"pattern":"blog/2022/**{.ipynb,.md}"}],"title":"2022"},{"children":[{"pattern":"blog/2021/**{.ipynb,.md}"}],"title":"2021"},{"children":[{"pattern":"blog/2020/**{.ipynb,.md}"}],"title":"2020"},{"children":[{"pattern":"blog/2019/**{.ipynb,.md}"}],"title":"2019"},{"children":[{"pattern":"blog/2018/**{.ipynb,.md}"}],"title":"2018"},{"children":[{"pattern":"blog/2017/**{.ipynb,.md}"}],"title":"2017"},{"children":[{"pattern":"blog/2016/**{.ipynb,.md}"}],"title":"2016"},{"children":[{"pattern":"blog/2015/**{.ipynb,.md}"}],"title":"2015"}],"file":"blog.md"}],"thumbnail":"/build/profile-color-circle-92b04648016e37babc767565e5f4bc53.png","exports":[],"bibliography":[],"index":"index","pages":[{"slug":"about","title":"About me","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"projects","title":"Projects","description":"","date":"","thumbnail":"/build/7d9a7172f87d448f4ed0d90adb92d4db.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"publications","title":"Publications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"talks","title":"Talks","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"blog","title":"Blog","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"level":2,"title":"2024"},{"slug":"blog.2024.blog-list","title":"Better blog lists with the MyST AST","description":"","date":"2024-11-09","thumbnail":"/build/sandbox-demo-a1db388249cd91fa956492c8c4bcc1dd.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["myst","jupyter"],"level":3},{"slug":"blog.2024.bluesky","title":"How I’m trying to use BlueSky without getting burned again","description":"Some quick thoughts on moving from Twitter/X to BlueSky and how I'll try to use social media after being burned once by Twitter.\n","date":"2024-11-22","thumbnail":"/build/bluesky-castles-508ecb1af745e4ffba9a8b3699112e66.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["open source","social media"],"level":3},{"slug":"blog.2024.mystmd-with-the-blog","title":"Re-building my blog with MySTMD","description":"","date":"2024-11-01","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"blog.2024.programmatic-myst-with-jupyter","title":"Generate MyST with Jupyter and insert it into content programmatically","description":"","date":"2024-11-04","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["myst","jupyter"],"level":3},{"level":2,"title":"2023"},{"slug":"blog.2023.ai-for-good","title":"A few random opportunities in AI for Social Good","description":"","date":"2023-10-02","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["cloud"],"level":3},{"slug":"blog.2023.fosdem","title":"Report from FOSDEM23: beautiful chaos in a conference","description":"","date":"2023-02-06","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["cloud"],"level":3},{"slug":"blog.2023.social-directive","title":"A Sphinx directive for social media embeds","description":"","date":"2023-02-15","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["sphinx"],"level":3},{"slug":"blog.2023.sphinx-add-extensions","title":"Bundle extensions with your Sphinx theme","description":"","date":"2023-01-19","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["sphinx"],"level":3},{"level":2,"title":"2022"},{"slug":"blog.2022.cloud-services-academia","title":"Ask Twitter: Why don’t academic researchers use cloud services?","description":"","date":"2022-09-05","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["cloud"],"level":3},{"slug":"blog.2022.github-2022","title":"GitHub year in review","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"blog.2022.install-github-from-pyproject","title":"Install dependencies from GitHub with pyproject.toml or requirements.txt","description":"","date":"2022-12-31","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["software development"],"level":3},{"slug":"blog.2022.jupyterlite-workshop","title":"Report from the JupyterLite workshop: WebAssembly is pretty cool","description":"","date":"2022-12-10","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["jupyter","webassembly"],"level":3},{"slug":"blog.2022.matplotlib-remote-font","title":"Load and plot a remote font with Matplotlib","description":"","date":"2022-12-06","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["matplotlib"],"level":3},{"slug":"blog.2022.orcid-auto-update","title":"Automatically updating my publications page with ORCID and doi.org","description":"","date":"2022-11-19","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["scholarship","doi","orcid"],"level":3},{"slug":"blog.2022.phantom-workflows-pull-requests","title":"Fix phantom GitHub workflows in your ci-cd with protected branch rules","description":"","date":"2022-11-27","thumbnail":"/build/abdd690fd5af613c25b40bb16d6ca824.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["cicd","github actions"],"level":3},{"slug":"blog.2022.precommit-autoupdate","title":"Automatically update pre-commit hook versions","description":"","date":"2022-12-03","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","git"],"level":3},{"slug":"blog.2022.shell-split","title":"subprocess.run can execute shell commands directly","description":"","date":"2022-11-29","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["shell","python"],"level":3},{"slug":"blog.2022.sphinx-custom-crossrefs","title":"Custom roles and domains in Sphinx with one line","description":"","date":"2022-11-21","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["sphinx","scholarship","myst"],"level":3},{"slug":"blog.2022.sphinx-redirects-folder","title":"Automatically redirect folders in Sphinx websites","description":"","date":"2022-11-19","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"blog.2022.sphinx-update-config","title":"How to update Sphinx options during the build","description":"","date":"2022-12-05","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["sphinx"],"level":3},{"level":2,"title":"2021"},{"slug":"blog.2021.2021-12-18-hybrid-tutorial-prerecord","title":"Serving in two roles at once via pre-recorded tutorials","description":"","date":"2021-12-17","thumbnail":"/build/9c5f30a4a04a0ddea887b8cfbfca92ce.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["teaching"],"level":3},{"level":2,"title":"2020"},{"slug":"blog.2020.2020-01-22-rst-thoughts","title":"What do people think about rST?","description":"","date":"2020-01-22","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["markup","documentation"],"level":3},{"slug":"blog.2020.organizations-help-oss-guide","title":"Contributing to open source: A short guide for organizations","description":"","date":"2020-11-08","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["open source","sustainability"],"level":3},{"slug":"blog.2020.sphinx-blogging","title":"A new blog with Sphinx","description":"","date":"2020-10-10","thumbnail":"/build/sphinx-logo-2b5bcb5b54634e13eca85ca1f2b9161f.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["sphinx","blogging","jupyter"],"level":3},{"slug":"blog.2020.sphinx-design-timeline","title":"Build a simple timeline with sphinx-design","description":"","date":"2020-01-22","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["markup","documentation"],"level":3},{"level":2,"title":"2019"},{"slug":"blog.2019.2019-01-29-three-things-circleci","title":"Three things I love about CircleCI","description":"","date":"2019-01-29","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["CICD","dev ops","software development"],"level":3},{"slug":"blog.2019.2019-03-16-jupyter-dev","title":"Thoughts from the Jupyter team meeting 2019","description":"","date":"2019-03-30","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["jupyter","community"],"level":3},{"slug":"blog.2019.2019-06-25-a-few-talks","title":"A few recent talks","description":"","date":"2019-06-25","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["talks"],"level":3},{"slug":"blog.2019.2019-10-11-automating-jb","title":"Automating Jupyter Book deployments with CI/CD","description":"","date":"2019-10-11","thumbnail":"/build/jb-auto-build-f1ec774816f882c57d96551bfd8877ef.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["infrastructure"],"level":3},{"slug":"blog.2019.2019-10-13-rust-jupyter-governance","title":"What would Rust-style governance look like in Jupyter?","description":"","date":"2019-10-13","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["governance"],"level":3},{"slug":"blog.2019.2019-10-22-xarray-neuro","title":"Analyzing intracranial electrophysiology data with xarray","description":"","date":"2019-10-22","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["analysis","neuroscience","xarray","open source"],"level":3},{"slug":"blog.2019.2019-10-27-jupyter-governance-python","title":"What would Python-style governance look like in Jupyter?","description":"","date":"2019-10-27","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["governance","open source"],"level":3},{"slug":"blog.2019.2019-11-11-ipynb-pandoc","title":"Testing Pandoc and Jupyter Notebooks","description":"","date":"2019-11-11","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["documentation","pandoc","nbconvert"],"level":3},{"level":2,"title":"2018"},{"slug":"blog.2018.circlci-github","title":"Automatically mirror a github repository with CircleCI","description":"","date":"2018-12-18","thumbnail":"/build/circleci-mirror-depl-ee52ef7f26c637a9601412a93782a171.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["productivity","CICD"],"level":3},{"slug":"blog.2018.circle-docs","title":"Using CircleCI to preview documentation in Pull Requests","description":"","date":"2018-10-16","thumbnail":"/build/sphinx-circle-logos-9aa643e4fb9f7e8d575c222f395c521e.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["documentation","sphinx"],"level":3},{"slug":"blog.2018.conferences-summer-2018","title":"Summer conference report back","description":"","date":"2018-08-01","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","conferences","communities","jupyter"],"level":3},{"slug":"blog.2018.devopsdays-sv-2018","title":"An academic scientist goes to DevOps Days","description":"","date":"2018-05-18","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","open science","devops","jupyterhub","teams"],"level":3},{"slug":"blog.2018.free-labor-partners","title":"Open communities need to be partners, not sources of free labor","description":"","date":"2018-12-05","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["open communities","open culture","sustainability"],"level":3},{"slug":"blog.2018.jekyllmarkdown","title":"Blogging with Jupyter Notebooks and Jekyll using nbconvert templates","description":"","date":"2018-05-23","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","blogging","jekyll"],"level":3},{"slug":"blog.2018.kinds-of-openness","title":"How do projects signal how “open” they are?","description":"","date":"2018-10-26","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["open source","governance","community"],"level":3},{"slug":"blog.2018.makeitpop","title":"Introducing makeitpop, a tool to perceptually warp your data!\"","description":"","date":"2018-06-04","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python colormaps"],"level":3},{"slug":"blog.2018.my-workflow","title":"My weekly workflow","description":"","date":"2018-10-26","thumbnail":"/build/trello-board-project-cf81a3068dcdb61684d38cc29576dbe5.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["productivity"],"level":3},{"slug":"blog.2018.rust-governance","title":"I like Rust’s governance structure","description":"","date":"2018-10-18","thumbnail":"/build/2018-10-19-rust_logo-34ff6bf2c55a4c53f786162049fb6973.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","governance","community"],"level":3},{"slug":"blog.2018.sphinx-copy-buttons","title":"Adding copy buttons to code blocks in Sphinx","description":"","date":"2018-07-05","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","blogging","sphinx","documentation"],"level":3},{"level":2,"title":"2017"},{"slug":"blog.2017.2017-01-04-matplotlib-cycles","title":"Matplotlib Cyclers are Great","description":"","date":"2017-01-04","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","open science","visualizations"],"level":3},{"slug":"blog.2017.2017-03-16-dates-in-python","title":"Dates in python","description":"","date":"2017-03-16","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","open science"],"level":3},{"slug":"blog.2017.2017-11-02-dates-multiple-plots","title":"Combining dates with analysis visualization in python","description":"","date":"2017-11-02","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","open science"],"level":3},{"level":2,"title":"2016"},{"slug":"blog.2016.2016-07-02-fft-time","title":"The beauty of computational efficiency","description":"","date":"2016-07-02","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","programming","computation","efficiency","fft"],"level":3},{"slug":"blog.2016.2016-07-08-voting-randomness","title":"Could Brexit have happened by chance?","description":"","date":"2016-07-08","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","voting","statistics","computation","fft"],"level":3},{"slug":"blog.2016.2016-11-01-5-things-scipy-2016","title":"5 things I learned at SciPy","description":"","date":"2016-11-01","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","open science","programming","conferences"],"level":3},{"slug":"blog.2016.2016-11-01-5-things-scipy-2016-1","title":"1. Scientific conferences can be fun","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"blog.2016.2016-11-30-funnel-plots","title":"Visualizing publication bias","description":"","date":"2016-11-30","thumbnail":"/build/funnel_plot_no_dists-5dbdbb70d49646cebf59865297a14e17.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","funnel plots","open science","visualizations","simulations"],"level":3},{"slug":"blog.2016.2016-12-19-biorxiv-neuro","title":"The bleeding edge of publishing, Scraping publication amounts at biorxiv","description":"","date":"2016-12-19","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","open science","visualizations","web scraping","preprints"],"level":3},{"slug":"blog.2016.2016-12-23-christmas-ecog-plot","title":"Brainy Jingle Bells","description":"","date":"2016-12-23","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","open science","visualizations","brains","holidays"],"level":3},{"level":2,"title":"2015"},{"slug":"blog.2015.2015-05-27-coherence-correlation","title":"Coherence vs. Correlation - a simple simulation","description":"","date":"2015-05-27","thumbnail":"/build/eeg_coh-a49d07ff40c05a204e38e8306ac0a351.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","programming","timeseries","correlation"],"level":3},{"slug":"blog.2015.2015-08-30-craigslist-scrape","title":"Scraping craigslist","description":"","date":"2015-08-30","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","programming"],"level":3},{"slug":"blog.2015.2015-09-27-craigslist-data-analysis","title":"Craigslist data analysis","description":"","date":"2015-09-27","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","scraping","data analysis","visualization"],"level":3},{"slug":"blog.2015.2015-10-29-nih-grant-analysis","title":"NIH grant analysis","description":"","date":"2015-10-29","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","statistics","visualization","grants"],"level":3}]}]},"page":{"kind":"Notebook","sha256":"19c6513ab4a28a98ae0347ba724ddf553cd14ed057bc3bc9cfdc367db1021f38","slug":"blog.2015.2015-08-30-craigslist-scrape","location":"/blog/2015/2015-08-30-craigslist_scrape.ipynb","dependencies":[],"frontmatter":{"title":"Scraping craigslist","tags":["python","programming"],"date":"2015-08-30","kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"content_includes_title":false,"github":"https://github.com/choldgraf/choldgraf.github.io","exports":[{"format":"ipynb","filename":"2015-08-30-craigslist_scrape.ipynb","url":"/build/2015-08-30-craigslis-8fb6b83af7d35eb8ec498b4656f840cd.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Overview","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"bQW7BBUQE9"}],"identifier":"overview","label":"Overview","html_id":"overview","implicit":true,"key":"j76u2AtLFg"},{"type":"paragraph","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"In this notebook, I’ll show you how to make a simple query on Craigslist using some nifty python modules. You can take advantage of all the structure data that exists on webpages to collect interesting datasets.","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"ob1RrRArZS"}],"key":"v7Vu1agR7Y"}],"key":"xBqaKEBqOl"},{"type":"block","kind":"notebook-code","data":{"collapsed":false,"jupyter":{"outputs_hidden":false}},"children":[{"type":"code","lang":"python","executable":true,"value":"import pandas as pd\nfrom bs4 import BeautifulSoup as bs4\n%pylab inline","key":"nqT89WnH0U"},{"type":"output","id":"jQeWEppsU-7DvZ2HShNAG","data":[],"key":"unCAA0hWG2"}],"key":"UsKkvfXlGU"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"First we need to figure out how to submit a query to Craigslist. As with many websites, one way you can do this is simply by constructing the proper URL and sending it to Craigslist. Here’s a sample URL that is returned after manually typing in a search to Craigslist:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rqKtjr6H2V"}],"key":"zxYmfXW0qO"},{"type":"blockquote","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"inlineCode","value":"http://sfbay.craigslist.org/search/eby/apa?bedrooms=1\u0026pets_cat=1\u0026pets_dog=1\u0026is_furnished=1","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"kzNk4oG9Qb"}],"key":"WRyociv9Ja"}],"key":"AwgyQpkxlo"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"This is actually two separate things. The first tells craigslist what kind of thing we’re searching for:","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"LZbUu4GWaf"}],"key":"jYUZqkgulg"},{"type":"blockquote","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"inlineCode","value":"http://sfbay.craigslist.org/search/eby/apa","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"gGJgVCAisY"},{"type":"text","value":" says we’re searching in the sfbay area (","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"ORHD3i98TU"},{"type":"inlineCode","value":"sfbay","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"bL6z4DjIVi"},{"type":"text","value":") for apartments (","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Ynu0RCK83b"},{"type":"inlineCode","value":"apa","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"AtywsnyRM4"},{"type":"text","value":") in the east bay (","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"m9cCqRpAvt"},{"type":"inlineCode","value":"eby","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"ndPdOM5smT"},{"type":"text","value":").","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"XeRaHOt5qo"}],"key":"y8iIEDpBl7"}],"key":"oMQ6Y9TQCo"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"The second part contains the parameters that we pass to the search:","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"wsTOwc9Rsn"}],"key":"pZ7UOZgV2U"},{"type":"blockquote","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"inlineCode","value":"?bedrooms=1\u0026pets_cat=1\u0026pets_dog=1\u0026is_furnished=1","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"j53KUH6lbI"},{"type":"text","value":" says we want 1+ bedrooms, cats allowed, dogs allowed, and furnished apartments. You can manually change these fields in order to create new queries.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"Lj8Dbo4q64"}],"key":"xPNbdqdmJw"}],"key":"Ph7Koxj1gR"},{"type":"heading","depth":2,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Getting a single posting","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"CqhreIy3CN"}],"identifier":"getting-a-single-posting","label":"Getting a single posting","html_id":"getting-a-single-posting","implicit":true,"key":"JHehDPmccH"},{"type":"paragraph","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"So, we’ll use this knowledge to send some custom URLs to Craigslist. We’ll do this using the ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"VBzM0pZhY8"},{"type":"inlineCode","value":"requests","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"UN5PA2oDSy"},{"type":"text","value":" python module, which is really useful for querying websites.","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"n84CCxO1cF"}],"key":"n9hCxWqsvi"}],"key":"LvkQUWwPcT"},{"type":"block","kind":"notebook-code","data":{"collapsed":true,"jupyter":{"outputs_hidden":true}},"children":[{"type":"code","lang":"python","executable":true,"value":"import requests","key":"gJa5mgemjK"},{"type":"output","id":"DIpBhTkYtTQQEAMHk06yU","data":[],"key":"kZWjLBLnN9"}],"key":"tkERDNQJOg"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In internet lingo, we’re posting a ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uASWAtrl70"},{"type":"inlineCode","value":"get","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ljap89CANZ"},{"type":"text","value":" requests to the website, which simply says that we’d like to get some information from the Craigslist website.  With requests, we can easily create a dictionary that specifies parameters in the URL:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LEiJZ5PxnM"}],"key":"p6RdKhe6mO"}],"key":"wuekdqizon"},{"type":"block","kind":"notebook-code","data":{"collapsed":true,"jupyter":{"outputs_hidden":true}},"children":[{"type":"code","lang":"python","executable":true,"value":"url_base = 'http://sfbay.craigslist.org/search/eby/apa'\nparams = dict(bedrooms=1, is_furnished=1)\nrsp = requests.get(url_base, params=params)","key":"HDlxTgTmHu"},{"type":"output","id":"fdE2bJEUogS5j1T96u_DY","data":[],"key":"GIAu6NyYTG"}],"key":"sVzc45fGr9"},{"type":"block","kind":"notebook-code","data":{"collapsed":false,"jupyter":{"outputs_hidden":false}},"children":[{"type":"code","lang":"python","executable":true,"value":"# Note that requests automatically created the right URL:\nprint(rsp.url)","key":"KgClyCaxqc"},{"type":"output","id":"bdOKxo4HFv4CRK6Tdo9bE","data":[],"key":"TCRtwvEKnj"}],"key":"OZhnXsslAz"},{"type":"block","kind":"notebook-code","data":{"collapsed":false,"jupyter":{"outputs_hidden":false}},"children":[{"type":"code","lang":"python","executable":true,"value":"# We can access the content of the response that Craigslist sent back here:\nprint(rsp.text[:500])","key":"cutxx2kUJ0"},{"type":"output","id":"h3uaVktqFMDHyMt-Gf8Ac","data":[],"key":"KZpifeBL1L"}],"key":"vFCGMKd3IX"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Wow, that’s a lot of code. Remember, websites serve HTML documents, and usually your browser will automatically render this into a nice webpage for you. Since we’re doing this with python, we get back the raw text. This is really useful, but how can we possibly parse it all?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GESkfroZiu"}],"key":"y5BBsVkRA8"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"For this, we’ll turn to another great package, BeautifulSoup:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"utHcfjSbSM"}],"key":"KjeC5EyEuY"}],"key":"EhzpBNTTE2"},{"type":"block","kind":"notebook-code","data":{"collapsed":false,"jupyter":{"outputs_hidden":false}},"children":[{"type":"code","lang":"python","executable":true,"value":"# BS4 can quickly parse our text, make sure to tell it that you're giving html\nhtml = bs4(rsp.text, 'html.parser')\n\n# BS makes it easy to look through a document\nprint(html.prettify()[:1000])","key":"rg4hZMyfnI"},{"type":"output","id":"FVTvk6EJ-4Z2KadFjMo5X","data":[],"key":"Db2K2OooBA"}],"key":"WlZT6JIUMV"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Beautiful soup lets us quickly search through an HTML document. We can pull out whatever information we want.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AeuhqTPqQ9"}],"key":"cytdN9VFH7"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Scanning through this text, we see a common structure repeated ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NkbzoiQz4I"},{"type":"inlineCode","value":"\u003cp class=\"row\"\u003e","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"uuNmSVnLa3"},{"type":"text","value":". This seems to be the container that has information for a single apartment.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ixt88fjbId"}],"key":"SdL1IN4eSc"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"In BeautifulSoup, we can quickly get all instances of this container:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"SWN2WPKjaB"}],"key":"g4Ib2GI6f7"}],"key":"UOesBGTWST"},{"type":"block","kind":"notebook-code","data":{"collapsed":false,"jupyter":{"outputs_hidden":false}},"children":[{"type":"code","lang":"python","executable":true,"value":"# find_all will pull entries that fit your search criteria.\n# Note that we have to use brackets to define the `attrs` dictionary\n# Because \"class\" is a special word in python, so we need to give a string.\napts = html.find_all('p', attrs={'class': 'row'})\nprint(len(apts))","key":"kt4gkXcoZD"},{"type":"output","id":"OJDbWNrEAw8dtonJF565z","data":[],"key":"gP82102Ybk"}],"key":"G01ZhgyxG9"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now let’s look inside the values of a single apartment listing:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RmcyI1EPfe"}],"key":"BLgMM0q7S2"}],"key":"ZSQcaq8eTJ"},{"type":"block","kind":"notebook-code","data":{"collapsed":false,"jupyter":{"outputs_hidden":false}},"children":[{"type":"code","lang":"python","executable":true,"value":"# We can see that there's a consistent structure to a listing.\n# There is a 'time', a 'name', a 'housing' field with size/n_brs, etc.\nthis_appt = apts[15]\nprint(this_appt.prettify())","key":"JTqD73Ew6g"},{"type":"output","id":"GqWwrFAREEazVOjXJCeX8","data":[{"ename":"IndexError","evalue":"list index out of range","output_type":"error","traceback":"\u001b[0;31m---------------------------------------------------------------------------\u001b[0m\n\u001b[0;31mIndexError\u001b[0m                                Traceback (most recent call last)\n\u001b[0;32m\u003cipython-input-8-b82880a42248\u003e\u001b[0m in \u001b[0;36m\u003cmodule\u003e\u001b[0;34m()\u001b[0m\n\u001b[1;32m      1\u001b[0m \u001b[0;31m# We can see that there's a consistent structure to a listing.\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m      2\u001b[0m \u001b[0;31m# There is a 'time', a 'name', a 'housing' field with size/n_brs, etc.\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m----\u003e 3\u001b[0;31m \u001b[0mthis_appt\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mapts\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;36m15\u001b[0m\u001b[0;34m]\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m      4\u001b[0m \u001b[0;32mprint\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mthis_appt\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mprettify\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\n\u001b[0;31mIndexError\u001b[0m: list index out of range"}],"key":"zhNaCiqoFP"}],"key":"dytQ2Cyc9K"},{"type":"block","kind":"notebook-code","data":{"collapsed":false,"jupyter":{"outputs_hidden":false}},"children":[{"type":"code","lang":"python","executable":true,"value":"# So now we'll pull out a couple of things we might be interested in:\n# It looks like \"housing\" contains size information. We'll pull that.\n# Note that `findAll` returns a list, since there's only one entry in\n# this HTML, we'll just pull the first item.\nsize = this_appt.findAll(attrs={'class': 'housing'})[0].text\nprint(size)","key":"fGOAZva3kg"},{"type":"output","id":"Nj3brNHsF_Lr0lRns9kHW","data":[{"ename":"NameError","evalue":"name 'this_appt' is not defined","output_type":"error","traceback":"\u001b[0;31m---------------------------------------------------------------------------\u001b[0m\n\u001b[0;31mNameError\u001b[0m                                 Traceback (most recent call last)\n\u001b[0;32m\u003cipython-input-9-4fb8a04b88f7\u003e\u001b[0m in \u001b[0;36m\u003cmodule\u003e\u001b[0;34m()\u001b[0m\n\u001b[1;32m      3\u001b[0m \u001b[0;31m# Note that `findAll` returns a list, since there's only one entry in\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m      4\u001b[0m \u001b[0;31m# this HTML, we'll just pull the first item.\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m----\u003e 5\u001b[0;31m \u001b[0msize\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mthis_appt\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mfindAll\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mattrs\u001b[0m\u001b[0;34m=\u001b[0m\u001b[0;34m{\u001b[0m\u001b[0;34m'class'\u001b[0m\u001b[0;34m:\u001b[0m \u001b[0;34m'housing'\u001b[0m\u001b[0;34m}\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;36m0\u001b[0m\u001b[0;34m]\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mtext\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m      6\u001b[0m \u001b[0;32mprint\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0msize\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\n\u001b[0;31mNameError\u001b[0m: name 'this_appt' is not defined"}],"key":"RKBdF0ZIqX"}],"key":"q5NcI0fUUs"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can query split this into n_bedrooms and the size. However, note that sometimes one of these features might be missing. So we’ll use an ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"f6eiqw1qgC"},{"type":"inlineCode","value":"if","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"euuz7m5twq"},{"type":"text","value":" statement to try and capture this variability:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ozjaBY0q2s"}],"key":"ozZ0qQW3mu"}],"key":"EFdhYqbQF8"},{"type":"block","kind":"notebook-code","data":{"collapsed":false,"jupyter":{"outputs_hidden":false}},"children":[{"type":"code","lang":"python","executable":true,"value":"def find_size_and_brs(size):\n    split = size.strip('/- ').split(' - ')\n    if len(split) == 2:\n        n_brs = split[0].replace('br', '')\n        this_size = split[1].replace('ft2', '')\n    elif 'br' in split[0]:\n        # It's the n_bedrooms\n        n_brs = split[0].replace('br', '')\n        this_size = np.nan\n    elif 'ft2' in split[0]:\n        # It's the size\n        this_size = split[0].replace('ft2', '')\n        n_brs = np.nan\n    return float(this_size), float(n_brs)\nthis_size, n_brs = find_size_and_brs(size)","key":"ra9d6gHASo"},{"type":"output","id":"4dF2KvT9VExVC8Wog5sMq","data":[{"ename":"AttributeError","evalue":"'function' object has no attribute 'strip'","output_type":"error","traceback":"\u001b[0;31m---------------------------------------------------------------------------\u001b[0m\n\u001b[0;31mAttributeError\u001b[0m                            Traceback (most recent call last)\n\u001b[0;32m\u003cipython-input-10-56ab1d345ab4\u003e\u001b[0m in \u001b[0;36m\u003cmodule\u003e\u001b[0;34m()\u001b[0m\n\u001b[1;32m     13\u001b[0m         \u001b[0mn_brs\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mnp\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mnan\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m     14\u001b[0m     \u001b[0;32mreturn\u001b[0m \u001b[0mfloat\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mthis_size\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mfloat\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mn_brs\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m---\u003e 15\u001b[0;31m \u001b[0mthis_size\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mn_brs\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mfind_size_and_brs\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0msize\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\n\u001b[0;32m\u003cipython-input-10-56ab1d345ab4\u003e\u001b[0m in \u001b[0;36mfind_size_and_brs\u001b[0;34m(size)\u001b[0m\n\u001b[1;32m      1\u001b[0m \u001b[0;32mdef\u001b[0m \u001b[0mfind_size_and_brs\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0msize\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m----\u003e 2\u001b[0;31m     \u001b[0msplit\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0msize\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mstrip\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m'/- '\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0msplit\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m' - '\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m      3\u001b[0m     \u001b[0;32mif\u001b[0m \u001b[0mlen\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0msplit\u001b[0m\u001b[0;34m)\u001b[0m \u001b[0;34m==\u001b[0m \u001b[0;36m2\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m      4\u001b[0m         \u001b[0mn_brs\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0msplit\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;36m0\u001b[0m\u001b[0;34m]\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mreplace\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m'br'\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;34m''\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m      5\u001b[0m         \u001b[0mthis_size\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0msplit\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;36m1\u001b[0m\u001b[0;34m]\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mreplace\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m'ft2'\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;34m''\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\n\u001b[0;31mAttributeError\u001b[0m: 'function' object has no attribute 'strip'"}],"key":"EUF8KCtLOP"}],"key":"XWlbgSrRnp"},{"type":"block","kind":"notebook-code","data":{"collapsed":false,"jupyter":{"outputs_hidden":false}},"children":[{"type":"code","lang":"python","executable":true,"value":"# Now we'll also pull a few other things:\nthis_time = this_appt.find('time')['datetime']\nthis_time = pd.to_datetime(this_time)\nthis_price = float(this_appt.find('span', {'class': 'price'}).text.strip('$'))\nthis_title = this_appt.find('a', attrs={'class': 'hdrlnk'}).text","key":"tAKLkpU6Q6"},{"type":"output","id":"Xr0sg44_yXArGdzm2A0wF","data":[{"ename":"NameError","evalue":"name 'this_appt' is not defined","output_type":"error","traceback":"\u001b[0;31m---------------------------------------------------------------------------\u001b[0m\n\u001b[0;31mNameError\u001b[0m                                 Traceback (most recent call last)\n\u001b[0;32m\u003cipython-input-11-bc17374a1087\u003e\u001b[0m in \u001b[0;36m\u003cmodule\u003e\u001b[0;34m()\u001b[0m\n\u001b[1;32m      1\u001b[0m \u001b[0;31m# Now we'll also pull a few other things:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m----\u003e 2\u001b[0;31m \u001b[0mthis_time\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mthis_appt\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mfind\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m'time'\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;34m'datetime'\u001b[0m\u001b[0;34m]\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m      3\u001b[0m \u001b[0mthis_time\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mpd\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mto_datetime\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mthis_time\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m      4\u001b[0m \u001b[0mthis_price\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mfloat\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mthis_appt\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mfind\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m'span'\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;34m{\u001b[0m\u001b[0;34m'class'\u001b[0m\u001b[0;34m:\u001b[0m \u001b[0;34m'price'\u001b[0m\u001b[0;34m}\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mtext\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mstrip\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m'$'\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m      5\u001b[0m \u001b[0mthis_title\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mthis_appt\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mfind\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m'a'\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mattrs\u001b[0m\u001b[0;34m=\u001b[0m\u001b[0;34m{\u001b[0m\u001b[0;34m'class'\u001b[0m\u001b[0;34m:\u001b[0m \u001b[0;34m'hdrlnk'\u001b[0m\u001b[0;34m}\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mtext\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\n\u001b[0;31mNameError\u001b[0m: name 'this_appt' is not defined"}],"key":"lr29Y87HMI"}],"key":"nCDU2zDsVH"},{"type":"block","kind":"notebook-code","data":{"collapsed":false,"jupyter":{"outputs_hidden":false}},"children":[{"type":"code","lang":"python","executable":true,"value":"# Now we've got the n_bedrooms, size, price, and time of listing\nprint('\\n'.join([str(i) for i in [this_size, n_brs, this_time, this_price, this_title]]))","key":"gVdwFt0Nhk"},{"type":"output","id":"WfmjNd4yGkjKCfI_V_2QS","data":[{"ename":"NameError","evalue":"name 'this_size' is not defined","output_type":"error","traceback":"\u001b[0;31m---------------------------------------------------------------------------\u001b[0m\n\u001b[0;31mNameError\u001b[0m                                 Traceback (most recent call last)\n\u001b[0;32m\u003cipython-input-12-6b0491d04915\u003e\u001b[0m in \u001b[0;36m\u003cmodule\u003e\u001b[0;34m()\u001b[0m\n\u001b[1;32m      1\u001b[0m \u001b[0;31m# Now we've got the n_bedrooms, size, price, and time of listing\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m----\u003e 2\u001b[0;31m \u001b[0;32mprint\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m'\\n'\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mjoin\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0mstr\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mi\u001b[0m\u001b[0;34m)\u001b[0m \u001b[0;32mfor\u001b[0m \u001b[0mi\u001b[0m \u001b[0;32min\u001b[0m \u001b[0;34m[\u001b[0m\u001b[0mthis_size\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mn_brs\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mthis_time\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mthis_price\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mthis_title\u001b[0m\u001b[0;34m]\u001b[0m\u001b[0;34m]\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\n\u001b[0;31mNameError\u001b[0m: name 'this_size' is not defined"}],"key":"uwo8SHzCCM"}],"key":"YuCouOI554"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Querying lots of postings","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BiiWeAg6Bn"}],"identifier":"querying-lots-of-postings","label":"Querying lots of postings","html_id":"querying-lots-of-postings","implicit":true,"key":"p87OGMvGVp"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Cool - so now we’ve got some useful information about one listing. Now let’s loop through many listings across several locations.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"X7jJgyVbIO"}],"key":"orZGYQP44X"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"It looks like there is a “city code” that distinguishes where you’re searching. Here is a ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"qpNpejc8dp"},{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"not","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"WSRSnSKOrk"}],"key":"cE1m1piF6I"},{"type":"text","value":" up to date list: ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"urSohljBUd"},{"type":"link","url":"https://sites.google.com/site/clsiteinfo/city-site-code-sort","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"link","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"J75q3Zg4iV"}],"urlSource":"https://sites.google.com/site/clsiteinfo/city-site-code-sort","key":"Bvs9gYq5jn"}],"key":"NumA3mj3PN"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Within the Bay Area, there are also a lot of sub-regional locations, which we’ll define here, then loop through them all.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"W8i6wy6TrQ"}],"key":"DD8BbNPOsZ"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Note that the ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"X7PB2yNpI7"},{"type":"inlineCode","value":"s","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"YXTrEaauXr"},{"type":"text","value":" parameter tells Craiglist where to start in terms of the number of results given back. E.g., if s==100, then it starts at the 100th entry.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Dq7kgnlvL4"}],"key":"GJAtAONYYt"}],"key":"b6vN78TQ4l"},{"type":"block","kind":"notebook-code","data":{"collapsed":true,"jupyter":{"outputs_hidden":true}},"children":[{"type":"code","lang":"python","executable":true,"value":"loc_prefixes = ['eby', 'nby', 'sfc', 'sby', 'scz']","key":"FCTaFqabDt"},{"type":"output","id":"jESkB5OXrUyGrIvBy8gwY","data":[],"key":"yzp81GXupv"}],"key":"dAZMLSMz9h"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We’ll define a few helper functions to handle edge cases and make sure that we don’t get any errors.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SXPzrYHNy8"}],"key":"udX3CZEGMG"}],"key":"o2SbFkJU6U"},{"type":"block","kind":"notebook-code","data":{"collapsed":false,"jupyter":{"outputs_hidden":false}},"children":[{"type":"code","lang":"python","executable":true,"value":"def find_prices(results):\n    prices = []\n    for rw in results:\n        price = rw.find('span', attrs={'class': 'result-price'})\n        if price is not None:\n            price = float(price.text.strip('$'))\n        else:\n            price = np.nan\n        prices.append(price)\n    return prices\n\ndef find_times(results):\n    times = []\n    for rw in apts:\n        if time is not None:\n            time = time['datetime']\n            time = pd.to_datetime(time)\n        else:\n            time = np.nan\n        times.append(time)\n    return times","key":"p82oQ0CfGI"},{"type":"output","id":"L5LxBlCcebi-RUCvHGM2b","data":[],"key":"Kif6zFNCkp"}],"key":"zedQ8JPZOU"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now we’re ready to go. We’ll loop through all of our locations, and pull a number of entries for each one. We’ll use a pandas dataframe to store everything, because this will be useful for future analysis.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TPuqxrw5v1"}],"key":"UarrPoHfp7"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Note","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vtSnRVsMz9"}],"key":"gdQEAkg64M"},{"type":"text","value":" - Craigslist won’t take kindly to you querying their server a bunch of times at once. Make sure not to pull too much data too quickly. Another option is to add a delay to each loop iteration. Otherwise your IP might get banned.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"XrMMzDgLxJ"}],"key":"DE8P2EzLK2"}],"key":"vRcuDlxX6T"},{"type":"block","kind":"notebook-code","data":{"collapsed":false,"jupyter":{"outputs_hidden":false}},"children":[{"type":"code","lang":"python","executable":true,"value":"print(txt.prettify())","key":"nVx6Uuuunk"},{"type":"output","id":"k59Ehzqcs-ZUZ-oNblid3","data":[{"ename":"NameError","evalue":"name 'txt' is not defined","output_type":"error","traceback":"\u001b[0;31m---------------------------------------------------------------------------\u001b[0m\n\u001b[0;31mNameError\u001b[0m                                 Traceback (most recent call last)\n\u001b[0;32m\u003cipython-input-9-97e76ea257b9\u003e\u001b[0m in \u001b[0;36m\u003cmodule\u003e\u001b[0;34m()\u001b[0m\n\u001b[0;32m----\u003e 1\u001b[0;31m \u001b[0;32mprint\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mtxt\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mprettify\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\n\u001b[0;31mNameError\u001b[0m: name 'txt' is not defined"}],"key":"TX1wB6vSMR"}],"key":"JpvQDn1hTF"},{"type":"block","kind":"notebook-code","data":{"collapsed":false,"jupyter":{"outputs_hidden":false}},"children":[{"type":"code","lang":"python","executable":true,"value":"def find_size_and_brs(size):\n    split = size.strip().split('\\n')\n    split = [ii.strip().strip(' -') for ii in split]\n    if len(split) == 2:\n        n_brs = split[0].replace('br', '')\n        this_size = split[1].replace('ft2', '')\n    elif 'br' in split[0]:\n        # It's the n_bedrooms\n        n_brs = split[0].replace('br', '')\n        this_size = np.nan\n    elif 'ft2' in split[0]:\n        # It's the size\n        this_size = split[0].replace('ft2', '')\n        n_brs = np.nan\n    return float(this_size), float(n_brs)","key":"Hp5LJrJzyL"},{"type":"output","id":"VbVQd1RxKo6kUxEOc8yZi","data":[],"key":"M7ZK1hFIwq"}],"key":"gYsfTXfyvg"},{"type":"block","kind":"notebook-code","data":{"collapsed":false,"jupyter":{"outputs_hidden":false}},"children":[{"type":"code","lang":"python","executable":true,"value":"# Now loop through all of this and store the results\nresults = []  # We'll store the data here\n# Careful with this...too many queries == your IP gets banned temporarily\nsearch_indices = np.arange(0, 500, 100)\nloc_prefixes = ['eby']\nfor loc in loc_prefixes:\n    print loc\n    for i in search_indices:\n        url = 'http://sfbay.craigslist.org/search/{0}/apa'.format(loc)\n        resp = requests.get(url, params={'bedrooms': 1, 's': i})\n        txt = bs4(resp.text, 'html.parser')\n        apts = txt.findAll(attrs={'class': \"result-info\"})\n\n        # Find the size of all entries\n        size_text = [rw.findAll(attrs={'class': 'housing'})[0].text\n                     for rw in apts]\n        sizes_brs = [find_size_and_brs(stxt) for stxt in size_text]\n        sizes, n_brs = zip(*sizes_brs)  # This unzips into 2 vectors\n\n        # Find the title and link\n        title = [rw.find('a', attrs={'class': 'hdrlnk'}).text\n                      for rw in apts]\n        links = [rw.find('a', attrs={'class': 'hdrlnk'})['href']\n                 for rw in apts]\n\n        # Find the time\n        time = [pd.to_datetime(rw.find('time')['datetime']) for rw in apts]\n        price = find_prices(apts)\n\n        # We'll create a dataframe to store all the data\n        data = np.array([time, price, sizes, n_brs, title, links])\n        col_names = ['time', 'price', 'size', 'brs', 'title', 'link']\n        df = pd.DataFrame(data.T, columns=col_names)\n        df = df.set_index('time')\n\n        # Add the location variable to all entries\n        df['loc'] = loc\n        results.append(df)\n        \n# Finally, concatenate all the results\nresults = pd.concat(results, axis=0)","key":"gDpIPUkFIJ"},{"type":"output","id":"BID28EG9-m1w6BAL_cbS9","data":[],"key":"HEEIf7Pxge"}],"key":"znVLEGRjYN"},{"type":"block","kind":"notebook-code","data":{"collapsed":false,"jupyter":{"outputs_hidden":false}},"children":[{"type":"code","lang":"python","executable":true,"value":"def seconds_to_days(seconds):\n    return seconds / 60. / 60. / 24.\n\n# We'll make sure that the right columns are represented numerically:\nresults[['price', 'size', 'brs']] = results[['price', 'size', 'brs']].convert_objects(convert_numeric=True)\nresults.index.name = 'time'\n\n# Add the age of each result\nnow = pd.datetime.utcnow()\nresults['age'] = [1. / seconds_to_days((now - ii).total_seconds())\n                  for ii in results.index]","key":"E8q1H9T1Ra"},{"type":"output","id":"_pzASTIdWbrgy7rx_nZKP","data":[],"key":"aWnB24lrHC"}],"key":"so8tx4UTZT"},{"type":"block","kind":"notebook-code","data":{"collapsed":false,"jupyter":{"outputs_hidden":false}},"children":[{"type":"code","lang":"python","executable":true,"value":"# And there you have it:\nresults.head()","key":"M7wJTxBcHb"},{"type":"output","id":"5lwvLlaNnPjo8PU5B-AKZ","data":[{"output_type":"execute_result","execution_count":13,"metadata":{},"data":{"text/html":{"content":"\u003cdiv\u003e\n\u003ctable border=\"1\" class=\"dataframe\"\u003e\n  \u003cthead\u003e\n    \u003ctr style=\"text-align: right;\"\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003eprice\u003c/th\u003e\n      \u003cth\u003esize\u003c/th\u003e\n      \u003cth\u003ebrs\u003c/th\u003e\n      \u003cth\u003etitle\u003c/th\u003e\n      \u003cth\u003elink\u003c/th\u003e\n      \u003cth\u003eloc\u003c/th\u003e\n      \u003cth\u003eage\u003c/th\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003etime\u003c/th\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003e\u003c/th\u003e\n    \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2016-11-17 09:12:00\u003c/th\u003e\n      \u003ctd\u003e2450.0\u003c/td\u003e\n      \u003ctd\u003e850.0\u003c/td\u003e\n      \u003ctd\u003e3.0\u003c/td\u003e\n      \u003ctd\u003eAPARTMENT 3 BR/ 1 BT\u003c/td\u003e\n      \u003ctd\u003e/eby/apa/5873549022.html\u003c/td\u003e\n      \u003ctd\u003eeby\u003c/td\u003e\n      \u003ctd\u003e2.952374\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2016-11-17 09:12:00\u003c/th\u003e\n      \u003ctd\u003e2005.0\u003c/td\u003e\n      \u003ctd\u003e790.0\u003c/td\u003e\n      \u003ctd\u003e1.0\u003c/td\u003e\n      \u003ctd\u003ePerfect Cozy One-Bedroom Available Now! Only $...\u003c/td\u003e\n      \u003ctd\u003e/eby/apa/5880750933.html\u003c/td\u003e\n      \u003ctd\u003eeby\u003c/td\u003e\n      \u003ctd\u003e2.952374\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2016-11-17 09:12:00\u003c/th\u003e\n      \u003ctd\u003e1875.0\u003c/td\u003e\n      \u003ctd\u003eNaN\u003c/td\u003e\n      \u003ctd\u003e1.0\u003c/td\u003e\n      \u003ctd\u003eFANTASTIC PLACE - Lovely Yard!\u003c/td\u003e\n      \u003ctd\u003e/eby/apa/5870868630.html\u003c/td\u003e\n      \u003ctd\u003eeby\u003c/td\u003e\n      \u003ctd\u003e2.952374\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2016-11-17 09:11:00\u003c/th\u003e\n      \u003ctd\u003e1525.0\u003c/td\u003e\n      \u003ctd\u003e650.0\u003c/td\u003e\n      \u003ctd\u003e1.0\u003c/td\u003e\n      \u003ctd\u003eLarge 1 bedroom Washer/Dryer\u003c/td\u003e\n      \u003ctd\u003e/eby/apa/5865407315.html\u003c/td\u003e\n      \u003ctd\u003eeby\u003c/td\u003e\n      \u003ctd\u003e2.946333\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2016-11-17 09:11:00\u003c/th\u003e\n      \u003ctd\u003e6000.0\u003c/td\u003e\n      \u003ctd\u003eNaN\u003c/td\u003e\n      \u003ctd\u003e3.0\u003c/td\u003e\n      \u003ctd\u003e3BR/2.5BA Home Panoramic Views (90 Skyway Lane)\u003c/td\u003e\n      \u003ctd\u003e/eby/apa/5880673685.html\u003c/td\u003e\n      \u003ctd\u003eeby\u003c/td\u003e\n      \u003ctd\u003e2.946333\u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"                      price   size  brs  \\\ntime                                      \n2016-11-17 09:12:00  2450.0  850.0  3.0   \n2016-11-17 09:12:00  2005.0  790.0  1.0   \n2016-11-17 09:12:00  1875.0    NaN  1.0   \n2016-11-17 09:11:00  1525.0  650.0  1.0   \n2016-11-17 09:11:00  6000.0    NaN  3.0   \n\n                                                                 title  \\\ntime                                                                     \n2016-11-17 09:12:00                               APARTMENT 3 BR/ 1 BT   \n2016-11-17 09:12:00  Perfect Cozy One-Bedroom Available Now! Only $...   \n2016-11-17 09:12:00                     FANTASTIC PLACE - Lovely Yard!   \n2016-11-17 09:11:00                       Large 1 bedroom Washer/Dryer   \n2016-11-17 09:11:00    3BR/2.5BA Home Panoramic Views (90 Skyway Lane)   \n\n                                         link  loc       age  \ntime                                                          \n2016-11-17 09:12:00  /eby/apa/5873549022.html  eby  2.952374  \n2016-11-17 09:12:00  /eby/apa/5880750933.html  eby  2.952374  \n2016-11-17 09:12:00  /eby/apa/5870868630.html  eby  2.952374  \n2016-11-17 09:11:00  /eby/apa/5865407315.html  eby  2.946333  \n2016-11-17 09:11:00  /eby/apa/5880673685.html  eby  2.946333  ","content_type":"text/plain"}}}],"key":"EZlLdcCTui"}],"key":"JiNYAFWRkp"},{"type":"block","kind":"notebook-code","data":{"collapsed":false,"jupyter":{"outputs_hidden":false}},"children":[{"type":"code","lang":"python","executable":true,"value":"ax = results.hist('price', bins=np.arange(0, 10000, 100))[0, 0]\nax.set_title('Mother of god.', fontsize=20)\nax.set_xlabel('Price', fontsize=18)\nax.set_ylabel('Count', fontsize=18)","key":"gE42sRTqpd"},{"type":"output","id":"rMHGmi0Epsd7672O88XNi","data":[{"output_type":"execute_result","execution_count":14,"metadata":{},"data":{}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"0d3cf0bc7c15d7a116cf313e8401420b","path":"/build/0d3cf0bc7c15d7a116cf313e8401420b.png"}}}],"key":"pjNdf7mKYz"}],"key":"DUIoTaOWmt"},{"type":"block","kind":"notebook-code","data":{"collapsed":false,"jupyter":{"outputs_hidden":false}},"children":[{"type":"code","lang":"python","executable":true,"value":"target_price = 2200.\ntarget_size = 1400.\nhighlight = pd.DataFrame([[target_price, target_size, 2, 'eby', 'Mine', 'None', 1, results['age'].max()]],\n                         columns=['price', 'size', 'brs', 'loc', 'title', 'link', 'mine', 'age'])\nresults['mine'] = 0\nresults = results.append(highlight)","key":"kTtltdnATP"},{"type":"output","id":"FZUKwNxgdLjxvNFKlyXML","data":[],"key":"C9aLwjlaiN"}],"key":"Aptmz99G4e"},{"type":"block","kind":"notebook-code","data":{"collapsed":false,"jupyter":{"outputs_hidden":false}},"children":[{"type":"code","lang":"python","executable":true,"value":"import altair\ngraph = altair.Chart(results)\ngraph.mark_circle(size=200).encode(x='size', y='price',\n                                   color='mine:N')","key":"xHNPTnvO6e"},{"type":"output","id":"sITVzU-3PaQaDlfQ23MkL","data":[{"output_type":"display_data","metadata":{"jupyter-vega":"#b5c5d25b-82b9-48b4-b4c5-5596b3e90154"},"data":{"text/html":{"content":"\u003cdiv class=\"vega-embed\" id=\"b5c5d25b-82b9-48b4-b4c5-5596b3e90154\"\u003e\u003c/div\u003e\n\n\u003cstyle\u003e\n.vega-embed svg, .vega-embed canvas {\n  border: 1px dotted gray;\n}\n\n.vega-embed .vega-actions a {\n  margin-right: 6px;\n}\n\u003c/style\u003e\n","content_type":"text/html"}}},{"output_type":"display_data","metadata":{"jupyter-vega":"#b5c5d25b-82b9-48b4-b4c5-5596b3e90154"},"data":{"application/javascript":{"content_type":"application/javascript","hash":"fa8f1d462c53af89f536d75ede0fd51b","path":"/build/fa8f1d462c53af89f536d75ede0fd51b.json"}}},{"output_type":"display_data","metadata":{"jupyter-vega":"#b5c5d25b-82b9-48b4-b4c5-5596b3e90154"},"data":{"image/png":{"content_type":"image/png","hash":"13a148611e764563fb2a9d4fae404097","path":"/build/13a148611e764563fb2a9d4fae404097.png"}}}],"key":"EURPtHiZuh"}],"key":"yCIso3W382"},{"type":"block","kind":"notebook-code","data":{"collapsed":false,"jupyter":{"outputs_hidden":false}},"children":[{"type":"code","lang":"python","executable":true,"value":"smin, smax = (1300, 1500)\nn_br = 2\n# subset = results.query('size \u003e @smin and size \u003c @smax')\nfig, ax = plt.subplots()\nresults.query('brs \u003c 4').groupby('brs').hist('price', bins=np.arange(0, 5000, 200), ax=ax)\nax.axvline(target_price, c='r', ls='--')\n","key":"PWawir0aaZ"},{"type":"output","id":"XRFYdF0aKY0bZ5y6qJi0l","data":[{"output_type":"execute_result","execution_count":17,"metadata":{},"data":{}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"1b46d45beec910ba560e8c82a965ac0c","path":"/build/1b46d45beec910ba560e8c82a965ac0c.png"}}}],"key":"bIfhN81CCJ"}],"key":"LQ6KpZ13R2"},{"type":"block","kind":"notebook-code","data":{"collapsed":true,"jupyter":{"outputs_hidden":true}},"children":[{"type":"code","lang":"python","executable":true,"value":"# Finally, we can save this data to a CSV to play around with it later.\n# We'll have to remove some annoying characters first:\nimport string\nuse_chars = string.ascii_letters +\\\n    ''.join([str(i) for i in range(10)]) +\\\n    ' /\\.'\nresults['title'] = results['title'].apply(\n    lambda a: ''.join([i for i in a if i in use_chars]))\n\nresults.to_csv('../data/craigslist_results.csv')","key":"GsnXWmYGR6"},{"type":"output","id":"O-BYQNv6WC6r-WKkaGqxj","data":[],"key":"SOYD7jNXFC"}],"key":"mUi178piM9"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"RECAP","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XOTvalMPDr"}],"identifier":"recap","label":"RECAP","html_id":"recap","implicit":true,"key":"LZtl7hxy8K"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"To sum up what we just did:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"AoJQh6yUpq"}],"key":"q8G0fxkfmr"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"We defined the ability to query a website using a custom URL. This is usually the same in structure for website, but the parameter names will be different.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"qtq2149qdd"}],"key":"TmOtVHzN2c"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We sent a ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"IqIQa6icat"},{"type":"inlineCode","value":"get","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"R36cqsrcn1"},{"type":"text","value":" request to Craigslist using the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"skGmRyJitI"},{"type":"inlineCode","value":"requests","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"CohBltEomd"},{"type":"text","value":" module of python.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"zA4FbfiRnm"}],"key":"U58ZxzPvML"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"We parsed the response using ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"oeQsxn8kIv"},{"type":"inlineCode","value":"BeautifulSoup4","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"oBX0xkXaSp"},{"type":"text","value":".","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"g1mBQrPPln"}],"key":"EzDuz9Jkgk"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"We then looped through a bunch of apartment listings, pulled some relevant data, and combined it all into a cleaned and usable dataframe with ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Rp9N7FFDlN"},{"type":"inlineCode","value":"pandas","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"fZY5MWsH08"},{"type":"text","value":".","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"k3jTz7R01Y"}],"key":"YG3v9szHtv"}],"key":"GLipb2y7IX"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Next up I’ll take a look at the data, and see if there’s anything interesting to make of it.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"xA6Q7Rqc0S"}],"key":"LcLDIf8mjd"}],"key":"EijOBEK7DD"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Bonus - auto-emailing yourself w/ notifications","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kErnjPg4jd"}],"identifier":"bonus-auto-emailing-yourself-w-notifications","label":"Bonus - auto-emailing yourself w/ notifications","html_id":"bonus-auto-emailing-yourself-w-notifications","implicit":true,"key":"riL9Tpx3E9"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"A few people have asked me about using this kind of process to make a bot that scrapes craigslist periodically. This is actually quite simple, as it basically involves pulling the top listings from craigslist, checking this against an “old” list, and detecting if there’s anything new that has popped up since the last time you checked.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"WnvKvRlvbL"}],"key":"uSRjNYZX0c"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Here’s a simple script that will get the job done. Once again, don’t pull too much data at once, and don’t query Craigslist too frequently, or you’re gonna get banned.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"mU4cmqtIgM"}],"key":"egJdOgUlvP"}],"key":"fBg1I9KePG"},{"type":"block","kind":"notebook-code","data":{"collapsed":true,"jupyter":{"outputs_hidden":true}},"children":[{"type":"code","lang":"python","executable":true,"value":"# We'll use the gmail module (there really is a module for everything in python)\nimport gmail\nimport time","key":"dkboe9cdHM"},{"type":"output","id":"2PJZU-BLxunLV_zJGpFoa","data":[],"key":"DiIPY9je4h"}],"key":"WYDlzLlJQ9"},{"type":"block","kind":"notebook-code","data":{"collapsed":true,"jupyter":{"outputs_hidden":true}},"children":[{"type":"code","lang":"python","executable":true,"value":"gm = gmail.GMail('my_username', 'my_password')\ngm.connect()\n\n# Define our URL and a query we want to post\nbase_url = 'http://sfbay.craigslist.org/'\nurl = base_url + 'search/eby/apa?nh=48\u0026anh=49\u0026nh=112\u0026nh=58\u0026nh=61\u0026nh=62\u0026nh=66\u0026max_price=2200\u0026bedrooms=1'\n\n# This will remove weird characters that people put in titles like ****!***!!!\nuse_chars = string.ascii_letters + ''.join([str(i) for i in range(10)]) + ' '","key":"N7t2wz0JiD"},{"type":"output","id":"At2Qorzq4QMT5bEaC7OWy","data":[{"ename":"SMTPAuthenticationError","evalue":"(535, '5.7.8 Username and Password not accepted. Learn more at\\n5.7.8  https://support.google.com/mail/answer/14257 of1sm4627014pbc.11 - gsmtp')","output_type":"error","traceback":"\u001b[0;31m---------------------------------------------------------------------------\u001b[0m\n\u001b[0;31mSMTPAuthenticationError\u001b[0m                   Traceback (most recent call last)\n\u001b[0;32m\u003cipython-input-2-49f6a18c0f58\u003e\u001b[0m in \u001b[0;36m\u003cmodule\u003e\u001b[0;34m()\u001b[0m\n\u001b[1;32m      1\u001b[0m \u001b[0mgm\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mgmail\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mGMail\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m'my_username'\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;34m'my_password'\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m----\u003e 2\u001b[0;31m \u001b[0mgm\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mconnect\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m      3\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m      4\u001b[0m \u001b[0;31m# Define our URL and a query we want to post\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m      5\u001b[0m \u001b[0mbase_url\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0;34m'http://sfbay.craigslist.org/'\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\n\u001b[0;32m/Users/choldgraf/anaconda/lib/python3.7/site-packages/gmail/gmail.pyc\u001b[0m in \u001b[0;36mconnect\u001b[0;34m(self)\u001b[0m\n\u001b[1;32m     65\u001b[0m         \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0msession\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mehlo\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m     66\u001b[0m         \u001b[0;32mtry\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m---\u003e 67\u001b[0;31m             \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0msession\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mlogin\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0musername\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mpassword\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m     68\u001b[0m         \u001b[0;32mexcept\u001b[0m \u001b[0mSMTPAuthenticationError\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0me\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m     69\u001b[0m             \u001b[0;31m# Catch redirect to account unlock \u0026 reformat\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\n\u001b[0;32m/Users/choldgraf/anaconda/lib/python3.7/smtplib.pyc\u001b[0m in \u001b[0;36mlogin\u001b[0;34m(self, user, password)\u001b[0m\n\u001b[1;32m    620\u001b[0m             \u001b[0;31m# 235 == 'Authentication successful'\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    621\u001b[0m             \u001b[0;31m# 503 == 'Error: already authenticated'\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m--\u003e 622\u001b[0;31m             \u001b[0;32mraise\u001b[0m \u001b[0mSMTPAuthenticationError\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mcode\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mresp\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m    623\u001b[0m         \u001b[0;32mreturn\u001b[0m \u001b[0;34m(\u001b[0m\u001b[0mcode\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mresp\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    624\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n\n\u001b[0;31mSMTPAuthenticationError\u001b[0m: (535, '5.7.8 Username and Password not accepted. Learn more at\\n5.7.8  https://support.google.com/mail/answer/14257 of1sm4627014pbc.11 - gsmtp')"}],"key":"AhPxJVz1NI"}],"key":"IqyfHmQnjT"},{"type":"block","kind":"notebook-code","data":{"collapsed":true,"jupyter":{"outputs_hidden":true}},"children":[{"type":"code","lang":"python","executable":true,"value":"link_list = []  # We'll store the data here\nlink_list_send = []  # This is a list of links to be sent\nsend_list = []  # This is what will actually be sent in the email\n\n# Careful with this...too many queries == your IP gets banned temporarily\nwhile True:\n    resp = requests.get(url)\n    txt = bs4(resp.text, 'html.parser')\n    apts = txt.findAll(attrs={'class': \"row\"})\n    \n    # We're just going to pull the title and link\n    for apt in apts:\n        title = apt.find_all('a', attrs={'class': 'hdrlnk'})[0]\n        name = ''.join([i for i in title.text if i in use_chars])\n        link = title.attrs['href']\n        if link not in link_list and link not in link_list_send:\n            print('Found new listing')\n            link_list_send.append(link)\n            send_list.append(name + '  -  ' + base_url+link)\n            \n    # Flush the cache if we've found new entries\n    if len(link_list_send) \u003e 0:\n        print('Sending mail!')\n        msg = '\\n'.join(send_list)\n        m = email.message.Message()\n        m.set_payload(msg)\n        gm.send(m, ['recipient_email@mydomain.com'])\n        link_list += link_list_send\n        link_list_send = []\n        send_list = []\n    \n    # Sleep a bit so CL doesn't ban us\n    sleep_amt = np.random.randint(60, 120)\n    time.sleep(sleep_amt)","key":"yV2bP12oxR"},{"type":"output","id":"lqZZcYCtc5rEd-OgsyejD","data":[],"key":"VAm4AWPVGq"}],"key":"sLsoy1V6dc"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"And there you have it - your own little bot to keep you on the top of the rental market.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Re1hiQF7Nu"}],"key":"fN98pfosfN"}],"key":"SdCv1E99qQ"}],"key":"unoDzTmvRQ"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Coherence vs. Correlation - a simple simulation","url":"/blog/2015/2015-05-27-coherence-correlation","group":"2015"},"next":{"title":"Craigslist data analysis","url":"/blog/2015/2015-09-27-craigslist-data-analysis","group":"2015"}}},"domain":"http://localhost:3000"},"project":{"title":"Welcome","github":"https://github.com/choldgraf/choldgraf.github.io","id":"f84d70c6-7ee5-4bb9-9056-aa84134a33dd","toc":[{"file":"index.md"},{"file":"about.md"},{"file":"projects.md"},{"file":"publications.md"},{"file":"talks.md"},{"children":[{"children":[{"pattern":"blog/2024/**{.ipynb,.md}"}],"title":"2024"},{"children":[{"pattern":"blog/2023/**{.ipynb,.md}"}],"title":"2023"},{"children":[{"pattern":"blog/2022/**{.ipynb,.md}"}],"title":"2022"},{"children":[{"pattern":"blog/2021/**{.ipynb,.md}"}],"title":"2021"},{"children":[{"pattern":"blog/2020/**{.ipynb,.md}"}],"title":"2020"},{"children":[{"pattern":"blog/2019/**{.ipynb,.md}"}],"title":"2019"},{"children":[{"pattern":"blog/2018/**{.ipynb,.md}"}],"title":"2018"},{"children":[{"pattern":"blog/2017/**{.ipynb,.md}"}],"title":"2017"},{"children":[{"pattern":"blog/2016/**{.ipynb,.md}"}],"title":"2016"},{"children":[{"pattern":"blog/2015/**{.ipynb,.md}"}],"title":"2015"}],"file":"blog.md"}],"thumbnail":"/build/profile-color-circle-92b04648016e37babc767565e5f4bc53.png","exports":[],"bibliography":[],"index":"index","pages":[{"slug":"about","title":"About me","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"projects","title":"Projects","description":"","date":"","thumbnail":"/build/7d9a7172f87d448f4ed0d90adb92d4db.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"publications","title":"Publications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"talks","title":"Talks","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"blog","title":"Blog","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"level":2,"title":"2024"},{"slug":"blog.2024.blog-list","title":"Better blog lists with the MyST AST","description":"","date":"2024-11-09","thumbnail":"/build/sandbox-demo-a1db388249cd91fa956492c8c4bcc1dd.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["myst","jupyter"],"level":3},{"slug":"blog.2024.bluesky","title":"How I’m trying to use BlueSky without getting burned again","description":"Some quick thoughts on moving from Twitter/X to BlueSky and how I'll try to use social media after being burned once by Twitter.\n","date":"2024-11-22","thumbnail":"/build/bluesky-castles-508ecb1af745e4ffba9a8b3699112e66.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["open source","social media"],"level":3},{"slug":"blog.2024.mystmd-with-the-blog","title":"Re-building my blog with MySTMD","description":"","date":"2024-11-01","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"blog.2024.programmatic-myst-with-jupyter","title":"Generate MyST with Jupyter and insert it into content programmatically","description":"","date":"2024-11-04","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["myst","jupyter"],"level":3},{"level":2,"title":"2023"},{"slug":"blog.2023.ai-for-good","title":"A few random opportunities in AI for Social Good","description":"","date":"2023-10-02","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["cloud"],"level":3},{"slug":"blog.2023.fosdem","title":"Report from FOSDEM23: beautiful chaos in a conference","description":"","date":"2023-02-06","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["cloud"],"level":3},{"slug":"blog.2023.social-directive","title":"A Sphinx directive for social media embeds","description":"","date":"2023-02-15","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["sphinx"],"level":3},{"slug":"blog.2023.sphinx-add-extensions","title":"Bundle extensions with your Sphinx theme","description":"","date":"2023-01-19","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["sphinx"],"level":3},{"level":2,"title":"2022"},{"slug":"blog.2022.cloud-services-academia","title":"Ask Twitter: Why don’t academic researchers use cloud services?","description":"","date":"2022-09-05","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["cloud"],"level":3},{"slug":"blog.2022.github-2022","title":"GitHub year in review","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"blog.2022.install-github-from-pyproject","title":"Install dependencies from GitHub with pyproject.toml or requirements.txt","description":"","date":"2022-12-31","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["software development"],"level":3},{"slug":"blog.2022.jupyterlite-workshop","title":"Report from the JupyterLite workshop: WebAssembly is pretty cool","description":"","date":"2022-12-10","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["jupyter","webassembly"],"level":3},{"slug":"blog.2022.matplotlib-remote-font","title":"Load and plot a remote font with Matplotlib","description":"","date":"2022-12-06","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["matplotlib"],"level":3},{"slug":"blog.2022.orcid-auto-update","title":"Automatically updating my publications page with ORCID and doi.org","description":"","date":"2022-11-19","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["scholarship","doi","orcid"],"level":3},{"slug":"blog.2022.phantom-workflows-pull-requests","title":"Fix phantom GitHub workflows in your ci-cd with protected branch rules","description":"","date":"2022-11-27","thumbnail":"/build/abdd690fd5af613c25b40bb16d6ca824.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["cicd","github actions"],"level":3},{"slug":"blog.2022.precommit-autoupdate","title":"Automatically update pre-commit hook versions","description":"","date":"2022-12-03","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","git"],"level":3},{"slug":"blog.2022.shell-split","title":"subprocess.run can execute shell commands directly","description":"","date":"2022-11-29","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["shell","python"],"level":3},{"slug":"blog.2022.sphinx-custom-crossrefs","title":"Custom roles and domains in Sphinx with one line","description":"","date":"2022-11-21","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["sphinx","scholarship","myst"],"level":3},{"slug":"blog.2022.sphinx-redirects-folder","title":"Automatically redirect folders in Sphinx websites","description":"","date":"2022-11-19","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"blog.2022.sphinx-update-config","title":"How to update Sphinx options during the build","description":"","date":"2022-12-05","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["sphinx"],"level":3},{"level":2,"title":"2021"},{"slug":"blog.2021.2021-12-18-hybrid-tutorial-prerecord","title":"Serving in two roles at once via pre-recorded tutorials","description":"","date":"2021-12-17","thumbnail":"/build/9c5f30a4a04a0ddea887b8cfbfca92ce.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["teaching"],"level":3},{"level":2,"title":"2020"},{"slug":"blog.2020.2020-01-22-rst-thoughts","title":"What do people think about rST?","description":"","date":"2020-01-22","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["markup","documentation"],"level":3},{"slug":"blog.2020.organizations-help-oss-guide","title":"Contributing to open source: A short guide for organizations","description":"","date":"2020-11-08","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["open source","sustainability"],"level":3},{"slug":"blog.2020.sphinx-blogging","title":"A new blog with Sphinx","description":"","date":"2020-10-10","thumbnail":"/build/sphinx-logo-2b5bcb5b54634e13eca85ca1f2b9161f.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["sphinx","blogging","jupyter"],"level":3},{"slug":"blog.2020.sphinx-design-timeline","title":"Build a simple timeline with sphinx-design","description":"","date":"2020-01-22","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["markup","documentation"],"level":3},{"level":2,"title":"2019"},{"slug":"blog.2019.2019-01-29-three-things-circleci","title":"Three things I love about CircleCI","description":"","date":"2019-01-29","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["CICD","dev ops","software development"],"level":3},{"slug":"blog.2019.2019-03-16-jupyter-dev","title":"Thoughts from the Jupyter team meeting 2019","description":"","date":"2019-03-30","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["jupyter","community"],"level":3},{"slug":"blog.2019.2019-06-25-a-few-talks","title":"A few recent talks","description":"","date":"2019-06-25","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["talks"],"level":3},{"slug":"blog.2019.2019-10-11-automating-jb","title":"Automating Jupyter Book deployments with CI/CD","description":"","date":"2019-10-11","thumbnail":"/build/jb-auto-build-f1ec774816f882c57d96551bfd8877ef.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["infrastructure"],"level":3},{"slug":"blog.2019.2019-10-13-rust-jupyter-governance","title":"What would Rust-style governance look like in Jupyter?","description":"","date":"2019-10-13","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["governance"],"level":3},{"slug":"blog.2019.2019-10-22-xarray-neuro","title":"Analyzing intracranial electrophysiology data with xarray","description":"","date":"2019-10-22","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["analysis","neuroscience","xarray","open source"],"level":3},{"slug":"blog.2019.2019-10-27-jupyter-governance-python","title":"What would Python-style governance look like in Jupyter?","description":"","date":"2019-10-27","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["governance","open source"],"level":3},{"slug":"blog.2019.2019-11-11-ipynb-pandoc","title":"Testing Pandoc and Jupyter Notebooks","description":"","date":"2019-11-11","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["documentation","pandoc","nbconvert"],"level":3},{"level":2,"title":"2018"},{"slug":"blog.2018.circlci-github","title":"Automatically mirror a github repository with CircleCI","description":"","date":"2018-12-18","thumbnail":"/build/circleci-mirror-depl-ee52ef7f26c637a9601412a93782a171.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["productivity","CICD"],"level":3},{"slug":"blog.2018.circle-docs","title":"Using CircleCI to preview documentation in Pull Requests","description":"","date":"2018-10-16","thumbnail":"/build/sphinx-circle-logos-9aa643e4fb9f7e8d575c222f395c521e.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["documentation","sphinx"],"level":3},{"slug":"blog.2018.conferences-summer-2018","title":"Summer conference report back","description":"","date":"2018-08-01","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","conferences","communities","jupyter"],"level":3},{"slug":"blog.2018.devopsdays-sv-2018","title":"An academic scientist goes to DevOps Days","description":"","date":"2018-05-18","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","open science","devops","jupyterhub","teams"],"level":3},{"slug":"blog.2018.free-labor-partners","title":"Open communities need to be partners, not sources of free labor","description":"","date":"2018-12-05","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["open communities","open culture","sustainability"],"level":3},{"slug":"blog.2018.jekyllmarkdown","title":"Blogging with Jupyter Notebooks and Jekyll using nbconvert templates","description":"","date":"2018-05-23","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","blogging","jekyll"],"level":3},{"slug":"blog.2018.kinds-of-openness","title":"How do projects signal how “open” they are?","description":"","date":"2018-10-26","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["open source","governance","community"],"level":3},{"slug":"blog.2018.makeitpop","title":"Introducing makeitpop, a tool to perceptually warp your data!\"","description":"","date":"2018-06-04","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python colormaps"],"level":3},{"slug":"blog.2018.my-workflow","title":"My weekly workflow","description":"","date":"2018-10-26","thumbnail":"/build/trello-board-project-cf81a3068dcdb61684d38cc29576dbe5.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["productivity"],"level":3},{"slug":"blog.2018.rust-governance","title":"I like Rust’s governance structure","description":"","date":"2018-10-18","thumbnail":"/build/2018-10-19-rust_logo-34ff6bf2c55a4c53f786162049fb6973.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","governance","community"],"level":3},{"slug":"blog.2018.sphinx-copy-buttons","title":"Adding copy buttons to code blocks in Sphinx","description":"","date":"2018-07-05","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","blogging","sphinx","documentation"],"level":3},{"level":2,"title":"2017"},{"slug":"blog.2017.2017-01-04-matplotlib-cycles","title":"Matplotlib Cyclers are Great","description":"","date":"2017-01-04","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","open science","visualizations"],"level":3},{"slug":"blog.2017.2017-03-16-dates-in-python","title":"Dates in python","description":"","date":"2017-03-16","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","open science"],"level":3},{"slug":"blog.2017.2017-11-02-dates-multiple-plots","title":"Combining dates with analysis visualization in python","description":"","date":"2017-11-02","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","open science"],"level":3},{"level":2,"title":"2016"},{"slug":"blog.2016.2016-07-02-fft-time","title":"The beauty of computational efficiency","description":"","date":"2016-07-02","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","programming","computation","efficiency","fft"],"level":3},{"slug":"blog.2016.2016-07-08-voting-randomness","title":"Could Brexit have happened by chance?","description":"","date":"2016-07-08","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","voting","statistics","computation","fft"],"level":3},{"slug":"blog.2016.2016-11-01-5-things-scipy-2016","title":"5 things I learned at SciPy","description":"","date":"2016-11-01","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","open science","programming","conferences"],"level":3},{"slug":"blog.2016.2016-11-01-5-things-scipy-2016-1","title":"1. Scientific conferences can be fun","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"blog.2016.2016-11-30-funnel-plots","title":"Visualizing publication bias","description":"","date":"2016-11-30","thumbnail":"/build/funnel_plot_no_dists-5dbdbb70d49646cebf59865297a14e17.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","funnel plots","open science","visualizations","simulations"],"level":3},{"slug":"blog.2016.2016-12-19-biorxiv-neuro","title":"The bleeding edge of publishing, Scraping publication amounts at biorxiv","description":"","date":"2016-12-19","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","open science","visualizations","web scraping","preprints"],"level":3},{"slug":"blog.2016.2016-12-23-christmas-ecog-plot","title":"Brainy Jingle Bells","description":"","date":"2016-12-23","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","open science","visualizations","brains","holidays"],"level":3},{"level":2,"title":"2015"},{"slug":"blog.2015.2015-05-27-coherence-correlation","title":"Coherence vs. Correlation - a simple simulation","description":"","date":"2015-05-27","thumbnail":"/build/eeg_coh-a49d07ff40c05a204e38e8306ac0a351.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","programming","timeseries","correlation"],"level":3},{"slug":"blog.2015.2015-08-30-craigslist-scrape","title":"Scraping craigslist","description":"","date":"2015-08-30","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","programming"],"level":3},{"slug":"blog.2015.2015-09-27-craigslist-data-analysis","title":"Craigslist data analysis","description":"","date":"2015-09-27","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","scraping","data analysis","visualization"],"level":3},{"slug":"blog.2015.2015-10-29-nih-grant-analysis","title":"NIH grant analysis","description":"","date":"2015-10-29","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["python","statistics","visualization","grants"],"level":3}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/build/manifest-A92797E9.js";
import * as route0 from "/build/root-HROFNPGU.js";
import * as route1 from "/build/routes/$-WNZNXUO2.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/build/entry.client-UNPC4GT3.js");</script></body></html>