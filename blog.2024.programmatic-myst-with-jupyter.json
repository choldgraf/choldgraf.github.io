{"version":1,"kind":"Notebook","sha256":"dee0c90f5aac29dd98a32eab06f583028f1adcc6cc10abdc25a219d2b363cf83","slug":"blog.2024.programmatic-myst-with-jupyter","location":"/blog/2024/programmatic-myst-with-jupyter.md","dependencies":[],"frontmatter":{"title":"Generate MyST with Jupyter and insert it into content programmatically","tags":["myst","jupyter"],"date":"2024-11-04","kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"jupytext":{"text_representation":{"extension":".md","format_name":"myst","format_version":"0.13","jupytext_version":"1.16.4"}},"content_includes_title":false,"authors":[{"id":"chris","nameParsed":{"literal":"Chris Holdgraf","given":"Chris","family":"Holdgraf"},"name":"Chris Holdgraf","orcid":"0000-0002-2391-0678","affiliations":["affiliations-myst-generated-uid-0","affiliations-myst-generated-uid-1"],"twitter":"choldgraf","github":"choldgraf","url":"https://chrisholdgraf.com"}],"github":"https://github.com/choldgraf/choldgraf.github.io","affiliations":[{"name":"2i2c","url":"https://2i2c.org","id":"affiliations-myst-generated-uid-0"},{"name":"Project Jupyter","url":"https://jupyter.org","id":"affiliations-myst-generated-uid-1"}],"abbreviations":{"LF":"The Linux Foundation","JF":"The Jupyter Foundation","JEC":"Jupyter Executive Council","JFB":"The Jupyter Foundation Board","SSC":"Software Steering Council","OSPO":"Open Source Program Office"},"numbering":{"title":{"offset":2}},"edit_url":"https://github.com/choldgraf/choldgraf.github.io/blob/main/blog/2024/programmatic-myst-with-jupyter.md","exports":[{"format":"md","filename":"programmatic-myst-with-jupyter.md","url":"/build/programmatic-myst-wi-3f21cd6f0f3b5bf709ab182bc3d0d754.md"}]},"mdast":{"type":"root","children":[{"type":"block","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"While I’ve been ","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"ZlkW3JNWje"},{"type":"link","url":"/blog/2024/mystmd-with-the-blog","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"converting my blog to use the new MyST engine","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"L1inRIU1Nz"}],"urlSource":"./mystmd-with-the-blog.md","dataUrl":"/blog.2024.mystmd-with-the-blog.json","internal":true,"protocol":"file","key":"zAQ79UoHDq"},{"type":"text","value":", I discovered a useful MyST feature. It’s not yet possible to ","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"K5tYAwqCFC"},{"type":"link","url":"https://github.com/jupyter-book/mystmd/issues/1026","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"natively parse Jupyter Markdown outputs as MyST","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"MiTXGik5Uj"}],"urlSource":"https://github.com/jupyter-book/mystmd/issues/1026","data":{"kind":"issue","org":"jupyter-book","repo":"mystmd","issue_number":"1026"},"internal":false,"protocol":"github","key":"Ae42I6wICq"},{"type":"text","value":" but there’s a workaround if you don’t mind generating a temporary file.","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"b1wgdy9nkG"}],"key":"lqGRRAOGjy"},{"type":"paragraph","position":{"start":{"line":24,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"The trick is to ","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"EKDkaJXc2o"},{"type":"emphasis","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"write to a temporary file","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"J7rcXzFJne"}],"key":"GB6POAbCjV"},{"type":"text","value":" in your Jupyter cell, and then ","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"TXkY4axJzS"},{"type":"emphasis","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"include the temporary output file with an ","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"cX9rAK5SUa"},{"type":"inlineCode","value":"{include}","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"x8tG17gdCq"},{"type":"text","value":" directive","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"IQnPYC7FCX"}],"key":"J3LS2wCmoT"},{"type":"text","value":" in your MyST markdown.\nThis allows you to directly write MyST Markdown without worrying about what the MyST AST specification looks like.","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"dpvF0LZLVH"}],"key":"YRmMJ3V3Qr"},{"type":"paragraph","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"For example, the following code cell writes some sample text to a ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"yydKhoNhDi"},{"type":"inlineCode","value":".txt","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"HSspuYZjYB"},{"type":"text","value":" file in my MyST build directory.","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"PqDEpradh3"}],"key":"ZFy7uiM4N0"}],"data":{"editable":true,"slideshow":{"slide_type":""}},"key":"TgFnSY4ylG"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from pathlib import Path\np = Path(\"../_build/txt/tmp.txt\")\np.parent.mkdir(parents=True, exist_ok=True)\n# Grab a list of all the filenames\nfiles = list(p.rglob(\"../**/*.md\"))\ntxt = \"\\n- \".join(files)\n_ = p.write_text(txt)","key":"ea2tTTwgub"},{"type":"output","id":"KqUuWTqkuQvAotGTXR8JX","data":[],"key":"C3x1nFoh3v"}],"data":{},"key":"FCPdPBNsRt"},{"type":"block","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"children":[{"type":"text","value":"And we can then include it in the page with MyST markdown like so:","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"key":"eHAKuclM1c"}],"key":"RVlAUQoptc"},{"type":"code","lang":"md","value":"```{include} ../_build/txt/tmp.txt\n```","position":{"start":{"line":48,"column":1},"end":{"line":51,"column":1}},"key":"McBvLuKpJB"},{"type":"include","file":"../_build/txt/tmp.txt","literal":false,"lang":"txt","key":"QypBguIpfC"},{"type":"paragraph","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"text","value":"The page will be executed first, and afterward, the page will be parsed into MyST, thus using the temporary file we’ve included.","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"ihw2Fsv3UK"}],"key":"pQaWVhXBS8"}],"data":{"editable":true,"slideshow":{"slide_type":""}},"key":"Hsd3cLF2Qi"}],"key":"buoCcWw7EF"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Re-building my blog with MySTMD","url":"/blog/2024/mystmd-with-the-blog","group":"2024"},"next":{"title":"A few random opportunities in AI for Social Good","url":"/blog/2023/ai-for-good","group":"2023"}}},"domain":"http://localhost:3000"}