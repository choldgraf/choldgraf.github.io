{"kind":"Notebook","sha256":"4f1ecc6a80c136e70cef44249bea79b9bd2419d63286d33cd02322b015bd1800","slug":"blog.2024.programmatic-myst-with-jupyter","location":"/blog/2024/programmatic-myst-with-jupyter.md","dependencies":[],"frontmatter":{"title":"Generate MyST with Jupyter and insert it into content programmatically","kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"jupytext":{"text_representation":{"extension":".md","format_name":"myst","format_version":"0.13","jupytext_version":"1.16.4"}},"content_includes_title":true,"github":"https://github.com/choldgraf/choldgraf.github.io","exports":[{"format":"md","filename":"programmatic-myst-with-jupyter.md","url":"/build/programmatic-myst-wi-dca9955bd6d6573f510869607db57ea3.md"}]},"mdast":{"type":"root","children":[{"type":"block","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"thematicBreak","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"oeXJ4W3fXF"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"date: “2024-10-04”\ntags:","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"nQXYVgz2xi"}],"key":"GiD4JqWqSK"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":19,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"myst","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"HgtNhEz7Bm"}],"key":"PYWTtvjRSg"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"jupyter","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"vwTOcwf1lw"}],"key":"IiuunNm5QK"}],"key":"snZ2XlWWUY"},{"type":"thematicBreak","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"L4FxtkLZzU"},{"type":"heading","depth":1,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Generate MyST with Jupyter and insert it into content programmatically","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"OBNAr1WQjw"}],"identifier":"generate-myst-with-jupyter-and-insert-it-into-content-programmatically","label":"Generate MyST with Jupyter and insert it into content programmatically","html_id":"generate-myst-with-jupyter-and-insert-it-into-content-programmatically","implicit":true,"key":"v6Ros1EAt3"},{"type":"paragraph","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"While I’ve been ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"Tx8a9Pttwc"},{"type":"link","url":"/blog/2024/mystmd-with-the-blog","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"converting my blog to use the new MyST engine","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"OiZvLE13p9"}],"urlSource":"./mystmd-with-the-blog.md","dataUrl":"/blog.2024.mystmd-with-the-blog.json","internal":true,"protocol":"file","key":"iGCyUqOoIw"},{"type":"text","value":", I discovered another fun little MyST feature. Something that I miss from the Sphinx implementation of the MyST Parser is the ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"JRw6UDjS7v"},{"type":"link","url":"https://github.com/jupyter-book/mystmd/issues/1026","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"ability to parse Jupyter Markdown outputs as MyST","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"QPnEXhKLhG"}],"urlSource":"https://github.com/jupyter-book/mystmd/issues/1026","data":{"kind":"issue","org":"jupyter-book","repo":"mystmd","issue_number":"1026"},"internal":false,"protocol":"github","key":"gqe1PyGSIS"},{"type":"text","value":". This is a really handy way to programmatically create MyST at build time.","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"SRVN9NUOhv"}],"key":"F7jVsduTrr"},{"type":"paragraph","position":{"start":{"line":27,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"It turns out that it is possible to programmatically generate MyST at build time and insert it into your documentation.\nThe trick is to ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"KHswtTAhZf"},{"type":"emphasis","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"write to a temporary file","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"XQqicYRZvm"}],"key":"K4l4gGhVei"},{"type":"text","value":" in your Jupyter cell, and then ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"GqrMsBIJiJ"},{"type":"emphasis","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"include that cell with an ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"Act81PCKg2"},{"type":"inlineCode","value":"{include}","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"pR8vRhubl7"},{"type":"text","value":" directive","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"LE0sNYmitH"}],"key":"fEbPKb95QS"},{"type":"text","value":" in your MyST markdown.\nThis allows you to directly write MyST Markdown without worrying about what the MyST AST specification looks like.","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"H3OuIXKrh3"}],"key":"PcplbLnHHn"},{"type":"paragraph","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"For example, the following code cell writes some sample text to a ","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"J2HtVnLhv2"},{"type":"inlineCode","value":".txt","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"C5B9xLWhvk"},{"type":"text","value":" file in my MyST build directory.","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"BuJmdk4oZw"}],"key":"HhO0v6oiVh"}],"data":{"editable":true,"slideshow":{"slide_type":""}},"key":"NUVCudH19G"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from pathlib import Path\np = Path(\"../_build/txt/tmp.txt\")\np.parent.mkdir(parents=True, exist_ok=True)\n# Grab a list of all the filenames\nfiles = list(p.rglob(\"../**/*.md\"))\ntxt = \"\\n- \".join(files)\n_ = p.write_text(txt)","key":"h7gZECumgl"},{"type":"output","id":"0r3SahvdAEQiQ8Ps2z6VB","data":[],"key":"YMtoIC1TW7"}],"data":{},"key":"dHk1M58j2O"},{"type":"block","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"children":[{"type":"text","value":"And we can then include it in the page with MyST markdown like so:","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"key":"RqZkPBylXZ"}],"key":"g1ipqmjp4P"},{"type":"code","lang":"md","value":"```{include} ../_build/txt/tmp.txt\n```","position":{"start":{"line":52,"column":1},"end":{"line":55,"column":1}},"key":"kVtnR3kSdw"},{"type":"include","file":"../_build/txt/tmp.txt","key":"TjhjePGCtQ"}],"data":{"editable":true,"slideshow":{"slide_type":""}},"key":"GzGS7Oa0jB"}],"key":"Nnv8d5bFVp"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Re-building my blog with MySTMD","url":"/blog/2024/mystmd-with-the-blog","group":"2024"},"next":{"title":"A few random opportunities in AI for Social Good","url":"/blog/2023/ai-for-good","group":"2023"}}},"domain":"http://localhost:3000"}