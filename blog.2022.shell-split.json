{"version":1,"kind":"Article","sha256":"1e38cf6dcf015bdb47f922a41efc5dce8397533c1daecd187a485ed136a279cb","slug":"blog.2022.shell-split","location":"/blog/2022/shell-split.md","dependencies":[],"frontmatter":{"title":"subprocess.run can execute shell commands directly","tags":["shell","python"],"date":"2022-11-29","content_includes_title":false,"authors":[{"id":"chris","nameParsed":{"literal":"Chris Holdgraf","given":"Chris","family":"Holdgraf"},"name":"Chris Holdgraf","orcid":"0000-0002-2391-0678","affiliations":["affiliations-myst-generated-uid-0","affiliations-myst-generated-uid-1"],"twitter":"choldgraf","github":"choldgraf","url":"https://chrisholdgraf.com"}],"github":"https://github.com/choldgraf/choldgraf.github.io","affiliations":[{"name":"2i2c","url":"https://2i2c.org","id":"affiliations-myst-generated-uid-0"},{"name":"Project Jupyter","url":"https://jupyter.org","id":"affiliations-myst-generated-uid-1"}],"abbreviations":{"LF":"The Linux Foundation","JF":"The Jupyter Foundation","JEC":"Jupyter Executive Council","JFB":"The Jupyter Foundation Board","SSC":"Software Steering Council"},"numbering":{"title":{"offset":2}},"edit_url":"https://github.com/choldgraf/choldgraf.github.io/blob/main/blog/2022/shell-split.md","exports":[{"format":"md","filename":"shell-split.md","url":"/build/shell-split-fcb1cee88e65408df394bd234b301c19.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"I often run shell commands in Python via the ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"gdj6PQsdji"},{"type":"link","url":"https://docs.python.org/3/library/subprocess.html#subprocess.run","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"inlineCode","value":"subprocess.run","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"vL78jVSKHx"},{"type":"text","value":" command","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"m4jdeImzBS"}],"urlSource":"https://docs.python.org/3/library/subprocess.html#subprocess.run","key":"KNt56gKxyW"},{"type":"text","value":".\nOne thing that has always bugged me is that this required you to split commands into a list before it’d work properly.\nFor example, you’d have to do:","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"hyiR4Mze0u"}],"key":"LrVPUPQ826"},{"type":"code","lang":"python","value":"import subprocess\nimport shlex\n\nsubprocess.run(*shlex.split(\"ls -l\"))","position":{"start":{"line":15,"column":1},"end":{"line":20,"column":1}},"key":"sQdj6ZWKkC"},{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Today I discovered that you don’t have to do this!\nThere’s a ","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"WA0vqyoQ2z"},{"type":"inlineCode","value":"shell=","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"zlPdVaGtII"},{"type":"text","value":" keyword that can be used to tell subprocess to simply run the command directly in the shell.","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"H9eQa9906D"}],"key":"WD9Q6i1LW5"},{"type":"paragraph","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"For example:","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"DKKzs8K0NQ"}],"key":"JDPKP9Heln"},{"type":"code","lang":"python","value":"import subprocess\nsubprocess.run(\"ls -l\", shell=True)","position":{"start":{"line":27,"column":1},"end":{"line":30,"column":1}},"key":"DmgKWhfYsu"},{"type":"paragraph","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"Apparently there are some ","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"BqMKq1qCh4"},{"type":"link","url":"https://docs.python.org/3/library/subprocess.html#security-considerations","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"security considerations","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"JSwFw0Asra"}],"urlSource":"https://docs.python.org/3/library/subprocess.html#security-considerations","key":"PeIP3o7cwV"},{"type":"text","value":" but this seems like a big papercut saver to me.","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"OSN4wdnvwJ"}],"key":"KDFZO303jH"}],"key":"RDnp18ZIft"}],"key":"pxfFsbFmLk"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Automatically update pre-commit hook versions","url":"/blog/2022/precommit-autoupdate","group":"2022"},"next":{"title":"Custom roles and domains in Sphinx with one line","url":"/blog/2022/sphinx-custom-crossrefs","group":"2022"}}},"domain":"http://localhost:3000"}