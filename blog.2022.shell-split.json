{"kind":"Article","sha256":"1e38cf6dcf015bdb47f922a41efc5dce8397533c1daecd187a485ed136a279cb","slug":"blog.2022.shell-split","location":"/blog/2022/shell-split.md","dependencies":[],"frontmatter":{"title":"subprocess.run can execute shell commands directly","tags":["shell","python"],"date":"2022-11-29","content_includes_title":false,"github":"https://github.com/choldgraf/choldgraf.github.io","exports":[{"format":"md","filename":"shell-split.md","url":"/build/shell-split-eeee473515267287932ac7a3cc2e5d4a.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"I often run shell commands in Python via the ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"oKgIOYgBAa"},{"type":"link","url":"https://docs.python.org/3/library/subprocess.html#subprocess.run","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"inlineCode","value":"subprocess.run","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"XXgZGs5NuN"},{"type":"text","value":" command","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"EMjYwUnkZs"}],"urlSource":"https://docs.python.org/3/library/subprocess.html#subprocess.run","key":"aSo6H5mGlN"},{"type":"text","value":".\nOne thing that has always bugged me is that this required you to split commands into a list before it’d work properly.\nFor example, you’d have to do:","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"HEcZIYfGgt"}],"key":"NJdR8yO4cg"},{"type":"code","lang":"python","value":"import subprocess\nimport shlex\n\nsubprocess.run(*shlex.split(\"ls -l\"))","position":{"start":{"line":15,"column":1},"end":{"line":20,"column":1}},"key":"HU3qdgXbW7"},{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Today I discovered that you don’t have to do this!\nThere’s a ","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"OLTm3FqM29"},{"type":"inlineCode","value":"shell=","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"fVhFRi7sfX"},{"type":"text","value":" keyword that can be used to tell subprocess to simply run the command directly in the shell.","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"w66dJVRSPg"}],"key":"pAyIAVySeu"},{"type":"paragraph","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"For example:","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"q50gGTZ0jM"}],"key":"qNTOCgTdU1"},{"type":"code","lang":"python","value":"import subprocess\nsubprocess.run(\"ls -l\", shell=True)","position":{"start":{"line":27,"column":1},"end":{"line":30,"column":1}},"key":"j01DNRI3Nu"},{"type":"paragraph","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"Apparently there are some ","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"H04QDVnQnB"},{"type":"link","url":"https://docs.python.org/3/library/subprocess.html#security-considerations","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"security considerations","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"bGLMhtt2JL"}],"urlSource":"https://docs.python.org/3/library/subprocess.html#security-considerations","key":"CpMwZ5sUlm"},{"type":"text","value":" but this seems like a big papercut saver to me.","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"ksXRBP0P6c"}],"key":"HcpVFfqQSu"}],"key":"Q8enCnp5IE"}],"key":"KV9xgWCwGv"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Automatically update pre-commit hook versions","url":"/blog/2022/precommit-autoupdate","group":"2022"},"next":{"title":"Custom roles and domains in Sphinx with one line","url":"/blog/2022/sphinx-custom-crossrefs","group":"2022"}}},"domain":"http://localhost:3000"}