{"version":2,"kind":"Notebook","sha256":"02335d18b28168379902faae8b85a239d80fed67dfbede3957869cd68e080c87","slug":"blog.2022.matplotlib-remote-font","location":"/blog/2022/matplotlib-remote-font.md","dependencies":[],"frontmatter":{"title":"Load and plot a remote font with Matplotlib","tags":["matplotlib"],"date":"2022-12-06","kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"jupytext":{"text_representation":{"extension":".md","format_name":"myst","format_version":"0.13","jupytext_version":"1.14.2"}},"content_includes_title":false,"authors":[{"id":"chris","nameParsed":{"literal":"Chris Holdgraf","given":"Chris","family":"Holdgraf"},"name":"Chris Holdgraf","orcid":"0000-0002-2391-0678","affiliations":["affiliations-myst-generated-uid-0","affiliations-myst-generated-uid-1"],"url":"https://chrisholdgraf.com","github":"choldgraf","twitter":"choldgraf"}],"github":"https://github.com/choldgraf/choldgraf.github.io","affiliations":[{"name":"2i2c","url":"https://2i2c.org","id":"affiliations-myst-generated-uid-0"},{"name":"Project Jupyter","url":"https://jupyter.org","id":"affiliations-myst-generated-uid-1"}],"abbreviations":{"LF":"The Linux Foundation","JF":"The Jupyter Foundation","JEC":"Jupyter Executive Council","JFB":"The Jupyter Foundation Board","SSC":"Software Steering Council","OSPO":"Open Source Program Office"},"numbering":{"title":{"offset":2}},"source_url":"https://github.com/choldgraf/choldgraf.github.io/blob/main/blog/2022/matplotlib-remote-font.md","edit_url":"https://github.com/choldgraf/choldgraf.github.io/edit/main/blog/2022/matplotlib-remote-font.md","exports":[{"format":"md","filename":"matplotlib-remote-font.md","url":"/build/matplotlib-remote-fo-d13537a88c196adea041361dd60fb240.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"As part of ","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"Z9oXXM6DJX"},{"type":"link","url":"https://github.com/choldgraf/sphinx-social-previews","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"my ","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"nJOqN500cp"},{"type":"inlineCode","value":"sphinx-social-previews","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"tNuNry0G6L"}],"urlSource":"https://github.com/choldgraf/sphinx-social-previews","error":true,"key":"CYi8QKkdQb"},{"type":"text","value":" prototype, I wanted to be able to use the ","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"grrbjQcO2I"},{"type":"link","url":"https://fonts.google.com/specimen/Roboto","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Roboto Font from Google","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"Zta3CnUIuD"}],"urlSource":"https://fonts.google.com/specimen/Roboto","key":"JaRtJHklOh"},{"type":"text","value":" in image previews.\nHowever, Roboto is often not loaded on your local filesystem, so it took some digging to figure out how to make it possible to load via ","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"xjbwvjnaRR"},{"type":"link","url":"https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.text.html","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Matplotlib’s text plotting functionality","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"UjYXSX2gxL"}],"urlSource":"https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.text.html","key":"R8BFx0QCnX"},{"type":"text","value":".","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"d6nBnmPSnR"}],"key":"ziWSaJ7KqO"},{"type":"paragraph","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"Here’s the solution that finally worked for me, inspired ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"pJJPgGsozQ"},{"type":"link","url":"https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.text.html","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"from this Tweet with a similar implementation","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"peHacyXA6u"}],"urlSource":"https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.text.html","key":"CVqI6MIWOj"},{"type":"text","value":" from ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"CYPC8LdSAw"},{"type":"link","url":"https://github.com/whitead/dmol-book/blob/master/package/dmol/__init__.py","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"the ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"mGQozA4z75"},{"type":"inlineCode","value":"dmol","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"WyjAgs9S5n"},{"type":"text","value":" book","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"KVsqE8no2d"}],"urlSource":"https://github.com/whitead/dmol-book/blob/master/package/dmol/__init__.py","data":{"kind":"file","org":"whitead","repo":"dmol-book","reference":"master","file":"package/dmol/__init__.py","raw":"https://raw.githubusercontent.com/whitead/dmol-book/master/package/dmol/__init__.py"},"internal":false,"protocol":"github","key":"fhAqF7ReDS"},{"type":"text","value":".","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"jSA452x57H"}],"key":"el1lZJJgkK"},{"type":"paragraph","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Below I’ll use ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"CucMvow8X5"},{"type":"link","url":"http://mozilla.github.io/Fira/","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"the ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"HNUCCcuaps"},{"type":"inlineCode","value":"Fira Code","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"sTUAuYOQOI"},{"type":"text","value":" font from Mozilla","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"Mikv17RBGR"}],"urlSource":"http://mozilla.github.io/Fira/","key":"puQN44Km3o"},{"type":"text","value":" but you could do this with any open font that you have the ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"hyOHbapgDd"},{"type":"inlineCode","value":".ttf","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"cZu1bOuTTo"},{"type":"text","value":" file for.","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"d2Gd0joaZj"}],"key":"sTlwwNf4Sz"},{"type":"heading","depth":2,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Create a temporary folder and download the font file","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"UhrnCjfYaO"}],"identifier":"create-a-temporary-folder-and-download-the-font-file","label":"Create a temporary folder and download the font file","html_id":"create-a-temporary-folder-and-download-the-font-file","implicit":true,"key":"dByV00yCYd"},{"type":"paragraph","position":{"start":{"line":31,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"I’ll show how to do this with a local folder, so it’ll re-download each time you run the code.\nAlternatively you could download the font locally and just register the path instead of downloading it:","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"y4J94UF95c"}],"key":"gj4gpFS6qO"},{"type":"paragraph","position":{"start":{"line":34,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"text","value":"First, ","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"rE0DfqXhKv"},{"type":"strong","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"download the ","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"hJ0sFNkVwF"},{"type":"inlineCode","value":".ttf","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"VrlnXFgHhK"},{"type":"text","value":" of the font locally","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"C63Fxu3Jd4"}],"key":"cTXDJV99gc"},{"type":"text","value":" via ","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"LeTkFjzKV4"},{"type":"inlineCode","value":"urlretrieve","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"wSmH9lr8Pe"},{"type":"text","value":".\nFor example, the ","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"hxAgQpIGAU"},{"type":"inlineCode","value":"Fira Code","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"DmnZWy180d"},{"type":"text","value":" font from Mozilla is located ","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"yqCvPTSO3I"},{"type":"link","url":"https://github.com/google/fonts/raw/main/ofl/firacode/FiraCode%5Bwght%5D.ttf","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"at this URL","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"pNNgYZFJwT"}],"urlSource":"https://github.com/google/fonts/raw/main/ofl/firacode/FiraCode%5Bwght%5D.ttf","error":true,"key":"zlumbc7xr1"},{"type":"text","value":".\nTo download it locally into a ","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"ktvf3VAYM5"},{"type":"strong","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"temporary folder","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"bGuZswupQr"}],"key":"tquAISoyln"},{"type":"text","value":" using ","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"uPe7WV4slK"},{"type":"link","url":"https://docs.python.org/3/library/tempfile.html#tempfile.mkdtemp","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"the ","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"IZ9T6nV8cj"},{"type":"inlineCode","value":"tempfile.mkdtemp","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"JCq6CI0Wja"},{"type":"text","value":" function","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"FOESejzGHR"}],"urlSource":"https://docs.python.org/3/library/tempfile.html#tempfile.mkdtemp","key":"wVmjjYDymM"},{"type":"text","value":", run this code:","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"phJRftBv1g"}],"key":"u9cNm2fccq"}],"key":"YdGtX68JyL"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import tempfile\nfrom pathlib import Path\nimport urllib\nfrom rich import print\n\n# Create a temporary directory for the font file\npath = Path(tempfile.mkdtemp())\n\n# URL and downloaded path of the font\nurl_font = \"https://github.com/google/fonts/raw/main/ofl/firacode/FiraCode%5Bwght%5D.ttf\"\npath_font = path / \"Fira-Code.ttf\"\n\n\n# Download the font to our temporary directory\nurllib.request.urlretrieve(url_font, path_font)","key":"V7UNWOT9PP"},{"type":"output","id":"gljLeLpDqbm3QIgdJ_Y18","data":[],"key":"PFPJLQXxAo"}],"key":"JfOEvY7QiW"},{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"text","value":"Link the font with the ","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"iTT6XWE8Ml"},{"type":"inlineCode","value":"font_manager","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"Q4JBYP2wQu"},{"type":"text","value":" API","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"vfIcCRWNfZ"}],"identifier":"link-the-font-with-the-font-manager-api","label":"Link the font with the font_manager API","html_id":"link-the-font-with-the-font-manager-api","implicit":true,"key":"xglBw7da0x"}],"key":"KoqSyVe7LM"},{"type":"block","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":60,"column":1},"end":{"line":61,"column":1}},"children":[{"type":"text","value":"Now that the file is loaded, we can link it using ","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"XolUNjJihz"},{"type":"link","url":"https://matplotlib.org/stable/api/font_manager_api.html","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"text","value":"Matplotlib’s ","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"vSE9c49Fm9"},{"type":"inlineCode","value":"font_manager","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"luKqTi5U6Q"},{"type":"text","value":" API","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"SRQbQv7HVe"}],"urlSource":"https://matplotlib.org/stable/api/font_manager_api.html","key":"NDE7rwLSfE"},{"type":"text","value":".\nThis allows you to ","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"jHojmwkBoQ"},{"type":"strong","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"text","value":"register fonts that Matplotlib knows how to use","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"CxSwo7yv49"}],"key":"BCyNBy9LyV"},{"type":"text","value":".","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"ZC9L1YvuMi"}],"key":"ibyQs0UOL0"}],"key":"Bb50nwVxtP"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from matplotlib import font_manager\n\n# Create a Matplotlib Font object from our `.ttf` file\nfont = font_manager.FontEntry(fname=str(path_font), name=\"Fira-Downloaded\")\n\n# Register this object with Matplotlib's ttf list\nfont_manager.fontManager.ttflist.append(font)\n# Print the last few items to see what they look like\nprint(font_manager.fontManager.ttflist[-3:])","key":"RRHLzXCazl"},{"type":"output","id":"usLptAZtI_giFmTuqrWQe","data":[],"key":"FsZQrQytQ8"}],"key":"Q4foMCcYK2"},{"type":"block","children":[{"type":"admonition","kind":"tip","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Tip","key":"C853FFSgl3"}],"key":"sOaa1k1afK"},{"type":"paragraph","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"children":[{"type":"text","value":"To list all of the fonts that Matplotlib knows how to plot, inspect the list ","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"pTwZgevhNq"},{"type":"inlineCode","value":"matplotlib.font_manager.fontManager.ttflist","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"XAVNuRjzUa"},{"type":"text","value":".","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"gJriNuxF53"}],"key":"vFfuqHlv2F"}],"key":"r88y4ITrDV"}],"key":"W1330qn1Pd"},{"type":"block","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"children":[{"type":"text","value":"Make a plot with this font","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"w3IaKT9THv"}],"identifier":"make-a-plot-with-this-font","label":"Make a plot with this font","html_id":"make-a-plot-with-this-font","implicit":true,"key":"gwFQwiq0Ga"},{"type":"paragraph","position":{"start":{"line":83,"column":1},"end":{"line":84,"column":1}},"children":[{"type":"text","value":"Now that we’ve registered the font, we can plot it with ","position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"key":"JTun51AzN4"},{"type":"inlineCode","value":"ax.text","position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"key":"FzjuhY4GHJ"},{"type":"text","value":".\nTo do so, use the ","position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"key":"vUcCzpV9EX"},{"type":"inlineCode","value":"plt.rc_context","position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"key":"tybt5hXxYM"},{"type":"text","value":" context manager to temporarily update our default font:","position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"key":"LSl7EGPsuY"}],"key":"QG5uf9k0Uj"}],"key":"IIY3DUB3NF"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import matplotlib.pyplot as plt\n\nfig, axs = plt.subplots(1, 3, figsize=(9, 5))\n\n# This will now render as a `Roboto Flex` font\naxs[0].text(.1, .5, \"The default font!\", fontdict={\"fontsize\": 15})\naxs[1].text(.1, .5, \"A Matplotlib font\", fontdict={\"fontsize\": 15, \"family\": \"cmmi10\"})\naxs[2].text(.1, .5, \"The Fira Code font!\", fontdict={\"fontsize\": 15, \"family\": font.name})\n\nfor ax in axs:\n  ax.set_axis_off()","key":"PV5W3x18s3"},{"type":"output","id":"VthDnv0pZV-5H_KupgrM5","data":[],"key":"jieqCQLMAz"}],"key":"IKscHpktni"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"children":[{"type":"text","value":"And that’s it!","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"key":"Q4Tyrvoev8"}],"key":"lXfxMlqtNg"}],"key":"TYLJAavI7P"}],"key":"zSMahXD72P"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Report from the JupyterLite workshop: WebAssembly is pretty cool","url":"/blog/2022/jupyterlite-workshop","group":"2022"},"next":{"title":"Automatically updating my publications page with ORCID and doi.org","url":"/blog/2022/orcid-auto-update","group":"2022"}}},"domain":"http://localhost:3000"}