{"version":2,"kind":"Article","sha256":"851f4e0489db8d601dbfe576689d0ee3c56404b940af975bf0e6b42c1fd4dc8f","slug":"blog.2018.jekyllmarkdown","location":"/blog/2018/jekyllmarkdown.md","dependencies":[],"frontmatter":{"title":"Blogging with Jupyter Notebooks and Jekyll using nbconvert templates","tags":["python","blogging","jekyll"],"date":"2018-05-23","content_includes_title":false,"authors":[{"id":"chris","nameParsed":{"literal":"Chris Holdgraf","given":"Chris","family":"Holdgraf"},"name":"Chris Holdgraf","orcid":"0000-0002-2391-0678","affiliations":["affiliations-myst-generated-uid-0","affiliations-myst-generated-uid-1"],"url":"https://chrisholdgraf.com","github":"choldgraf","twitter":"choldgraf"}],"github":"https://github.com/choldgraf/choldgraf.github.io","affiliations":[{"name":"2i2c","url":"https://2i2c.org","id":"affiliations-myst-generated-uid-0"},{"name":"Project Jupyter","url":"https://jupyter.org","id":"affiliations-myst-generated-uid-1"}],"abbreviations":{"LF":"The Linux Foundation","JF":"The Jupyter Foundation","JEC":"Jupyter Executive Council","JFB":"The Jupyter Foundation Board","SSC":"Software Steering Council","OSPO":"Open Source Program Office"},"numbering":{"title":{"offset":2}},"edit_url":"https://github.com/choldgraf/choldgraf.github.io/blob/main/blog/2018/jekyllmarkdown.md","exports":[{"format":"md","filename":"jekyllmarkdown.md","url":"/build/jekyllmarkdown-aafe87b730444d823aad60755ecbb8b4.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Here’s a quick (and hopefully helpful) post for those wishing to blog in\nJekyll using Jupyter notebooks. As some of you may know, ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"M6oVmOEyOE"},{"type":"inlineCode","value":"nbconvert","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"J1MEX6CRLY"},{"type":"text","value":" can\neasily convert your ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"MMNl5K9ll6"},{"type":"inlineCode","value":".ipynb","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"eBoOymMD4x"},{"type":"text","value":" files to markdown, which Jekyll can easily\nturn into blog posts for you.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"GiU25WEuc6"}],"key":"lmCl5XJ9DH"},{"type":"code","lang":"","value":"nbconvert --to markdown myfile.ipynb","position":{"start":{"line":18,"column":1},"end":{"line":20,"column":1}},"key":"WIFeEHZj4w"},{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"However, an annoying part of this is that Markdown doesn’t include classes\nfor input and outputs, which means they each get treated the same in the\noutput. Not ideal.","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"Xi2by6nyGR"}],"key":"Syvp2L0dDi"},{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Fortunately, ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"YlOkBTtsgr"},{"type":"link","url":"https://nbconvert.readthedocs.io/en/latest/external_exporters.html","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"you can customize nbconvert extensively","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"LXAfqVXhj2"}],"urlSource":"https://nbconvert.readthedocs.io/en/latest/external_exporters.html","key":"L8utN5RAc7"},{"type":"text","value":".\nFirst, it’s possible to ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"nmI4IrevtB"},{"type":"link","url":"https://nbconvert.readthedocs.io/en/latest/external_exporters.html#writing-a-custom-exporter","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"create your ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"lVf8roGWFD"},{"type":"emphasis","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"own","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"GvrCc5OyEQ"}],"key":"sG9g9mIAtC"},{"type":"text","value":" exporter class","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"k9YW3MZe5Q"}],"urlSource":"https://nbconvert.readthedocs.io/en/latest/external_exporters.html#writing-a-custom-exporter","key":"QsySDCxtbU"},{"type":"text","value":", but this is a bit heavy for what we want to do. In our case, we’d\nsimply like to ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"nAZr8r1v4u"},{"type":"emphasis","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"extend","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"yrM4asNLvH"}],"key":"tGFdWHA8mL"},{"type":"text","value":" the markdown exporter so that it outputs Jekyll-friendly\nmarkdown.","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"uhr4RvT5Gv"}],"key":"ryt6Hhwr7X"},{"type":"heading","depth":2,"position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Extending ","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"eYcmislvHQ"},{"type":"inlineCode","value":"nbconvert's","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"ybw8XAmz9c"},{"type":"text","value":" markdown template","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"KPk0GXs6Iu"}],"identifier":"extending-nbconverts-markdown-template","label":"Extending nbconvert's markdown template","html_id":"extending-nbconverts-markdown-template","implicit":true,"key":"uLWiAGZRSF"},{"type":"paragraph","position":{"start":{"line":33,"column":1},"end":{"line":40,"column":1}},"children":[{"type":"text","value":"Because ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"U7Sda4UQdw"},{"type":"inlineCode","value":"nbconvert","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"KVKM6pP699"},{"type":"text","value":" uses Liquid Templates for its exporters, this is\nrelatively easy! For example,\n","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"NDojBwVcEl"},{"type":"link","url":"https://github.com/jupyter/nbconvert/blob/master/nbconvert/templates/markdown.tpl","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"here is ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"ZcFBXSgAyu"},{"type":"inlineCode","value":"nbconvert","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"xbL2E6wQ1I"},{"type":"text","value":"’s markdown template","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"FSqNv5vRPr"}],"urlSource":"https://github.com/jupyter/nbconvert/blob/master/nbconvert/templates/markdown.tpl","data":{"kind":"file","org":"jupyter","repo":"nbconvert","reference":"master","file":"nbconvert/templates/markdown.tpl","raw":"https://raw.githubusercontent.com/jupyter/nbconvert/master/nbconvert/templates/markdown.tpl"},"internal":false,"protocol":"github","key":"FHvPnU7pvb"},{"type":"text","value":".\nYou can see how it extends another template, then adds some modifications of\nits own. What we need to do is create a new template that slightly modifies\nthe functionality of ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"A3Sg0QfNT6"},{"type":"inlineCode","value":"nbconvert","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"E4hIKkTQ6y"},{"type":"text","value":"’s markdown template. Then we can use the same\nmarkdown exporter, but with our custom template defining how the markdown is\ncreated.","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"SejhSeu7KD"}],"key":"FsJwb9qvO4"},{"type":"paragraph","position":{"start":{"line":42,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"text","value":"To treat input and output text differently, we’ll extend ","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"jg8p1CTA4C"},{"type":"inlineCode","value":"nbconvert","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"YK3diDZboD"},{"type":"text","value":"’s base\nmarkdown template by creating a template file of our own. Simply write the\nfollowing lines into a file called ","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"j4RrVn9792"},{"type":"inlineCode","value":"mytemplate.tpl","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"oGL5VuzkRD"},{"type":"text","value":".","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"qSl9MfUCsk"}],"key":"LXEbnqrzZH"},{"type":"paragraph","position":{"start":{"line":46,"column":1},"end":{"line":48,"column":1}},"children":[{"type":"text","value":"{% highlight html %}\n{% raw %}\n{% extends ‘markdown.tpl’ %}","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"key":"L1wFY14mCg"}],"key":"Fgpc4j0Gpn"},{"type":"comment","value":" Add Div for input area ","key":"IjLsbVn6SC"},{"type":"paragraph","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"children":[{"type":"text","value":"{% block input %}","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"Oal3LMf6YC"}],"key":"F39rAN5LJq"},{"type":"div","class":"input_area","children":[{"type":"text","value":"{{ super() }}","key":"bIGHqg126p"}],"key":"dqSIQCXs5J"},{"type":"paragraph","children":[{"type":"text","value":"{% endblock input %}","key":"d2V6hM64q8"}],"key":"FPVkBPP0Sh"},{"type":"comment","value":" Remove indentations for output text and add div classes  ","key":"prvoKZ3DFm"},{"type":"paragraph","position":{"start":{"line":58,"column":1},"end":{"line":59,"column":1}},"children":[{"type":"text","value":"{% block stream %}\n{:.output_stream}","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"YYg3k4hjzl"}],"key":"eEXHL9Ldao"},{"type":"code","lang":"","value":"{{ output.text }}","position":{"start":{"line":60,"column":1},"end":{"line":62,"column":1}},"key":"VJ9svjRaEW"},{"type":"paragraph","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"text","value":"{% endblock stream %}","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"vr7xy09GMO"}],"key":"HZ41DN2rvq"},{"type":"paragraph","position":{"start":{"line":66,"column":1},"end":{"line":67,"column":1}},"children":[{"type":"text","value":"{% block data_text %}\n{:.output_data_text}","position":{"start":{"line":66,"column":1},"end":{"line":66,"column":1}},"key":"a4AB1wfcS3"}],"key":"K9U3zRgBtX"},{"type":"code","lang":"","value":"{{ output.data['text/plain'] }}","position":{"start":{"line":68,"column":1},"end":{"line":70,"column":1}},"key":"oJ3e3Y3kKz"},{"type":"paragraph","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"text","value":"{% endblock data_text %}","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"pRqIZuYV1S"}],"key":"hDN3aIDAc1"},{"type":"paragraph","position":{"start":{"line":74,"column":1},"end":{"line":75,"column":1}},"children":[{"type":"text","value":"{% block traceback_line  %}\n{:.output_traceback_line}","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"ojJ87thjnR"}],"key":"LqdnQzjt0B"},{"type":"code","lang":"","value":"{{ line | strip_ansi }}","position":{"start":{"line":76,"column":1},"end":{"line":78,"column":1}},"key":"BQTMoF59LA"},{"type":"paragraph","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"children":[{"type":"text","value":"{% endblock traceback_line  %}","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"IHV2iGYiyv"}],"key":"uKlOAcMOzQ"},{"type":"comment","value":" Tell Jekyll not to render HTML output blocks as markdown ","key":"gghctE0rJq"},{"type":"paragraph","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"children":[{"type":"text","value":"{% block data_html %}","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"HE7LhAK80G"}],"key":"nQK1Qh9um9"},{"type":"div","children":[{"type":"text","value":"{{ output.data['text/html'] }}","key":"tONDvHSzfe"}],"key":"hP6y1yVlaO"},{"type":"paragraph","children":[{"type":"text","value":"{% endblock data_html %} {% endraw %} {% endhighlight %}","key":"B3Dw0Kp7gu"}],"key":"VUNShdORJ4"},{"type":"paragraph","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"children":[{"type":"text","value":"Above, we’re doing two things:","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"TlN8fZswi4"}],"key":"WAbfALxCsG"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":92,"column":1},"end":{"line":99,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":92,"column":1},"end":{"line":94,"column":1}},"children":[{"type":"text","value":"Overriding the input area block so that it is now wrapped in ","position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"key":"U3eWuC9GG1"},{"type":"inlineCode","value":"<div>","position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"key":"ShNz1B2WK6"},{"type":"text","value":" tags.\nNote that we can set a custom class, and set ","position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"key":"MTDDknYwI9"},{"type":"inlineCode","value":"markdown=\"1\"","position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"key":"qwvWYIq34t"},{"type":"text","value":" so that the\nmarkdown conversion occurs within the div.","position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"key":"MyII4YdbzO"}],"key":"y0rGD4HvAg"},{"type":"listItem","spread":true,"position":{"start":{"line":95,"column":1},"end":{"line":99,"column":1}},"children":[{"type":"text","value":"Overriding various output text blocks so that we remove the indentation\nthat was used to denote a “code” cell. Instead, we’ll wrap the output text\nin more common ","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"key":"k2QBvYStOB"},{"type":"inlineCode","value":"```","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"key":"yv6K5WkZRj"},{"type":"text","value":" characters, and use a trick to add a class to\ncode blocks: ","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"key":"J1WfIGjKGH"},{"type":"inlineCode","value":"{:.class_name}","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"key":"FLFdL8sccK"},{"type":"text","value":" syntax.","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"key":"lPlZyB9dLG"}],"key":"VpjnR49I8K"}],"key":"PQgdcMCXR3"},{"type":"paragraph","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"children":[{"type":"text","value":"We can then directly reference this template when we call ","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"key":"PbmSGgl3nS"},{"type":"inlineCode","value":"nbconvert","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"key":"f1XqbDw3p9"},{"type":"text","value":":","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"key":"cFvDtW9cd4"}],"key":"HWi7cMnkGH"},{"type":"code","lang":"","value":"nbconvert --to markdown --template path/to/mytemplate.tpl myfile.ipynb","position":{"start":{"line":102,"column":1},"end":{"line":104,"column":1}},"key":"ooY2vnvLON"},{"type":"paragraph","position":{"start":{"line":106,"column":1},"end":{"line":108,"column":1}},"children":[{"type":"text","value":"As a result, we now have classes around each of these divs that we can style\nhowever we like. For example, here are the CSS rules I added to remove the\ntheme’s “code box” around each of the output areas:","position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"key":"LjdFUKaTPf"}],"key":"jv7vRFqksP"},{"type":"code","lang":"css","value":".input_area div.highlighter-rouge {\n  background-color: #f7f7f7  !important;\n}\n\n.output_stream, .output_data_text, .output_traceback_line {\n  margin-left: 2% !important;\n  border: none !important;\n  border-radius: 4px !important;\n  background-color: #fafafa !important;\n  box-shadow: none !important;\n}\n\n.output_stream:before, .output_data_text:before, .output_traceback_line:before{\n  content: none !important;\n}","position":{"start":{"line":110,"column":1},"end":{"line":126,"column":1}},"key":"SMvndTRzv1"},{"type":"paragraph","position":{"start":{"line":128,"column":1},"end":{"line":129,"column":1}},"children":[{"type":"text","value":"It took me a while to figure out this pattern, so hopefully other people find\nit useful as well!","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"iWIFVcMjx4"}],"key":"UuszviFY7m"}],"key":"mCJvl2hFWY"}],"key":"t8TkTgYE4S"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Open communities need to be partners, not sources of free labor","url":"/blog/2018/free-labor-partners","group":"2018"},"next":{"title":"How do projects signal how “open” they are?","url":"/blog/2018/kinds-of-openness","group":"2018"}}},"domain":"http://localhost:3000"}