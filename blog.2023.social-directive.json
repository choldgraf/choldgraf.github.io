{"version":2,"kind":"Article","sha256":"fddf911de394d351ebe3e193508020bca41c2fbcfdca99e00573f81480d18423","slug":"blog.2023.social-directive","location":"/blog/2023/social-directive.md","dependencies":[],"frontmatter":{"title":"A Sphinx directive for social media embeds","tags":["sphinx"],"date":"2023-02-15","content_includes_title":false,"authors":[{"id":"chris","nameParsed":{"literal":"Chris Holdgraf","given":"Chris","family":"Holdgraf"},"name":"Chris Holdgraf","orcid":"0000-0002-2391-0678","affiliations":["affiliations-myst-generated-uid-0","affiliations-myst-generated-uid-1"],"url":"https://chrisholdgraf.com","github":"choldgraf","twitter":"choldgraf"}],"github":"https://github.com/choldgraf/choldgraf.github.io","affiliations":[{"name":"2i2c","url":"https://2i2c.org","id":"affiliations-myst-generated-uid-0"},{"name":"Project Jupyter","url":"https://jupyter.org","id":"affiliations-myst-generated-uid-1"}],"abbreviations":{"LF":"The Linux Foundation","JF":"The Jupyter Foundation","JEC":"Jupyter Executive Council","JFB":"The Jupyter Foundation Board","SSC":"Software Steering Council","OSPO":"Open Source Program Office"},"numbering":{"title":{"offset":2}},"source_url":"https://github.com/choldgraf/choldgraf.github.io/blob/main/blog/2023/social-directive.md","edit_url":"https://github.com/choldgraf/choldgraf.github.io/edit/main/blog/2023/social-directive.md","exports":[{"format":"md","filename":"social-directive.md","url":"/build/social-directive-62dbea310d2665d98f7ceeaf5800657a.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"This probably doesn’t work anymore","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"cYHe5jukFe"}],"key":"iFpjAmn0JP"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"I’ve since moved my blog to use ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"w1brv87Glz"},{"type":"link","url":"https://mystmd.org","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"the MyST Document Engine","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"IdsoEStAw2"}],"urlSource":"https://mystmd.org","key":"YTLFFexLp9"},{"type":"text","value":" so this example will no longer work on my personal blog. See ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"aBi6mYnrtr"},{"type":"link","url":"https://github.com/choldgraf/choldgraf.github.io/blob/ae8ee9792c74aac72f46c645d19352abc439d572/blog/2023/social-directive.md","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"this permalink for the latest working version","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"lhZx9WXbuL"}],"urlSource":"https://github.com/choldgraf/choldgraf.github.io/blob/ae8ee9792c74aac72f46c645d19352abc439d572/blog/2023/social-directive.md","data":{"kind":"file","org":"choldgraf","repo":"choldgraf.github.io","reference":"ae8ee9792c74aac72f46c645d19352abc439d572","file":"blog/2023/social-directive.md","raw":"https://raw.githubusercontent.com/choldgraf/choldgraf.github.io/ae8ee9792c74aac72f46c645d19352abc439d572/blog/2023/social-directive.md"},"internal":false,"protocol":"github","key":"b7vkGzUOEP"},{"type":"text","value":".","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"muL782L8ND"}],"key":"NCnXWUwiaL"}],"key":"C7vBffHtoh"},{"type":"paragraph","position":{"start":{"line":14,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"I often want to link to social and other types of web-based media in my Sphinx documentation and blog.\nRather than embedding it all in custom HTML code, I decided to write a little wrapper to turn it into a directive.","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"KTwkCfdh66"}],"key":"G4uPV4DdYz"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"It’s called ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"ie2XFVNxkB"},{"type":"inlineCode","value":"{socialpost}","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"WaugvDfnPJ"},{"type":"text","value":", and it works with Twitter, Mastodon, and YouTube links.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"AbTRomBeZy"}],"key":"p42E5bLiph"},{"type":"heading","depth":2,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"How it works","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"eI0EkKUhUa"}],"identifier":"how-it-works","label":"How it works","html_id":"how-it-works","implicit":true,"key":"ujnAjo69J6"},{"type":"paragraph","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Here’s a brief description of how this directive works:","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"Bn6kXyBtHg"}],"key":"CgpIISxJTW"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":23,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Parse the directive content (the thing that comes after ","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"J5MKhqg7dJ"},{"type":"inlineCode","value":"{socialpost}","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"edkeySzMfp"},{"type":"text","value":", e.g. ","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"kfgDoh4GZW"},{"type":"inlineCode","value":"https://twitter.com/choldgraf/status/1564614538309390345","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"JCaDhKGuJy"},{"type":"text","value":")","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"wreHPzEkU1"}],"key":"SxG8g8eE24"}],"key":"Ai9pxQRaqt"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Do some basic pattern matching to decide if it is Twitter / Mastodon / YouTube","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"qZ9H0aDZ1R"}],"key":"xXHZGxzjzE"}],"key":"M2FxRaGv5P"},{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"Parse the URL for the proper unique identifier for the post (e.g. above it is ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"VSmT4EysQX"},{"type":"inlineCode","value":"1564614538309390345","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"nyvQtnkNdu"},{"type":"text","value":")","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"AflgLvG73Z"}],"key":"nrLVu4DiCV"}],"key":"ed6eBKbciO"},{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Use an embed template that embeds this identifier into each service. E.g., for Twitter it is:","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"RQnG9drtPR"}],"key":"tKL6FFmdOD"},{"type":"code","lang":"html","value":"<blockquote class=\"twitter-tweet\"><p lang=\"en\" dir=\"ltr\">\n  <a href=\"https://twitter.com/choldgraf/status/1564614538309390345\">Tweet from @choldgraf</a>\n</blockquote>","position":{"start":{"line":28,"column":1},"end":{"line":32,"column":1}},"key":"m3SzNUyhFs"}],"key":"RCDbxgn5ZJ"},{"type":"listItem","spread":true,"position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"This is all wrapped up in a ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"mODnKt5oZp"},{"type":"inlineCode","value":"Directive","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"scEQ6vs3Rw"},{"type":"text","value":" object that outputs an HTML ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"VjVCAgwhjE"},{"type":"inlineCode","value":"raw","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"YD4QKj4UA1"},{"type":"text","value":" node so I can pass through raw HTML.","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"yMn0k8rH1l"}],"key":"UbKVOmHzNr"}],"key":"K62syB6Qsm"},{"type":"listItem","spread":true,"position":{"start":{"line":34,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":34,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"Load any necessary JS files if this directive is detected on a page.\nThis is done with an ","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"MeJnGfmbA0"},{"type":"inlineCode","value":"html-page-context","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"boJpzM3WEV"},{"type":"text","value":" event.","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"rZU1JyKopx"}],"key":"p37QQ5xchs"}],"key":"ikWigubfgw"},{"type":"listItem","spread":true,"position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"text","value":"I then connected them both to Sphinx in my site’s ","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"xiAbhkPOyK"},{"type":"inlineCode","value":"conf.py","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"FR09GuXczZ"},{"type":"text","value":" setup function.","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"thmFr0Rkkj"}],"key":"qLOMfg8XK0"}],"key":"mGd6987TAP"}],"key":"kexgPaHBiG"}],"key":"sClw9yp5tv"}],"key":"IMLgnYdJ6T"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Report from FOSDEM23: beautiful chaos in a conference","url":"/blog/2023/fosdem","group":"2023"},"next":{"title":"Bundle extensions with your Sphinx theme","url":"/blog/2023/sphinx-add-extensions","group":"2023"}}},"domain":"http://localhost:3000"}